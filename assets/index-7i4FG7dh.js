(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function Pd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fd={exports:{}},fa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=Symbol.for("react.transitional.element"),kg=Symbol.for("react.fragment");function Jd(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var l in e)l!=="key"&&(n[l]=e[l])}else n=e;return e=n.ref,{$$typeof:Lg,type:t,key:i,ref:e!==void 0?e:null,props:n}}fa.Fragment=kg;fa.jsx=Jd;fa.jsxs=Jd;Fd.exports=fa;var p=Fd.exports,Yd={exports:{}},z={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=Symbol.for("react.transitional.element"),Hg=Symbol.for("react.portal"),qg=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),zg=Symbol.for("react.profiler"),Bg=Symbol.for("react.consumer"),Pg=Symbol.for("react.context"),Fg=Symbol.for("react.forward_ref"),Jg=Symbol.for("react.suspense"),Yg=Symbol.for("react.memo"),Od=Symbol.for("react.lazy"),Og=Symbol.for("react.activity"),Hu=Symbol.iterator;function Kg(t){return t===null||typeof t!="object"?null:(t=Hu&&t[Hu]||t["@@iterator"],typeof t=="function"?t:null)}var Kd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$d=Object.assign,Xd={};function Li(t,e,n){this.props=t,this.context=e,this.refs=Xd,this.updater=n||Kd}Li.prototype.isReactComponent={};Li.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Li.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qd(){}Qd.prototype=Li.prototype;function wr(t,e,n){this.props=t,this.context=e,this.refs=Xd,this.updater=n||Kd}var Dr=wr.prototype=new Qd;Dr.constructor=wr;$d(Dr,Li.prototype);Dr.isPureReactComponent=!0;var qu=Array.isArray;function Es(){}var me={H:null,A:null,T:null,S:null},Zd=Object.prototype.hasOwnProperty;function br(t,e,n){var i=n.ref;return{$$typeof:Rr,type:t,key:e,ref:i!==void 0?i:null,props:n}}function $g(t,e){return br(t.type,e,t.props)}function Ir(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rr}function Xg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gu=/\/+/g;function Ua(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xg(""+t.key):e.toString(36)}function Qg(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Es,Es):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Qn(t,e,n,i,l){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(o){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Rr:case Hg:r=!0;break;case Od:return r=t._init,Qn(r(t._payload),e,n,i,l)}}if(r)return l=l(t),r=i===""?"."+Ua(t,0):i,qu(l)?(n="",r!=null&&(n=r.replace(Gu,"$&/")+"/"),Qn(l,e,n,"",function(f){return f})):l!=null&&(Ir(l)&&(l=$g(l,n+(l.key==null||t&&t.key===l.key?"":(""+l.key).replace(Gu,"$&/")+"/")+r)),e.push(l)),1;r=0;var u=i===""?".":i+":";if(qu(t))for(var c=0;c<t.length;c++)i=t[c],o=u+Ua(i,c),r+=Qn(i,e,n,o,l);else if(c=Kg(t),typeof c=="function")for(t=c.call(t),c=0;!(i=t.next()).done;)i=i.value,o=u+Ua(i,c++),r+=Qn(i,e,n,o,l);else if(o==="object"){if(typeof t.then=="function")return Qn(Qg(t),e,n,i,l);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function Ql(t,e,n){if(t==null)return t;var i=[],l=0;return Qn(t,i,"","",function(o){return e.call(n,o,l++)}),i}function Zg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wg={map:Ql,forEach:function(t,e,n){Ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ql(t,function(){e++}),e},toArray:function(t){return Ql(t,function(e){return e})||[]},only:function(t){if(!Ir(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Activity=Og;z.Children=Wg;z.Component=Li;z.Fragment=qg;z.Profiler=zg;z.PureComponent=wr;z.StrictMode=Gg;z.Suspense=Jg;z.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me;z.__COMPILER_RUNTIME={__proto__:null,c:function(t){return me.H.useMemoCache(t)}};z.cache=function(t){return function(){return t.apply(null,arguments)}};z.cacheSignal=function(){return null};z.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=$d({},t.props),l=t.key;if(e!=null)for(o in e.key!==void 0&&(l=""+e.key),e)!Zd.call(e,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&e.ref===void 0||(i[o]=e[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var r=Array(o),u=0;u<o;u++)r[u]=arguments[u+2];i.children=r}return br(t.type,l,i)};z.createContext=function(t){return t={$$typeof:Pg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Bg,_context:t},t};z.createElement=function(t,e,n){var i,l={},o=null;if(e!=null)for(i in e.key!==void 0&&(o=""+e.key),e)Zd.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(l[i]=e[i]);var r=arguments.length-2;if(r===1)l.children=n;else if(1<r){for(var u=Array(r),c=0;c<r;c++)u[c]=arguments[c+2];l.children=u}if(t&&t.defaultProps)for(i in r=t.defaultProps,r)l[i]===void 0&&(l[i]=r[i]);return br(t,o,l)};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:Fg,render:t}};z.isValidElement=Ir;z.lazy=function(t){return{$$typeof:Od,_payload:{_status:-1,_result:t},_init:Zg}};z.memo=function(t,e){return{$$typeof:Yg,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=me.T,n={};me.T=n;try{var i=t(),l=me.S;l!==null&&l(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Es,zu)}catch(o){zu(o)}finally{e!==null&&n.types!==null&&(e.types=n.types),me.T=e}};z.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()};z.use=function(t){return me.H.use(t)};z.useActionState=function(t,e,n){return me.H.useActionState(t,e,n)};z.useCallback=function(t,e){return me.H.useCallback(t,e)};z.useContext=function(t){return me.H.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t,e){return me.H.useDeferredValue(t,e)};z.useEffect=function(t,e){return me.H.useEffect(t,e)};z.useEffectEvent=function(t){return me.H.useEffectEvent(t)};z.useId=function(){return me.H.useId()};z.useImperativeHandle=function(t,e,n){return me.H.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return me.H.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return me.H.useLayoutEffect(t,e)};z.useMemo=function(t,e){return me.H.useMemo(t,e)};z.useOptimistic=function(t,e){return me.H.useOptimistic(t,e)};z.useReducer=function(t,e,n){return me.H.useReducer(t,e,n)};z.useRef=function(t){return me.H.useRef(t)};z.useState=function(t){return me.H.useState(t)};z.useSyncExternalStore=function(t,e,n){return me.H.useSyncExternalStore(t,e,n)};z.useTransition=function(){return me.H.useTransition()};z.version="19.2.0";Yd.exports=z;var R=Yd.exports;const jg=Pd(R);var Wd={exports:{}},da={},jd={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(w,U){var L=w.length;w.push(U);e:for(;0<L;){var P=L-1>>>1,Y=w[P];if(0<l(Y,U))w[P]=U,w[L]=Y,L=P;else break e}}function n(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var U=w[0],L=w.pop();if(L!==U){w[0]=L;e:for(var P=0,Y=w.length,Me=Y>>>1;P<Me;){var Ne=2*(P+1)-1,Qe=w[Ne],oe=Ne+1,te=w[oe];if(0>l(Qe,L))oe<Y&&0>l(te,Qe)?(w[P]=te,w[oe]=L,P=oe):(w[P]=Qe,w[Ne]=L,P=Ne);else if(oe<Y&&0>l(te,L))w[P]=te,w[oe]=L,P=oe;else break e}}return U}function l(w,U){var L=w.sortIndex-U.sortIndex;return L!==0?L:w.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var r=Date,u=r.now();t.unstable_now=function(){return r.now()-u}}var c=[],f=[],d=1,m=null,h=3,g=!1,C=!1,S=!1,A=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(w){for(var U=n(f);U!==null;){if(U.callback===null)i(f);else if(U.startTime<=w)i(f),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(f)}}function M(w){if(S=!1,E(w),!C)if(n(c)!==null)C=!0,_||(_=!0,V());else{var U=n(f);U!==null&&H(M,U.startTime-w)}}var _=!1,x=-1,b=5,D=-1;function I(){return A?!0:!(t.unstable_now()-D<b)}function J(){if(A=!1,_){var w=t.unstable_now();D=w;var U=!0;try{e:{C=!1,S&&(S=!1,y(x),x=-1),g=!0;var L=h;try{t:{for(E(w),m=n(c);m!==null&&!(m.expirationTime>w&&I());){var P=m.callback;if(typeof P=="function"){m.callback=null,h=m.priorityLevel;var Y=P(m.expirationTime<=w);if(w=t.unstable_now(),typeof Y=="function"){m.callback=Y,E(w),U=!0;break t}m===n(c)&&i(c),E(w)}else i(c);m=n(c)}if(m!==null)U=!0;else{var Me=n(f);Me!==null&&H(M,Me.startTime-w),U=!1}}break e}finally{m=null,h=L,g=!1}U=void 0}}finally{U?V():_=!1}}}var V;if(typeof T=="function")V=function(){T(J)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ne=Q.port2;Q.port1.onmessage=J,V=function(){ne.postMessage(null)}}else V=function(){v(J,0)};function H(w,U){x=v(function(){w(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(w){w.callback=null},t.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<w?Math.floor(1e3/w):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(w){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var L=h;h=U;try{return w()}finally{h=L}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(w,U){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var L=h;h=w;try{return U()}finally{h=L}},t.unstable_scheduleCallback=function(w,U,L){var P=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?P+L:P):L=P,w){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=L+Y,w={id:d++,callback:U,priorityLevel:w,startTime:L,expirationTime:Y,sortIndex:-1},L>P?(w.sortIndex=L,e(f,w),n(c)===null&&w===n(f)&&(S?(y(x),x=-1):S=!0,H(M,L-P))):(w.sortIndex=Y,e(c,w),C||g||(C=!0,_||(_=!0,V()))),w},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(w){var U=h;return function(){var L=h;h=U;try{return w.apply(this,arguments)}finally{h=L}}}})(em);jd.exports=em;var ey=jd.exports,tm={exports:{}},Pe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty=R;function nm(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Qt(){}var Be={d:{f:Qt,r:function(){throw Error(nm(522))},D:Qt,C:Qt,L:Qt,m:Qt,X:Qt,S:Qt,M:Qt},p:0,findDOMNode:null},ny=Symbol.for("react.portal");function iy(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ny,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var sl=ty.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ma(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Pe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Be;Pe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(nm(299));return iy(t,e,null,n)};Pe.flushSync=function(t){var e=sl.T,n=Be.p;try{if(sl.T=null,Be.p=2,t)return t()}finally{sl.T=e,Be.p=n,Be.d.f()}};Pe.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Be.d.C(t,e))};Pe.prefetchDNS=function(t){typeof t=="string"&&Be.d.D(t)};Pe.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=ma(n,e.crossOrigin),l=typeof e.integrity=="string"?e.integrity:void 0,o=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Be.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:l,fetchPriority:o}):n==="script"&&Be.d.X(t,{crossOrigin:i,integrity:l,fetchPriority:o,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Pe.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=ma(e.as,e.crossOrigin);Be.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Be.d.M(t)};Pe.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=ma(n,e.crossOrigin);Be.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Pe.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=ma(e.as,e.crossOrigin);Be.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Be.d.m(t)};Pe.requestFormReset=function(t){Be.d.r(t)};Pe.unstable_batchedUpdates=function(t,e){return t(e)};Pe.useFormState=function(t,e,n){return sl.H.useFormState(t,e,n)};Pe.useFormStatus=function(){return sl.H.useHostTransitionStatus()};Pe.version="19.2.0";function im(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(im)}catch(t){console.error(t)}}im(),tm.exports=Pe;var ly=tm.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we=ey,lm=R,oy=ly;function N(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function am(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sm(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bu(t){if(kl(t)!==t)throw Error(N(188))}function ay(t){var e=t.alternate;if(!e){if(e=kl(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,i=e;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(i=l.return,i!==null){n=i;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Bu(l),t;if(o===i)return Bu(l),e;o=o.sibling}throw Error(N(188))}if(n.return!==i.return)n=l,i=o;else{for(var r=!1,u=l.child;u;){if(u===n){r=!0,n=l,i=o;break}if(u===i){r=!0,i=l,n=o;break}u=u.sibling}if(!r){for(u=o.child;u;){if(u===n){r=!0,n=o,i=l;break}if(u===i){r=!0,i=o,n=l;break}u=u.sibling}if(!r)throw Error(N(189))}}if(n.alternate!==i)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function rm(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=rm(t),e!==null)return e;t=t.sibling}return null}var he=Object.assign,sy=Symbol.for("react.element"),Zl=Symbol.for("react.transitional.element"),nl=Symbol.for("react.portal"),ei=Symbol.for("react.fragment"),um=Symbol.for("react.strict_mode"),xs=Symbol.for("react.profiler"),cm=Symbol.for("react.consumer"),Ht=Symbol.for("react.context"),Ur=Symbol.for("react.forward_ref"),As=Symbol.for("react.suspense"),_s=Symbol.for("react.suspense_list"),Vr=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),Ms=Symbol.for("react.activity"),ry=Symbol.for("react.memo_cache_sentinel"),Pu=Symbol.iterator;function $i(t){return t===null||typeof t!="object"?null:(t=Pu&&t[Pu]||t["@@iterator"],typeof t=="function"?t:null)}var uy=Symbol.for("react.client.reference");function Ns(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===uy?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ei:return"Fragment";case xs:return"Profiler";case um:return"StrictMode";case As:return"Suspense";case _s:return"SuspenseList";case Ms:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case nl:return"Portal";case Ht:return t.displayName||"Context";case cm:return(t._context.displayName||"Context")+".Consumer";case Ur:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vr:return e=t.displayName||null,e!==null?e:Ns(t.type)||"Memo";case Zt:e=t._payload,t=t._init;try{return Ns(t(e))}catch{}}return null}var il=Array.isArray,q=lm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=oy.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wn={pending:!1,data:null,method:null,action:null},Rs=[],ti=-1;function Nt(t){return{current:t}}function Ie(t){0>ti||(t.current=Rs[ti],Rs[ti]=null,ti--)}function ue(t,e){ti++,Rs[ti]=t.current,t.current=e}var Mt=Nt(null),El=Nt(null),un=Nt(null),Io=Nt(null);function Uo(t,e){switch(ue(un,e),ue(El,t),ue(Mt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?$c(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=$c(e),t=Dp(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ie(Mt),ue(Mt,t)}function xi(){Ie(Mt),Ie(El),Ie(un)}function ws(t){t.memoizedState!==null&&ue(Io,t);var e=Mt.current,n=Dp(e,t.type);e!==n&&(ue(El,t),ue(Mt,n))}function Vo(t){El.current===t&&(Ie(Mt),Ie(El)),Io.current===t&&(Ie(Io),Ul._currentValue=wn)}var Va,Fu;function _n(t){if(Va===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Va=e&&e[1]||"",Fu=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Va+t+Fu}var La=!1;function ka(t,e){if(!t||La)return"";La=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(g){var h=g}Reflect.construct(t,[],m)}else{try{m.call()}catch(g){h=g}t.call(m.prototype)}}else{try{throw Error()}catch(g){h=g}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(g){if(g&&h&&typeof g.stack=="string")return[g.stack,h.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),r=o[0],u=o[1];if(r&&u){var c=r.split(`
`),f=u.split(`
`);for(l=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;l<f.length&&!f[l].includes("DetermineComponentFrameRoot");)l++;if(i===c.length||l===f.length)for(i=c.length-1,l=f.length-1;1<=i&&0<=l&&c[i]!==f[l];)l--;for(;1<=i&&0<=l;i--,l--)if(c[i]!==f[l]){if(i!==1||l!==1)do if(i--,l--,0>l||c[i]!==f[l]){var d=`
`+c[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=l);break}}}finally{La=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?_n(n):""}function cy(t,e){switch(t.tag){case 26:case 27:case 5:return _n(t.type);case 16:return _n("Lazy");case 13:return t.child!==e&&e!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return ka(t.type,!1);case 11:return ka(t.type.render,!1);case 1:return ka(t.type,!0);case 31:return _n("Activity");default:return""}}function Ju(t){try{var e="",n=null;do e+=cy(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ds=Object.prototype.hasOwnProperty,Lr=we.unstable_scheduleCallback,Ha=we.unstable_cancelCallback,fy=we.unstable_shouldYield,dy=we.unstable_requestPaint,nt=we.unstable_now,my=we.unstable_getCurrentPriorityLevel,fm=we.unstable_ImmediatePriority,dm=we.unstable_UserBlockingPriority,Lo=we.unstable_NormalPriority,hy=we.unstable_LowPriority,mm=we.unstable_IdlePriority,py=we.log,gy=we.unstable_setDisableYieldValue,Hl=null,it=null;function ln(t){if(typeof py=="function"&&gy(t),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Hl,t)}catch{}}var lt=Math.clz32?Math.clz32:Ty,yy=Math.log,vy=Math.LN2;function Ty(t){return t>>>=0,t===0?32:31-(yy(t)/vy|0)|0}var Wl=256,jl=262144,eo=4194304;function Mn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ha(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var l=0,o=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var u=i&134217727;return u!==0?(i=u&~o,i!==0?l=Mn(i):(r&=u,r!==0?l=Mn(r):n||(n=u&~t,n!==0&&(l=Mn(n))))):(u=i&~o,u!==0?l=Mn(u):r!==0?l=Mn(r):n||(n=i&~t,n!==0&&(l=Mn(n)))),l===0?0:e!==0&&e!==l&&!(e&o)&&(o=l&-l,n=e&-e,o>=n||o===32&&(n&4194048)!==0)?e:l}function ql(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Cy(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hm(){var t=eo;return eo<<=1,!(eo&62914560)&&(eo=4194304),t}function qa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Sy(t,e,n,i,l,o){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var u=t.entanglements,c=t.expirationTimes,f=t.hiddenUpdates;for(n=r&~n;0<n;){var d=31-lt(n),m=1<<d;u[d]=0,c[d]=-1;var h=f[d];if(h!==null)for(f[d]=null,d=0;d<h.length;d++){var g=h[d];g!==null&&(g.lane&=-536870913)}n&=~m}i!==0&&pm(t,i,0),o!==0&&l===0&&t.tag!==0&&(t.suspendedLanes|=o&~(r&~e))}function pm(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-lt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-lt(n),l=1<<i;l&e|t[i]&e&&(t[i]|=e),n&=~l}}function ym(t,e){var n=e&-e;return n=n&42?1:kr(n),n&(t.suspendedLanes|e)?0:n}function kr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Hr(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function vm(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Bp(t.type))}function Yu(t,e){var n=ee.p;try{return ee.p=t,e()}finally{ee.p=n}}var En=Math.random().toString(36).slice(2),Ve="__reactFiber$"+En,$e="__reactProps$"+En,ki="__reactContainer$"+En,bs="__reactEvents$"+En,Ey="__reactListeners$"+En,xy="__reactHandles$"+En,Ou="__reactResources$"+En,zl="__reactMarker$"+En;function qr(t){delete t[Ve],delete t[$e],delete t[bs],delete t[Ey],delete t[xy]}function ni(t){var e=t[Ve];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[Ve]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jc(t);t!==null;){if(n=t[Ve])return n;t=jc(t)}return e}t=n,n=t.parentNode}return null}function Hi(t){if(t=t[Ve]||t[ki]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function ll(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(N(33))}function mi(t){var e=t[Ou];return e||(e=t[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function be(t){t[zl]=!0}var Tm=new Set,Cm={};function zn(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(Cm[t]=e,t=0;t<e.length;t++)Tm.add(e[t])}var Ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ku={},$u={};function _y(t){return Ds.call($u,t)?!0:Ds.call(Ku,t)?!1:Ay.test(t)?$u[t]=!0:(Ku[t]=!0,!1)}function po(t,e,n){if(_y(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function to(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Dt(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function My(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var l=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(r){n=""+r,o.call(this,r)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Is(t){if(!t._valueTracker){var e=Sm(t)?"checked":"value";t._valueTracker=My(t,e,""+t[e])}}function Em(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Sm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ny=/[\n"\\]/g;function dt(t){return t.replace(Ny,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Us(t,e,n,i,l,o,r,u){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ut(e)):t.value!==""+ut(e)&&(t.value=""+ut(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?Vs(t,r,ut(e)):n!=null?Vs(t,r,ut(n)):i!=null&&t.removeAttribute("value"),l==null&&o!=null&&(t.defaultChecked=!!o),l!=null&&(t.checked=l&&typeof l!="function"&&typeof l!="symbol"),u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?t.name=""+ut(u):t.removeAttribute("name")}function xm(t,e,n,i,l,o,r,u){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.type=o),e!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||e!=null)){Is(t);return}n=n!=null?""+ut(n):"",e=e!=null?""+ut(e):n,u||e===t.value||(t.value=e),t.defaultValue=e}i=i??l,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=u?t.checked:!!i,t.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),Is(t)}function Vs(t,e,n){e==="number"&&ko(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function hi(t,e,n,i){if(t=t.options,e){e={};for(var l=0;l<n.length;l++)e["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=e.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ut(n),e=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,i&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function Am(t,e,n){if(e!=null&&(e=""+ut(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ut(n):""}function _m(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(N(92));if(il(i)){if(1<i.length)throw Error(N(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=ut(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Is(t)}function _i(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ry=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||Ry.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Mm(t,e,n){if(e!=null&&typeof e!="object")throw Error(N(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var l in e)i=e[l],e.hasOwnProperty(l)&&n[l]!==i&&Xu(t,l,i)}else for(var o in e)e.hasOwnProperty(o)&&Xu(t,o,e[o])}function Gr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function go(t){return Dy.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qt(){}var Ls=null;function zr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ii=null,pi=null;function Qu(t){var e=Hi(t);if(e&&(t=e.stateNode)){var n=t[$e]||null;e:switch(t=e.stateNode,e.type){case"input":if(Us(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+dt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var l=i[$e]||null;if(!l)throw Error(N(90));Us(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Em(i)}break e;case"textarea":Am(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&hi(t,!!n.multiple,e,!1)}}}var Ga=!1;function Nm(t,e,n){if(Ga)return t(e,n);Ga=!0;try{var i=t(e);return i}finally{if(Ga=!1,(ii!==null||pi!==null)&&(Ma(),ii&&(e=ii,t=pi,pi=ii=null,Qu(e),t)))for(e=0;e<t.length;e++)Qu(t[e])}}function xl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[$e]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(Ft)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){ks=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{ks=!1}var on=null,Br=null,yo=null;function Rm(){if(yo)return yo;var t,e=Br,n=e.length,i,l="value"in on?on.value:on.textContent,o=l.length;for(t=0;t<n&&e[t]===l[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===l[o-i];i++);return yo=l.slice(t,1<i?1-i:void 0)}function vo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function no(){return!0}function Zu(){return!1}function Xe(t){function e(n,i,l,o,r){this._reactName=n,this._targetInst=l,this.type=i,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?no:Zu,this.isPropagationStopped=Zu,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),e}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=Xe(Bn),Bl=he({},Bn,{view:0,detail:0}),by=Xe(Bl),za,Ba,Qi,ga=he({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(za=t.screenX-Qi.screenX,Ba=t.screenY-Qi.screenY):Ba=za=0,Qi=t),za)},movementY:function(t){return"movementY"in t?t.movementY:Ba}}),Wu=Xe(ga),Iy=he({},ga,{dataTransfer:0}),Uy=Xe(Iy),Vy=he({},Bl,{relatedTarget:0}),Pa=Xe(Vy),Ly=he({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),ky=Xe(Ly),Hy=he({},Bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qy=Xe(Hy),Gy=he({},Bn,{data:0}),ju=Xe(Gy),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},By={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Py[t])?!!e[t]:!1}function Pr(){return Fy}var Jy=he({},Bl,{key:function(t){if(t.key){var e=zy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?By[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(t){return t.type==="keypress"?vo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yy=Xe(Jy),Oy=he({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=Xe(Oy),Ky=he({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),$y=Xe(Ky),Xy=he({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qy=Xe(Xy),Zy=he({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wy=Xe(Zy),jy=he({},Bn,{newState:0,oldState:0}),e0=Xe(jy),t0=[9,13,27,32],Fr=Ft&&"CompositionEvent"in window,rl=null;Ft&&"documentMode"in document&&(rl=document.documentMode);var n0=Ft&&"TextEvent"in window&&!rl,wm=Ft&&(!Fr||rl&&8<rl&&11>=rl),tc=" ",nc=!1;function Dm(t,e){switch(t){case"keyup":return t0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function i0(t,e){switch(t){case"compositionend":return bm(e);case"keypress":return e.which!==32?null:(nc=!0,tc);case"textInput":return t=e.data,t===tc&&nc?null:t;default:return null}}function l0(t,e){if(li)return t==="compositionend"||!Fr&&Dm(t,e)?(t=Rm(),yo=Br=on=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wm&&e.locale!=="ko"?null:e.data;default:return null}}var o0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!o0[t.type]:e==="textarea"}function Im(t,e,n,i){ii?pi?pi.push(i):pi=[i]:ii=i,e=ea(e,"onChange"),0<e.length&&(n=new pa("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ul=null,Al=null;function a0(t){Np(t,0)}function ya(t){var e=ll(t);if(Em(e))return t}function lc(t,e){if(t==="change")return e}var Um=!1;if(Ft){var Fa;if(Ft){var Ja="oninput"in document;if(!Ja){var oc=document.createElement("div");oc.setAttribute("oninput","return;"),Ja=typeof oc.oninput=="function"}Fa=Ja}else Fa=!1;Um=Fa&&(!document.documentMode||9<document.documentMode)}function ac(){ul&&(ul.detachEvent("onpropertychange",Vm),Al=ul=null)}function Vm(t){if(t.propertyName==="value"&&ya(Al)){var e=[];Im(e,Al,t,zr(t)),Nm(a0,e)}}function s0(t,e,n){t==="focusin"?(ac(),ul=e,Al=n,ul.attachEvent("onpropertychange",Vm)):t==="focusout"&&ac()}function r0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(Al)}function u0(t,e){if(t==="click")return ya(e)}function c0(t,e){if(t==="input"||t==="change")return ya(e)}function f0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:f0;function _l(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var l=n[i];if(!Ds.call(e,l)||!at(t[l],e[l]))return!1}return!0}function sc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rc(t,e){var n=sc(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sc(n)}}function Lm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function km(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ko(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ko(t.document)}return e}function Jr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var d0=Ft&&"documentMode"in document&&11>=document.documentMode,oi=null,Hs=null,cl=null,qs=!1;function uc(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qs||oi==null||oi!==ko(i)||(i=oi,"selectionStart"in i&&Jr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cl&&_l(cl,i)||(cl=i,i=ea(Hs,"onSelect"),0<i.length&&(e=new pa("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=oi)))}function An(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ai={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionrun:An("Transition","TransitionRun"),transitionstart:An("Transition","TransitionStart"),transitioncancel:An("Transition","TransitionCancel"),transitionend:An("Transition","TransitionEnd")},Ya={},Hm={};Ft&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function Pn(t){if(Ya[t])return Ya[t];if(!ai[t])return t;var e=ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hm)return Ya[t]=e[n];return t}var qm=Pn("animationend"),Gm=Pn("animationiteration"),zm=Pn("animationstart"),m0=Pn("transitionrun"),h0=Pn("transitionstart"),p0=Pn("transitioncancel"),Bm=Pn("transitionend"),Pm=new Map,Gs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gs.push("scrollEnd");function St(t,e){Pm.set(t,e),zn(e,[t])}var Ho=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rt=[],si=0,Yr=0;function va(){for(var t=si,e=Yr=si=0;e<t;){var n=rt[e];rt[e++]=null;var i=rt[e];rt[e++]=null;var l=rt[e];rt[e++]=null;var o=rt[e];if(rt[e++]=null,i!==null&&l!==null){var r=i.pending;r===null?l.next=l:(l.next=r.next,r.next=l),i.pending=l}o!==0&&Fm(n,l,o)}}function Ta(t,e,n,i){rt[si++]=t,rt[si++]=e,rt[si++]=n,rt[si++]=i,Yr|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Or(t,e,n,i){return Ta(t,e,n,i),qo(t)}function Fn(t,e){return Ta(t,null,null,e),qo(t)}function Fm(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var l=!1,o=t.return;o!==null;)o.childLanes|=n,i=o.alternate,i!==null&&(i.childLanes|=n),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(l=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,l&&e!==null&&(l=31-lt(n),t=o.hiddenUpdates,i=t[l],i===null?t[l]=[e]:i.push(e),e.lane=n|536870912),o):null}function qo(t){if(50<Tl)throw Tl=0,ar=null,Error(N(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var ri={};function g0(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(t,e,n,i){return new g0(t,e,n,i)}function Kr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zt(t,e){var n=t.alternate;return n===null?(n=et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Jm(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function To(t,e,n,i,l,o){var r=0;if(i=t,typeof t=="function")Kr(t)&&(r=1);else if(typeof t=="string")r=Sv(t,n,Mt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Ms:return t=et(31,n,e,l),t.elementType=Ms,t.lanes=o,t;case ei:return Dn(n.children,l,o,e);case um:r=8,l|=24;break;case xs:return t=et(12,n,e,l|2),t.elementType=xs,t.lanes=o,t;case As:return t=et(13,n,e,l),t.elementType=As,t.lanes=o,t;case _s:return t=et(19,n,e,l),t.elementType=_s,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ht:r=10;break e;case cm:r=9;break e;case Ur:r=11;break e;case Vr:r=14;break e;case Zt:r=16,i=null;break e}r=29,n=Error(N(130,t===null?"null":typeof t,"")),i=null}return e=et(r,n,e,l),e.elementType=t,e.type=i,e.lanes=o,e}function Dn(t,e,n,i){return t=et(7,t,i,e),t.lanes=n,t}function Oa(t,e,n){return t=et(6,t,null,e),t.lanes=n,t}function Ym(t){var e=et(18,null,null,0);return e.stateNode=t,e}function Ka(t,e,n){return e=et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var cc=new WeakMap;function mt(t,e){if(typeof t=="object"&&t!==null){var n=cc.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ju(e)},cc.set(t,e),e)}return{value:t,source:e,stack:Ju(e)}}var ui=[],ci=0,Go=null,Ml=0,ct=[],ft=0,vn=null,xt=1,At="";function Lt(t,e){ui[ci++]=Ml,ui[ci++]=Go,Go=t,Ml=e}function Om(t,e,n){ct[ft++]=xt,ct[ft++]=At,ct[ft++]=vn,vn=t;var i=xt;t=At;var l=32-lt(i)-1;i&=~(1<<l),n+=1;var o=32-lt(e)+l;if(30<o){var r=l-l%5;o=(i&(1<<r)-1).toString(32),i>>=r,l-=r,xt=1<<32-lt(e)+l|n<<l|i,At=o+t}else xt=1<<o|n<<l|i,At=t}function $r(t){t.return!==null&&(Lt(t,1),Om(t,1,0))}function Xr(t){for(;t===Go;)Go=ui[--ci],ui[ci]=null,Ml=ui[--ci],ui[ci]=null;for(;t===vn;)vn=ct[--ft],ct[ft]=null,At=ct[--ft],ct[ft]=null,xt=ct[--ft],ct[ft]=null}function Km(t,e){ct[ft++]=xt,ct[ft++]=At,ct[ft++]=vn,xt=e.id,At=e.overflow,vn=t}var Le=null,de=null,X=!1,cn=null,ht=!1,zs=Error(N(519));function Tn(t){var e=Error(N(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(mt(e,t)),zs}function fc(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ve]=t,e[$e]=i,n){case"dialog":O("cancel",e),O("close",e);break;case"iframe":case"object":case"embed":O("load",e);break;case"video":case"audio":for(n=0;n<bl.length;n++)O(bl[n],e);break;case"source":O("error",e);break;case"img":case"image":case"link":O("error",e),O("load",e);break;case"details":O("toggle",e);break;case"input":O("invalid",e),xm(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":O("invalid",e);break;case"textarea":O("invalid",e),_m(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||wp(e.textContent,n)?(i.popover!=null&&(O("beforetoggle",e),O("toggle",e)),i.onScroll!=null&&O("scroll",e),i.onScrollEnd!=null&&O("scrollend",e),i.onClick!=null&&(e.onclick=qt),e=!0):e=!1,e||Tn(t,!0)}function dc(t){for(Le=t.return;Le;)switch(Le.tag){case 5:case 31:case 13:ht=!1;return;case 27:case 3:ht=!0;return;default:Le=Le.return}}function $n(t){if(t!==Le)return!1;if(!X)return dc(t),X=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||fr(t.type,t.memoizedProps)),n=!n),n&&de&&Tn(t),dc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));de=Wc(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));de=Wc(t)}else e===27?(e=de,xn(t.type)?(t=pr,pr=null,de=t):de=e):de=Le?gt(t.stateNode.nextSibling):null;return!0}function Vn(){de=Le=null,X=!1}function $a(){var t=cn;return t!==null&&(Oe===null?Oe=t:Oe.push.apply(Oe,t),cn=null),t}function Nl(t){cn===null?cn=[t]:cn.push(t)}var Bs=Nt(null),Jn=null,Gt=null;function jt(t,e,n){ue(Bs,e._currentValue),e._currentValue=n}function Bt(t){t._currentValue=Bs.current,Ie(Bs)}function Ps(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Fs(t,e,n,i){var l=t.child;for(l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){var r=l.child;o=o.firstContext;e:for(;o!==null;){var u=o;o=l;for(var c=0;c<e.length;c++)if(u.context===e[c]){o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ps(o.return,n,t),i||(r=null);break e}o=u.next}}else if(l.tag===18){if(r=l.return,r===null)throw Error(N(341));r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Ps(r,n,t),r=null}else r=l.child;if(r!==null)r.return=l;else for(r=l;r!==null;){if(r===t){r=null;break}if(l=r.sibling,l!==null){l.return=r.return,r=l;break}r=r.return}l=r}}function qi(t,e,n,i){t=null;for(var l=e,o=!1;l!==null;){if(!o){if(l.flags&524288)o=!0;else if(l.flags&262144)break}if(l.tag===10){var r=l.alternate;if(r===null)throw Error(N(387));if(r=r.memoizedProps,r!==null){var u=l.type;at(l.pendingProps.value,r.value)||(t!==null?t.push(u):t=[u])}}else if(l===Io.current){if(r=l.alternate,r===null)throw Error(N(387));r.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(t!==null?t.push(Ul):t=[Ul])}l=l.return}t!==null&&Fs(e,t,n,i),e.flags|=262144}function zo(t){for(t=t.firstContext;t!==null;){if(!at(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ln(t){Jn=t,Gt=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ke(t){return $m(Jn,t)}function io(t,e){return Jn===null&&Ln(t),$m(t,e)}function $m(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Gt===null){if(t===null)throw Error(N(308));Gt=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Gt=Gt.next=e;return n}var y0=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},v0=we.unstable_scheduleCallback,T0=we.unstable_NormalPriority,xe={$$typeof:Ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qr(){return{controller:new y0,data:new Map,refCount:0}}function Pl(t){t.refCount--,t.refCount===0&&v0(T0,function(){t.controller.abort()})}var fl=null,Js=0,Mi=0,gi=null;function C0(t,e){if(fl===null){var n=fl=[];Js=0,Mi=Su(),gi={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Js++,e.then(mc,mc),e}function mc(){if(--Js===0&&fl!==null){gi!==null&&(gi.status="fulfilled");var t=fl;fl=null,Mi=0,gi=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function S0(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(l){n.push(l)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var l=0;l<n.length;l++)(0,n[l])(e)},function(l){for(i.status="rejected",i.reason=l,l=0;l<n.length;l++)(0,n[l])(void 0)}),i}var hc=q.S;q.S=function(t,e){rp=nt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&C0(t,e),hc!==null&&hc(t,e)};var bn=Nt(null);function Zr(){var t=bn.current;return t!==null?t:re.pooledCache}function Co(t,e){e===null?ue(bn,bn.current):ue(bn,e.pool)}function Xm(){var t=Zr();return t===null?null:{parent:xe._currentValue,pool:t}}var Gi=Error(N(460)),Wr=Error(N(474)),Ca=Error(N(542)),Bo={then:function(){}};function pc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qm(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(qt,qt),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,yc(t),t;default:if(typeof e.status=="string")e.then(qt,qt);else{if(t=re,t!==null&&100<t.shellSuspendCounter)throw Error(N(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var l=e;l.status="fulfilled",l.value=i}},function(i){if(e.status==="pending"){var l=e;l.status="rejected",l.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,yc(t),t}throw In=e,Gi}}function Nn(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(In=n,Gi):n}}var In=null;function gc(){if(In===null)throw Error(N(459));var t=In;return In=null,t}function yc(t){if(t===Gi||t===Ca)throw Error(N(483))}var yi=null,Rl=0;function lo(t){var e=Rl;return Rl+=1,yi===null&&(yi=[]),Qm(yi,t,e)}function Zi(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function oo(t,e){throw e.$$typeof===sy?Error(N(525)):(t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Zm(t){function e(v,y){if(t){var T=v.deletions;T===null?(v.deletions=[y],v.flags|=16):T.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v){for(var y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function l(v,y){return v=zt(v,y),v.index=0,v.sibling=null,v}function o(v,y,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<y?(v.flags|=67108866,y):T):(v.flags|=67108866,y)):(v.flags|=1048576,y)}function r(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function u(v,y,T,E){return y===null||y.tag!==6?(y=Oa(T,v.mode,E),y.return=v,y):(y=l(y,T),y.return=v,y)}function c(v,y,T,E){var M=T.type;return M===ei?d(v,y,T.props.children,E,T.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zt&&Nn(M)===y.type)?(y=l(y,T.props),Zi(y,T),y.return=v,y):(y=To(T.type,T.key,T.props,null,v.mode,E),Zi(y,T),y.return=v,y)}function f(v,y,T,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=Ka(T,v.mode,E),y.return=v,y):(y=l(y,T.children||[]),y.return=v,y)}function d(v,y,T,E,M){return y===null||y.tag!==7?(y=Dn(T,v.mode,E,M),y.return=v,y):(y=l(y,T),y.return=v,y)}function m(v,y,T){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Oa(""+y,v.mode,T),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zl:return T=To(y.type,y.key,y.props,null,v.mode,T),Zi(T,y),T.return=v,T;case nl:return y=Ka(y,v.mode,T),y.return=v,y;case Zt:return y=Nn(y),m(v,y,T)}if(il(y)||$i(y))return y=Dn(y,v.mode,T,null),y.return=v,y;if(typeof y.then=="function")return m(v,lo(y),T);if(y.$$typeof===Ht)return m(v,io(v,y),T);oo(v,y)}return null}function h(v,y,T,E){var M=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return M!==null?null:u(v,y,""+T,E);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Zl:return T.key===M?c(v,y,T,E):null;case nl:return T.key===M?f(v,y,T,E):null;case Zt:return T=Nn(T),h(v,y,T,E)}if(il(T)||$i(T))return M!==null?null:d(v,y,T,E,null);if(typeof T.then=="function")return h(v,y,lo(T),E);if(T.$$typeof===Ht)return h(v,y,io(v,T),E);oo(v,T)}return null}function g(v,y,T,E,M){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return v=v.get(T)||null,u(y,v,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zl:return v=v.get(E.key===null?T:E.key)||null,c(y,v,E,M);case nl:return v=v.get(E.key===null?T:E.key)||null,f(y,v,E,M);case Zt:return E=Nn(E),g(v,y,T,E,M)}if(il(E)||$i(E))return v=v.get(T)||null,d(y,v,E,M,null);if(typeof E.then=="function")return g(v,y,T,lo(E),M);if(E.$$typeof===Ht)return g(v,y,T,io(y,E),M);oo(y,E)}return null}function C(v,y,T,E){for(var M=null,_=null,x=y,b=y=0,D=null;x!==null&&b<T.length;b++){x.index>b?(D=x,x=null):D=x.sibling;var I=h(v,x,T[b],E);if(I===null){x===null&&(x=D);break}t&&x&&I.alternate===null&&e(v,x),y=o(I,y,b),_===null?M=I:_.sibling=I,_=I,x=D}if(b===T.length)return n(v,x),X&&Lt(v,b),M;if(x===null){for(;b<T.length;b++)x=m(v,T[b],E),x!==null&&(y=o(x,y,b),_===null?M=x:_.sibling=x,_=x);return X&&Lt(v,b),M}for(x=i(x);b<T.length;b++)D=g(x,v,b,T[b],E),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?b:D.key),y=o(D,y,b),_===null?M=D:_.sibling=D,_=D);return t&&x.forEach(function(J){return e(v,J)}),X&&Lt(v,b),M}function S(v,y,T,E){if(T==null)throw Error(N(151));for(var M=null,_=null,x=y,b=y=0,D=null,I=T.next();x!==null&&!I.done;b++,I=T.next()){x.index>b?(D=x,x=null):D=x.sibling;var J=h(v,x,I.value,E);if(J===null){x===null&&(x=D);break}t&&x&&J.alternate===null&&e(v,x),y=o(J,y,b),_===null?M=J:_.sibling=J,_=J,x=D}if(I.done)return n(v,x),X&&Lt(v,b),M;if(x===null){for(;!I.done;b++,I=T.next())I=m(v,I.value,E),I!==null&&(y=o(I,y,b),_===null?M=I:_.sibling=I,_=I);return X&&Lt(v,b),M}for(x=i(x);!I.done;b++,I=T.next())I=g(x,v,b,I.value,E),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?b:I.key),y=o(I,y,b),_===null?M=I:_.sibling=I,_=I);return t&&x.forEach(function(V){return e(v,V)}),X&&Lt(v,b),M}function A(v,y,T,E){if(typeof T=="object"&&T!==null&&T.type===ei&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Zl:e:{for(var M=T.key;y!==null;){if(y.key===M){if(M=T.type,M===ei){if(y.tag===7){n(v,y.sibling),E=l(y,T.props.children),E.return=v,v=E;break e}}else if(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zt&&Nn(M)===y.type){n(v,y.sibling),E=l(y,T.props),Zi(E,T),E.return=v,v=E;break e}n(v,y);break}else e(v,y);y=y.sibling}T.type===ei?(E=Dn(T.props.children,v.mode,E,T.key),E.return=v,v=E):(E=To(T.type,T.key,T.props,null,v.mode,E),Zi(E,T),E.return=v,v=E)}return r(v);case nl:e:{for(M=T.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(v,y.sibling),E=l(y,T.children||[]),E.return=v,v=E;break e}else{n(v,y);break}else e(v,y);y=y.sibling}E=Ka(T,v.mode,E),E.return=v,v=E}return r(v);case Zt:return T=Nn(T),A(v,y,T,E)}if(il(T))return C(v,y,T,E);if($i(T)){if(M=$i(T),typeof M!="function")throw Error(N(150));return T=M.call(T),S(v,y,T,E)}if(typeof T.then=="function")return A(v,y,lo(T),E);if(T.$$typeof===Ht)return A(v,y,io(v,T),E);oo(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,y!==null&&y.tag===6?(n(v,y.sibling),E=l(y,T),E.return=v,v=E):(n(v,y),E=Oa(T,v.mode,E),E.return=v,v=E),r(v)):n(v,y)}return function(v,y,T,E){try{Rl=0;var M=A(v,y,T,E);return yi=null,M}catch(x){if(x===Gi||x===Ca)throw x;var _=et(29,x,null,v.mode);return _.lanes=E,_.return=v,_}finally{}}}var kn=Zm(!0),Wm=Zm(!1),Wt=!1;function jr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ys(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function dn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,j&2){var l=i.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),i.pending=e,e=qo(t),Fm(t,null,n),e}return Ta(t,i,e,n),qo(t)}function dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gm(t,n)}}function Xa(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?l=o=r:o=o.next=r,n=n.next}while(n!==null);o===null?l=o=e:o=o.next=e}else l=o=e;n={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Os=!1;function ml(){if(Os){var t=gi;if(t!==null)throw t}}function hl(t,e,n,i){Os=!1;var l=t.updateQueue;Wt=!1;var o=l.firstBaseUpdate,r=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var c=u,f=c.next;c.next=null,r===null?o=f:r.next=f,r=c;var d=t.alternate;d!==null&&(d=d.updateQueue,u=d.lastBaseUpdate,u!==r&&(u===null?d.firstBaseUpdate=f:u.next=f,d.lastBaseUpdate=c))}if(o!==null){var m=l.baseState;r=0,d=f=c=null,u=o;do{var h=u.lane&-536870913,g=h!==u.lane;if(g?($&h)===h:(i&h)===h){h!==0&&h===Mi&&(Os=!0),d!==null&&(d=d.next={lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});e:{var C=t,S=u;h=e;var A=n;switch(S.tag){case 1:if(C=S.payload,typeof C=="function"){m=C.call(A,m,h);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=S.payload,h=typeof C=="function"?C.call(A,m,h):C,h==null)break e;m=he({},m,h);break e;case 2:Wt=!0}}h=u.callback,h!==null&&(t.flags|=64,g&&(t.flags|=8192),g=l.callbacks,g===null?l.callbacks=[h]:g.push(h))}else g={lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},d===null?(f=d=g,c=m):d=d.next=g,r|=h;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;g=u,u=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(!0);d===null&&(c=m),l.baseState=c,l.firstBaseUpdate=f,l.lastBaseUpdate=d,o===null&&(l.shared.lanes=0),Sn|=r,t.lanes=r,t.memoizedState=m}}function jm(t,e){if(typeof t!="function")throw Error(N(191,t));t.call(e)}function eh(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)jm(n[t],e)}var Ni=Nt(null),Po=Nt(0);function vc(t,e){t=Kt,ue(Po,t),ue(Ni,e),Kt=t|e.baseLanes}function Ks(){ue(Po,Kt),ue(Ni,Ni.current)}function eu(){Kt=Po.current,Ie(Ni),Ie(Po)}var st=Nt(null),pt=null;function en(t){var e=t.alternate;ue(Te,Te.current&1),ue(st,t),pt===null&&(e===null||Ni.current!==null||e.memoizedState!==null)&&(pt=t)}function $s(t){ue(Te,Te.current),ue(st,t),pt===null&&(pt=t)}function th(t){t.tag===22?(ue(Te,Te.current),ue(st,t),pt===null&&(pt=t)):tn()}function tn(){ue(Te,Te.current),ue(st,st.current)}function je(t){Ie(st),pt===t&&(pt=null),Ie(Te)}var Te=Nt(0);function Fo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||mr(n)||hr(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jt=0,B=null,se=null,Se=null,Jo=!1,vi=!1,Hn=!1,Yo=0,wl=0,Ti=null,E0=0;function ge(){throw Error(N(321))}function tu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!at(t[n],e[n]))return!1;return!0}function nu(t,e,n,i,l,o){return Jt=o,B=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,q.H=t===null||t.memoizedState===null?Ih:mu,Hn=!1,o=n(i,l),Hn=!1,vi&&(o=ih(e,n,i,l)),nh(t),o}function nh(t){q.H=Dl;var e=se!==null&&se.next!==null;if(Jt=0,Se=se=B=null,Jo=!1,wl=0,Ti=null,e)throw Error(N(300));t===null||_e||(t=t.dependencies,t!==null&&zo(t)&&(_e=!0))}function ih(t,e,n,i){B=t;var l=0;do{if(vi&&(Ti=null),wl=0,vi=!1,25<=l)throw Error(N(301));if(l+=1,Se=se=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}q.H=Uh,o=e(n,i)}while(vi);return o}function x0(){var t=q.H,e=t.useState()[0];return e=typeof e.then=="function"?Fl(e):e,t=t.useState()[0],(se!==null?se.memoizedState:null)!==t&&(B.flags|=1024),e}function iu(){var t=Yo!==0;return Yo=0,t}function lu(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ou(t){if(Jo){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Jo=!1}Jt=0,Se=se=B=null,vi=!1,wl=Yo=0,Ti=null}function ze(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?B.memoizedState=Se=t:Se=Se.next=t,Se}function Ce(){if(se===null){var t=B.alternate;t=t!==null?t.memoizedState:null}else t=se.next;var e=Se===null?B.memoizedState:Se.next;if(e!==null)Se=e,se=t;else{if(t===null)throw B.alternate===null?Error(N(467)):Error(N(310));se=t,t={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Se===null?B.memoizedState=Se=t:Se=Se.next=t}return Se}function Sa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(t){var e=wl;return wl+=1,Ti===null&&(Ti=[]),t=Qm(Ti,t,e),e=B,(Se===null?e.memoizedState:Se.next)===null&&(e=e.alternate,q.H=e===null||e.memoizedState===null?Ih:mu),t}function Ea(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Fl(t);if(t.$$typeof===Ht)return ke(t)}throw Error(N(438,String(t)))}function au(t){var e=null,n=B.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=B.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(l){return l.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Sa(),B.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=ry;return e.index++,n}function Yt(t,e){return typeof e=="function"?e(t):e}function So(t){var e=Ce();return su(e,se,t)}function su(t,e,n){var i=t.queue;if(i===null)throw Error(N(311));i.lastRenderedReducer=n;var l=t.baseQueue,o=i.pending;if(o!==null){if(l!==null){var r=l.next;l.next=o.next,o.next=r}e.baseQueue=l=o,i.pending=null}if(o=t.baseState,l===null)t.memoizedState=o;else{e=l.next;var u=r=null,c=null,f=e,d=!1;do{var m=f.lane&-536870913;if(m!==f.lane?($&m)===m:(Jt&m)===m){var h=f.revertLane;if(h===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),m===Mi&&(d=!0);else if((Jt&h)===h){f=f.next,h===Mi&&(d=!0);continue}else m={lane:0,revertLane:f.revertLane,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},c===null?(u=c=m,r=o):c=c.next=m,B.lanes|=h,Sn|=h;m=f.action,Hn&&n(o,m),o=f.hasEagerState?f.eagerState:n(o,m)}else h={lane:m,revertLane:f.revertLane,gesture:f.gesture,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},c===null?(u=c=h,r=o):c=c.next=h,B.lanes|=m,Sn|=m;f=f.next}while(f!==null&&f!==e);if(c===null?r=o:c.next=u,!at(o,t.memoizedState)&&(_e=!0,d&&(n=gi,n!==null)))throw n;t.memoizedState=o,t.baseState=r,t.baseQueue=c,i.lastRenderedState=o}return l===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Qa(t){var e=Ce(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var i=n.dispatch,l=n.pending,o=e.memoizedState;if(l!==null){n.pending=null;var r=l=l.next;do o=t(o,r.action),r=r.next;while(r!==l);at(o,e.memoizedState)||(_e=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function lh(t,e,n){var i=B,l=Ce(),o=X;if(o){if(n===void 0)throw Error(N(407));n=n()}else n=e();var r=!at((se||l).memoizedState,n);if(r&&(l.memoizedState=n,_e=!0),l=l.queue,ru(sh.bind(null,i,l,t),[t]),l.getSnapshot!==e||r||Se!==null&&Se.memoizedState.tag&1){if(i.flags|=2048,Ri(9,{destroy:void 0},ah.bind(null,i,l,n,e),null),re===null)throw Error(N(349));o||Jt&127||oh(i,e,n)}return n}function oh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=B.updateQueue,e===null?(e=Sa(),B.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ah(t,e,n,i){e.value=n,e.getSnapshot=i,rh(e)&&uh(t)}function sh(t,e,n){return n(function(){rh(e)&&uh(t)})}function rh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!at(t,n)}catch{return!0}}function uh(t){var e=Fn(t,2);e!==null&&Ke(e,t,2)}function Xs(t){var e=ze();if(typeof t=="function"){var n=t;if(t=n(),Hn){ln(!0);try{n()}finally{ln(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:t},e}function ch(t,e,n,i){return t.baseState=n,su(t,se,typeof i=="function"?i:Yt)}function A0(t,e,n,i,l){if(Aa(t))throw Error(N(485));if(t=e.action,t!==null){var o={payload:l,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){o.listeners.push(r)}};q.T!==null?n(!0):o.isTransition=!1,i(o),n=e.pending,n===null?(o.next=e.pending=o,fh(e,o)):(o.next=n.next,e.pending=n.next=o)}}function fh(t,e){var n=e.action,i=e.payload,l=t.state;if(e.isTransition){var o=q.T,r={};q.T=r;try{var u=n(l,i),c=q.S;c!==null&&c(r,u),Tc(t,e,u)}catch(f){Qs(t,e,f)}finally{o!==null&&r.types!==null&&(o.types=r.types),q.T=o}}else try{o=n(l,i),Tc(t,e,o)}catch(f){Qs(t,e,f)}}function Tc(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Cc(t,e,i)},function(i){return Qs(t,e,i)}):Cc(t,e,n)}function Cc(t,e,n){e.status="fulfilled",e.value=n,dh(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,fh(t,n)))}function Qs(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,dh(e),e=e.next;while(e!==i)}t.action=null}function dh(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function mh(t,e){return e}function Sc(t,e){if(X){var n=re.formState;if(n!==null){e:{var i=B;if(X){if(de){t:{for(var l=de,o=ht;l.nodeType!==8;){if(!o){l=null;break t}if(l=gt(l.nextSibling),l===null){l=null;break t}}o=l.data,l=o==="F!"||o==="F"?l:null}if(l){de=gt(l.nextSibling),i=l.data==="F!";break e}}Tn(i)}i=!1}i&&(e=n[0])}}return n=ze(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:e},n.queue=i,n=wh.bind(null,B,i),i.dispatch=n,i=Xs(!1),o=du.bind(null,B,!1,i.queue),i=ze(),l={state:e,dispatch:null,action:t,pending:null},i.queue=l,n=A0.bind(null,B,l,o,n),l.dispatch=n,i.memoizedState=t,[e,n,!1]}function Ec(t){var e=Ce();return hh(e,se,t)}function hh(t,e,n){if(e=su(t,e,mh)[0],t=So(Yt)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Fl(e)}catch(r){throw r===Gi?Ca:r}else i=e;e=Ce();var l=e.queue,o=l.dispatch;return n!==e.memoizedState&&(B.flags|=2048,Ri(9,{destroy:void 0},_0.bind(null,l,n),null)),[i,o,t]}function _0(t,e){t.action=e}function xc(t){var e=Ce(),n=se;if(n!==null)return hh(e,n,t);Ce(),e=e.memoizedState,n=Ce();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Ri(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=B.updateQueue,e===null&&(e=Sa(),B.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function ph(){return Ce().memoizedState}function Eo(t,e,n,i){var l=ze();B.flags|=t,l.memoizedState=Ri(1|e,{destroy:void 0},n,i===void 0?null:i)}function xa(t,e,n,i){var l=Ce();i=i===void 0?null:i;var o=l.memoizedState.inst;se!==null&&i!==null&&tu(i,se.memoizedState.deps)?l.memoizedState=Ri(e,o,n,i):(B.flags|=t,l.memoizedState=Ri(1|e,o,n,i))}function Ac(t,e){Eo(8390656,8,t,e)}function ru(t,e){xa(2048,8,t,e)}function M0(t){B.flags|=4;var e=B.updateQueue;if(e===null)e=Sa(),B.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function gh(t){var e=Ce().memoizedState;return M0({ref:e,nextImpl:t}),function(){if(j&2)throw Error(N(440));return e.impl.apply(void 0,arguments)}}function yh(t,e){return xa(4,2,t,e)}function vh(t,e){return xa(4,4,t,e)}function Th(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ch(t,e,n){n=n!=null?n.concat([t]):null,xa(4,4,Th.bind(null,e,t),n)}function uu(){}function Sh(t,e){var n=Ce();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&tu(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Eh(t,e){var n=Ce();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&tu(e,i[1]))return i[0];if(i=t(),Hn){ln(!0);try{t()}finally{ln(!1)}}return n.memoizedState=[i,e],i}function cu(t,e,n){return n===void 0||Jt&1073741824&&!($&261930)?t.memoizedState=e:(t.memoizedState=n,t=cp(),B.lanes|=t,Sn|=t,n)}function xh(t,e,n,i){return at(n,e)?n:Ni.current!==null?(t=cu(t,n,i),at(t,e)||(_e=!0),t):!(Jt&42)||Jt&1073741824&&!($&261930)?(_e=!0,t.memoizedState=n):(t=cp(),B.lanes|=t,Sn|=t,e)}function Ah(t,e,n,i,l){var o=ee.p;ee.p=o!==0&&8>o?o:8;var r=q.T,u={};q.T=u,du(t,!1,e,n);try{var c=l(),f=q.S;if(f!==null&&f(u,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=S0(c,i);pl(t,e,d,ot(t))}else pl(t,e,i,ot(t))}catch(m){pl(t,e,{then:function(){},status:"rejected",reason:m},ot())}finally{ee.p=o,r!==null&&u.types!==null&&(r.types=u.types),q.T=r}}function N0(){}function Zs(t,e,n,i){if(t.tag!==5)throw Error(N(476));var l=_h(t).queue;Ah(t,l,e,wn,n===null?N0:function(){return Mh(t),n(i)})}function _h(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:wn,baseState:wn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:wn},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Mh(t){var e=_h(t);e.next===null&&(e=t.alternate.memoizedState),pl(t,e.next.queue,{},ot())}function fu(){return ke(Ul)}function Nh(){return Ce().memoizedState}function Rh(){return Ce().memoizedState}function R0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ot();t=fn(n);var i=dn(e,t,n);i!==null&&(Ke(i,e,n),dl(i,e,n)),e={cache:Qr()},t.payload=e;return}e=e.return}}function w0(t,e,n){var i=ot();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Aa(t)?Dh(e,n):(n=Or(t,e,n,i),n!==null&&(Ke(n,t,i),bh(n,e,i)))}function wh(t,e,n){var i=ot();pl(t,e,n,i)}function pl(t,e,n,i){var l={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Aa(t))Dh(e,l);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var r=e.lastRenderedState,u=o(r,n);if(l.hasEagerState=!0,l.eagerState=u,at(u,r))return Ta(t,e,l,0),re===null&&va(),!1}catch{}finally{}if(n=Or(t,e,l,i),n!==null)return Ke(n,t,i),bh(n,e,i),!0}return!1}function du(t,e,n,i){if(i={lane:2,revertLane:Su(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Aa(t)){if(e)throw Error(N(479))}else e=Or(t,n,i,2),e!==null&&Ke(e,t,2)}function Aa(t){var e=t.alternate;return t===B||e!==null&&e===B}function Dh(t,e){vi=Jo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bh(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gm(t,n)}}var Dl={readContext:ke,use:Ea,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};Dl.useEffectEvent=ge;var Ih={readContext:ke,use:Ea,useCallback:function(t,e){return ze().memoizedState=[t,e===void 0?null:e],t},useContext:ke,useEffect:Ac,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Eo(4194308,4,Th.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Eo(4194308,4,t,e)},useInsertionEffect:function(t,e){Eo(4,2,t,e)},useMemo:function(t,e){var n=ze();e=e===void 0?null:e;var i=t();if(Hn){ln(!0);try{t()}finally{ln(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=ze();if(n!==void 0){var l=n(e);if(Hn){ln(!0);try{n(e)}finally{ln(!1)}}}else l=e;return i.memoizedState=i.baseState=l,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:l},i.queue=t,t=t.dispatch=w0.bind(null,B,t),[i.memoizedState,t]},useRef:function(t){var e=ze();return t={current:t},e.memoizedState=t},useState:function(t){t=Xs(t);var e=t.queue,n=wh.bind(null,B,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:uu,useDeferredValue:function(t,e){var n=ze();return cu(n,t,e)},useTransition:function(){var t=Xs(!1);return t=Ah.bind(null,B,t.queue,!0,!1),ze().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=B,l=ze();if(X){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),re===null)throw Error(N(349));$&127||oh(i,e,n)}l.memoizedState=n;var o={value:n,getSnapshot:e};return l.queue=o,Ac(sh.bind(null,i,o,t),[t]),i.flags|=2048,Ri(9,{destroy:void 0},ah.bind(null,i,o,n,e),null),n},useId:function(){var t=ze(),e=re.identifierPrefix;if(X){var n=At,i=xt;n=(i&~(1<<32-lt(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Yo++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=E0++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:fu,useFormState:Sc,useActionState:Sc,useOptimistic:function(t){var e=ze();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=du.bind(null,B,!0,n),n.dispatch=e,[t,e]},useMemoCache:au,useCacheRefresh:function(){return ze().memoizedState=R0.bind(null,B)},useEffectEvent:function(t){var e=ze(),n={impl:t};return e.memoizedState=n,function(){if(j&2)throw Error(N(440));return n.impl.apply(void 0,arguments)}}},mu={readContext:ke,use:Ea,useCallback:Sh,useContext:ke,useEffect:ru,useImperativeHandle:Ch,useInsertionEffect:yh,useLayoutEffect:vh,useMemo:Eh,useReducer:So,useRef:ph,useState:function(){return So(Yt)},useDebugValue:uu,useDeferredValue:function(t,e){var n=Ce();return xh(n,se.memoizedState,t,e)},useTransition:function(){var t=So(Yt)[0],e=Ce().memoizedState;return[typeof t=="boolean"?t:Fl(t),e]},useSyncExternalStore:lh,useId:Nh,useHostTransitionStatus:fu,useFormState:Ec,useActionState:Ec,useOptimistic:function(t,e){var n=Ce();return ch(n,se,t,e)},useMemoCache:au,useCacheRefresh:Rh};mu.useEffectEvent=gh;var Uh={readContext:ke,use:Ea,useCallback:Sh,useContext:ke,useEffect:ru,useImperativeHandle:Ch,useInsertionEffect:yh,useLayoutEffect:vh,useMemo:Eh,useReducer:Qa,useRef:ph,useState:function(){return Qa(Yt)},useDebugValue:uu,useDeferredValue:function(t,e){var n=Ce();return se===null?cu(n,t,e):xh(n,se.memoizedState,t,e)},useTransition:function(){var t=Qa(Yt)[0],e=Ce().memoizedState;return[typeof t=="boolean"?t:Fl(t),e]},useSyncExternalStore:lh,useId:Nh,useHostTransitionStatus:fu,useFormState:xc,useActionState:xc,useOptimistic:function(t,e){var n=Ce();return se!==null?ch(n,se,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:au,useCacheRefresh:Rh};Uh.useEffectEvent=gh;function Za(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ws={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ot(),l=fn(i);l.payload=e,n!=null&&(l.callback=n),e=dn(t,l,i),e!==null&&(Ke(e,t,i),dl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ot(),l=fn(i);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=dn(t,l,i),e!==null&&(Ke(e,t,i),dl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),i=fn(n);i.tag=2,e!=null&&(i.callback=e),e=dn(t,i,n),e!==null&&(Ke(e,t,n),dl(e,t,n))}};function _c(t,e,n,i,l,o,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,r):e.prototype&&e.prototype.isPureReactComponent?!_l(n,i)||!_l(l,o):!0}function Mc(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ws.enqueueReplaceState(e,e.state,null)}function qn(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=he({},n));for(var l in t)n[l]===void 0&&(n[l]=t[l])}return n}function Vh(t){Ho(t)}function Lh(t){console.error(t)}function kh(t){Ho(t)}function Oo(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Nc(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function js(t,e,n){return n=fn(n),n.tag=3,n.payload={element:null},n.callback=function(){Oo(t,e)},n}function Hh(t){return t=fn(t),t.tag=3,t}function qh(t,e,n,i){var l=n.type.getDerivedStateFromError;if(typeof l=="function"){var o=i.value;t.payload=function(){return l(o)},t.callback=function(){Nc(e,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Nc(e,n,i),typeof l!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var u=i.stack;this.componentDidCatch(i.value,{componentStack:u!==null?u:""})})}function D0(t,e,n,i,l){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&qi(e,n,l,!0),n=st.current,n!==null){switch(n.tag){case 31:case 13:return pt===null?Zo():n.alternate===null&&ye===0&&(ye=3),n.flags&=-257,n.flags|=65536,n.lanes=l,i===Bo?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),rs(t,i,l)),!1;case 22:return n.flags|=65536,i===Bo?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),rs(t,i,l)),!1}throw Error(N(435,n.tag))}return rs(t,i,l),Zo(),!1}if(X)return e=st.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=l,i!==zs&&(t=Error(N(422),{cause:i}),Nl(mt(t,n)))):(i!==zs&&(e=Error(N(423),{cause:i}),Nl(mt(e,n))),t=t.current.alternate,t.flags|=65536,l&=-l,t.lanes|=l,i=mt(i,n),l=js(t.stateNode,i,l),Xa(t,l),ye!==4&&(ye=2)),!1;var o=Error(N(520),{cause:i});if(o=mt(o,n),vl===null?vl=[o]:vl.push(o),ye!==4&&(ye=2),e===null)return!0;i=mt(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=l&-l,n.lanes|=t,t=js(n.stateNode,i,t),Xa(n,t),!1;case 1:if(e=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(mn===null||!mn.has(o))))return n.flags|=65536,l&=-l,n.lanes|=l,l=Hh(l),qh(l,t,n,i),Xa(n,l),!1}n=n.return}while(n!==null);return!1}var hu=Error(N(461)),_e=!1;function Ue(t,e,n,i){e.child=t===null?Wm(e,null,n,i):kn(e,t.child,n,i)}function Rc(t,e,n,i,l){n=n.render;var o=e.ref;if("ref"in i){var r={};for(var u in i)u!=="ref"&&(r[u]=i[u])}else r=i;return Ln(e),i=nu(t,e,n,r,o,l),u=iu(),t!==null&&!_e?(lu(t,e,l),Ot(t,e,l)):(X&&u&&$r(e),e.flags|=1,Ue(t,e,i,l),e.child)}function wc(t,e,n,i,l){if(t===null){var o=n.type;return typeof o=="function"&&!Kr(o)&&o.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=o,Gh(t,e,o,i,l)):(t=To(n.type,null,i,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!pu(t,l)){var r=o.memoizedProps;if(n=n.compare,n=n!==null?n:_l,n(r,i)&&t.ref===e.ref)return Ot(t,e,l)}return e.flags|=1,t=zt(o,i),t.ref=e.ref,t.return=e,e.child=t}function Gh(t,e,n,i,l){if(t!==null){var o=t.memoizedProps;if(_l(o,i)&&t.ref===e.ref)if(_e=!1,e.pendingProps=i=o,pu(t,l))t.flags&131072&&(_e=!0);else return e.lanes=t.lanes,Ot(t,e,l)}return er(t,e,n,i,l)}function zh(t,e,n,i){var l=i.children,o=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(o=o!==null?o.baseLanes|n:n,t!==null){for(i=e.child=t.child,l=0;i!==null;)l=l|i.lanes|i.childLanes,i=i.sibling;i=l&~o}else i=0,e.child=null;return Dc(t,e,o,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Co(e,o!==null?o.cachePool:null),o!==null?vc(e,o):Ks(),th(e);else return i=e.lanes=536870912,Dc(t,e,o!==null?o.baseLanes|n:n,n,i)}else o!==null?(Co(e,o.cachePool),vc(e,o),tn(),e.memoizedState=null):(t!==null&&Co(e,null),Ks(),tn());return Ue(t,e,l,n),e.child}function ol(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Dc(t,e,n,i,l){var o=Zr();return o=o===null?null:{parent:xe._currentValue,pool:o},e.memoizedState={baseLanes:n,cachePool:o},t!==null&&Co(e,null),Ks(),th(e),t!==null&&qi(t,e,i,!0),e.childLanes=l,null}function xo(t,e){return e=Ko({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function bc(t,e,n){return kn(e,t.child,null,n),t=xo(e,e.pendingProps),t.flags|=2,je(e),e.memoizedState=null,t}function b0(t,e,n){var i=e.pendingProps,l=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(X){if(i.mode==="hidden")return t=xo(e,i),e.lanes=536870912,ol(null,t);if($s(e),(t=de)?(t=Ip(t,ht),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vn!==null?{id:xt,overflow:At}:null,retryLane:536870912,hydrationErrors:null},n=Ym(t),n.return=e,e.child=n,Le=e,de=null)):t=null,t===null)throw Tn(e);return e.lanes=536870912,null}return xo(e,i)}var o=t.memoizedState;if(o!==null){var r=o.dehydrated;if($s(e),l)if(e.flags&256)e.flags&=-257,e=bc(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(N(558));else if(_e||qi(t,e,n,!1),l=(n&t.childLanes)!==0,_e||l){if(i=re,i!==null&&(r=ym(i,n),r!==0&&r!==o.retryLane))throw o.retryLane=r,Fn(t,r),Ke(i,t,r),hu;Zo(),e=bc(t,e,n)}else t=o.treeContext,de=gt(r.nextSibling),Le=e,X=!0,cn=null,ht=!1,t!==null&&Km(e,t),e=xo(e,i),e.flags|=4096;return e}return t=zt(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Ao(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(N(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function er(t,e,n,i,l){return Ln(e),n=nu(t,e,n,i,void 0,l),i=iu(),t!==null&&!_e?(lu(t,e,l),Ot(t,e,l)):(X&&i&&$r(e),e.flags|=1,Ue(t,e,n,l),e.child)}function Ic(t,e,n,i,l,o){return Ln(e),e.updateQueue=null,n=ih(e,i,n,l),nh(t),i=iu(),t!==null&&!_e?(lu(t,e,o),Ot(t,e,o)):(X&&i&&$r(e),e.flags|=1,Ue(t,e,n,o),e.child)}function Uc(t,e,n,i,l){if(Ln(e),e.stateNode===null){var o=ri,r=n.contextType;typeof r=="object"&&r!==null&&(o=ke(r)),o=new n(i,o),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ws,e.stateNode=o,o._reactInternals=e,o=e.stateNode,o.props=i,o.state=e.memoizedState,o.refs={},jr(e),r=n.contextType,o.context=typeof r=="object"&&r!==null?ke(r):ri,o.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Za(e,n,r,i),o.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(r=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),r!==o.state&&Ws.enqueueReplaceState(o,o.state,null),hl(e,i,o,l),ml(),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){o=e.stateNode;var u=e.memoizedProps,c=qn(n,u);o.props=c;var f=o.context,d=n.contextType;r=ri,typeof d=="object"&&d!==null&&(r=ke(d));var m=n.getDerivedStateFromProps;d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function",u=e.pendingProps!==u,d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u||f!==r)&&Mc(e,o,i,r),Wt=!1;var h=e.memoizedState;o.state=h,hl(e,i,o,l),ml(),f=e.memoizedState,u||h!==f||Wt?(typeof m=="function"&&(Za(e,n,m,i),f=e.memoizedState),(c=Wt||_c(e,n,c,i,h,f,r))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),o.props=i,o.state=f,o.context=r,i=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ys(t,e),r=e.memoizedProps,d=qn(n,r),o.props=d,m=e.pendingProps,h=o.context,f=n.contextType,c=ri,typeof f=="object"&&f!==null&&(c=ke(f)),u=n.getDerivedStateFromProps,(f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(r!==m||h!==c)&&Mc(e,o,i,c),Wt=!1,h=e.memoizedState,o.state=h,hl(e,i,o,l),ml();var g=e.memoizedState;r!==m||h!==g||Wt||t!==null&&t.dependencies!==null&&zo(t.dependencies)?(typeof u=="function"&&(Za(e,n,u,i),g=e.memoizedState),(d=Wt||_c(e,n,d,i,h,g,c)||t!==null&&t.dependencies!==null&&zo(t.dependencies))?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=c,i=d):(typeof o.componentDidUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return o=i,Ao(t,e),i=(e.flags&128)!==0,o||i?(o=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:o.render(),e.flags|=1,t!==null&&i?(e.child=kn(e,t.child,null,l),e.child=kn(e,null,n,l)):Ue(t,e,n,l),e.memoizedState=o.state,t=e.child):t=Ot(t,e,l),t}function Vc(t,e,n,i){return Vn(),e.flags|=256,Ue(t,e,n,i),e.child}var Wa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ja(t){return{baseLanes:t,cachePool:Xm()}}function es(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=tt),t}function Bh(t,e,n){var i=e.pendingProps,l=!1,o=(e.flags&128)!==0,r;if((r=o)||(r=t!==null&&t.memoizedState===null?!1:(Te.current&2)!==0),r&&(l=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(X){if(l?en(e):tn(),(t=de)?(t=Ip(t,ht),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:vn!==null?{id:xt,overflow:At}:null,retryLane:536870912,hydrationErrors:null},n=Ym(t),n.return=e,e.child=n,Le=e,de=null)):t=null,t===null)throw Tn(e);return hr(t)?e.lanes=32:e.lanes=536870912,null}var u=i.children;return i=i.fallback,l?(tn(),l=e.mode,u=Ko({mode:"hidden",children:u},l),i=Dn(i,l,n,null),u.return=e,i.return=e,u.sibling=i,e.child=u,i=e.child,i.memoizedState=ja(n),i.childLanes=es(t,r,n),e.memoizedState=Wa,ol(null,i)):(en(e),tr(e,u))}var c=t.memoizedState;if(c!==null&&(u=c.dehydrated,u!==null)){if(o)e.flags&256?(en(e),e.flags&=-257,e=ts(t,e,n)):e.memoizedState!==null?(tn(),e.child=t.child,e.flags|=128,e=null):(tn(),u=i.fallback,l=e.mode,i=Ko({mode:"visible",children:i.children},l),u=Dn(u,l,n,null),u.flags|=2,i.return=e,u.return=e,i.sibling=u,e.child=i,kn(e,t.child,null,n),i=e.child,i.memoizedState=ja(n),i.childLanes=es(t,r,n),e.memoizedState=Wa,e=ol(null,i));else if(en(e),hr(u)){if(r=u.nextSibling&&u.nextSibling.dataset,r)var f=r.dgst;r=f,i=Error(N(419)),i.stack="",i.digest=r,Nl({value:i,source:null,stack:null}),e=ts(t,e,n)}else if(_e||qi(t,e,n,!1),r=(n&t.childLanes)!==0,_e||r){if(r=re,r!==null&&(i=ym(r,n),i!==0&&i!==c.retryLane))throw c.retryLane=i,Fn(t,i),Ke(r,t,i),hu;mr(u)||Zo(),e=ts(t,e,n)}else mr(u)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,de=gt(u.nextSibling),Le=e,X=!0,cn=null,ht=!1,t!==null&&Km(e,t),e=tr(e,i.children),e.flags|=4096);return e}return l?(tn(),u=i.fallback,l=e.mode,c=t.child,f=c.sibling,i=zt(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,f!==null?u=zt(f,u):(u=Dn(u,l,n,null),u.flags|=2),u.return=e,i.return=e,i.sibling=u,e.child=i,ol(null,i),i=e.child,u=t.child.memoizedState,u===null?u=ja(n):(l=u.cachePool,l!==null?(c=xe._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Xm(),u={baseLanes:u.baseLanes|n,cachePool:l}),i.memoizedState=u,i.childLanes=es(t,r,n),e.memoizedState=Wa,ol(t.child,i)):(en(e),n=t.child,t=n.sibling,n=zt(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function tr(t,e){return e=Ko({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Ko(t,e){return t=et(22,t,null,e),t.lanes=0,t}function ts(t,e,n){return kn(e,t.child,null,n),t=tr(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lc(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ps(t.return,e,n)}function ns(t,e,n,i,l,o){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:l,treeForkCount:o}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=l,r.treeForkCount=o)}function Ph(t,e,n){var i=e.pendingProps,l=i.revealOrder,o=i.tail;i=i.children;var r=Te.current,u=(r&2)!==0;if(u?(r=r&1|2,e.flags|=128):r&=1,ue(Te,r),Ue(t,e,i,n),i=X?Ml:0,!u&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lc(t,n,e);else if(t.tag===19)Lc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(l){case"forwards":for(n=e.child,l=null;n!==null;)t=n.alternate,t!==null&&Fo(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=e.child,e.child=null):(l=n.sibling,n.sibling=null),ns(e,!1,l,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&Fo(t)===null){e.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}ns(e,!0,n,null,o,i);break;case"together":ns(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sn|=e.lanes,!(n&e.childLanes))if(t!==null){if(qi(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=zt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pu(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&zo(t)))}function I0(t,e,n){switch(e.tag){case 3:Uo(e,e.stateNode.containerInfo),jt(e,xe,t.memoizedState.cache),Vn();break;case 27:case 5:ws(e);break;case 4:Uo(e,e.stateNode.containerInfo);break;case 10:jt(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,$s(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(en(e),e.flags|=128,null):n&e.child.childLanes?Bh(t,e,n):(en(e),t=Ot(t,e,n),t!==null?t.sibling:null);en(e);break;case 19:var l=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(qi(t,e,n,!1),i=(n&e.childLanes)!==0),l){if(i)return Ph(t,e,n);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ue(Te,Te.current),i)break;return null;case 22:return e.lanes=0,zh(t,e,n,e.pendingProps);case 24:jt(e,xe,t.memoizedState.cache)}return Ot(t,e,n)}function Fh(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)_e=!0;else{if(!pu(t,n)&&!(e.flags&128))return _e=!1,I0(t,e,n);_e=!!(t.flags&131072)}else _e=!1,X&&e.flags&1048576&&Om(e,Ml,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Nn(e.elementType),e.type=t,typeof t=="function")Kr(t)?(i=qn(t,i),e.tag=1,e=Uc(null,e,t,i,n)):(e.tag=0,e=er(null,e,t,i,n));else{if(t!=null){var l=t.$$typeof;if(l===Ur){e.tag=11,e=Rc(null,e,t,i,n);break e}else if(l===Vr){e.tag=14,e=wc(null,e,t,i,n);break e}}throw e=Ns(t)||t,Error(N(306,e,""))}}return e;case 0:return er(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,l=qn(i,e.pendingProps),Uc(t,e,i,l,n);case 3:e:{if(Uo(e,e.stateNode.containerInfo),t===null)throw Error(N(387));i=e.pendingProps;var o=e.memoizedState;l=o.element,Ys(t,e),hl(e,i,null,n);var r=e.memoizedState;if(i=r.cache,jt(e,xe,i),i!==o.cache&&Fs(e,[xe],n,!0),ml(),i=r.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){e=Vc(t,e,i,n);break e}else if(i!==l){l=mt(Error(N(424)),e),Nl(l),e=Vc(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(de=gt(t.firstChild),Le=e,X=!0,cn=null,ht=!0,n=Wm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Vn(),i===l){e=Ot(t,e,n);break e}Ue(t,e,i,n)}e=e.child}return e;case 26:return Ao(t,e),t===null?(n=tf(e.type,null,e.pendingProps,null))?e.memoizedState=n:X||(n=e.type,t=e.pendingProps,i=ta(un.current).createElement(n),i[Ve]=e,i[$e]=t,He(i,n,t),be(i),e.stateNode=i):e.memoizedState=tf(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ws(e),t===null&&X&&(i=e.stateNode=Up(e.type,e.pendingProps,un.current),Le=e,ht=!0,l=de,xn(e.type)?(pr=l,de=gt(i.firstChild)):de=l),Ue(t,e,e.pendingProps.children,n),Ao(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&X&&((l=i=de)&&(i=rv(i,e.type,e.pendingProps,ht),i!==null?(e.stateNode=i,Le=e,de=gt(i.firstChild),ht=!1,l=!0):l=!1),l||Tn(e)),ws(e),l=e.type,o=e.pendingProps,r=t!==null?t.memoizedProps:null,i=o.children,fr(l,o)?i=null:r!==null&&fr(l,r)&&(e.flags|=32),e.memoizedState!==null&&(l=nu(t,e,x0,null,null,n),Ul._currentValue=l),Ao(t,e),Ue(t,e,i,n),e.child;case 6:return t===null&&X&&((t=n=de)&&(n=uv(n,e.pendingProps,ht),n!==null?(e.stateNode=n,Le=e,de=null,t=!0):t=!1),t||Tn(e)),null;case 13:return Bh(t,e,n);case 4:return Uo(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=kn(e,null,i,n):Ue(t,e,i,n),e.child;case 11:return Rc(t,e,e.type,e.pendingProps,n);case 7:return Ue(t,e,e.pendingProps,n),e.child;case 8:return Ue(t,e,e.pendingProps.children,n),e.child;case 12:return Ue(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,jt(e,e.type,i.value),Ue(t,e,i.children,n),e.child;case 9:return l=e.type._context,i=e.pendingProps.children,Ln(e),l=ke(l),i=i(l),e.flags|=1,Ue(t,e,i,n),e.child;case 14:return wc(t,e,e.type,e.pendingProps,n);case 15:return Gh(t,e,e.type,e.pendingProps,n);case 19:return Ph(t,e,n);case 31:return b0(t,e,n);case 22:return zh(t,e,n,e.pendingProps);case 24:return Ln(e),i=ke(xe),t===null?(l=Zr(),l===null&&(l=re,o=Qr(),l.pooledCache=o,o.refCount++,o!==null&&(l.pooledCacheLanes|=n),l=o),e.memoizedState={parent:i,cache:l},jr(e),jt(e,xe,l)):(t.lanes&n&&(Ys(t,e),hl(e,null,null,n),ml()),l=t.memoizedState,o=e.memoizedState,l.parent!==i?(l={parent:i,cache:i},e.memoizedState=l,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=l),jt(e,xe,i)):(i=o.cache,jt(e,xe,i),i!==l.cache&&Fs(e,[xe],n,!0))),Ue(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(N(156,e.tag))}function bt(t){t.flags|=4}function is(t,e,n,i,l){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(l&335544128)===l)if(t.stateNode.complete)t.flags|=8192;else if(mp())t.flags|=8192;else throw In=Bo,Wr}else t.flags&=-16777217}function kc(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!kp(e))if(mp())t.flags|=8192;else throw In=Bo,Wr}function ao(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?hm():536870912,t.lanes|=e,wi|=e)}function Wi(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ce(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags&65011712,i|=l.flags&65011712,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function U0(t,e,n){var i=e.pendingProps;switch(Xr(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(e),null;case 1:return ce(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Bt(xe),xi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($n(e)?bt(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$a())),ce(e),null;case 26:var l=e.type,o=e.memoizedState;return t===null?(bt(e),o!==null?(ce(e),kc(e,o)):(ce(e),is(e,l,null,i,n))):o?o!==t.memoizedState?(bt(e),ce(e),kc(e,o)):(ce(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&bt(e),ce(e),is(e,l,t,i,n)),null;case 27:if(Vo(e),n=un.current,l=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&bt(e);else{if(!i){if(e.stateNode===null)throw Error(N(166));return ce(e),null}t=Mt.current,$n(e)?fc(e):(t=Up(l,i,n),e.stateNode=t,bt(e))}return ce(e),null;case 5:if(Vo(e),l=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&bt(e);else{if(!i){if(e.stateNode===null)throw Error(N(166));return ce(e),null}if(o=Mt.current,$n(e))fc(e);else{var r=ta(un.current);switch(o){case 1:o=r.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=r.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=r.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=r.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=r.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o=typeof i.is=="string"?r.createElement(l,{is:i.is}):r.createElement(l)}}o[Ve]=e,o[$e]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)o.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=o;e:switch(He(o,l,i),l){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&bt(e)}}return ce(e),is(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&bt(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(N(166));if(t=un.current,$n(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,l=Le,l!==null)switch(l.tag){case 27:case 5:i=l.memoizedProps}t[Ve]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||wp(t.nodeValue,n)),t||Tn(e,!0)}else t=ta(t).createTextNode(i),t[Ve]=e,e.stateNode=t}return ce(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=$n(e),n!==null){if(t===null){if(!i)throw Error(N(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(557));t[Ve]=e}else Vn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ce(e),t=!1}else n=$a(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(je(e),e):(je(e),null);if(e.flags&128)throw Error(N(558))}return ce(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(l=$n(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(N(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(N(317));l[Ve]=e}else Vn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ce(e),l=!1}else l=$a(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),l=!0;if(!l)return e.flags&256?(je(e),e):(je(e),null)}return je(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,l=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(l=i.alternate.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==l&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ao(e,e.updateQueue),ce(e),null);case 4:return xi(),t===null&&Eu(e.stateNode.containerInfo),ce(e),null;case 10:return Bt(e.type),ce(e),null;case 19:if(Ie(Te),i=e.memoizedState,i===null)return ce(e),null;if(l=(e.flags&128)!==0,o=i.rendering,o===null)if(l)Wi(i,!1);else{if(ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fo(t),o!==null){for(e.flags|=128,Wi(i,!1),t=o.updateQueue,e.updateQueue=t,ao(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Jm(n,t),n=n.sibling;return ue(Te,Te.current&1|2),X&&Lt(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&nt()>Xo&&(e.flags|=128,l=!0,Wi(i,!1),e.lanes=4194304)}else{if(!l)if(t=Fo(o),t!==null){if(e.flags|=128,l=!0,t=t.updateQueue,e.updateQueue=t,ao(e,t),Wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!X)return ce(e),null}else 2*nt()-i.renderingStartTime>Xo&&n!==536870912&&(e.flags|=128,l=!0,Wi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nt(),t.sibling=null,n=Te.current,ue(Te,l?n&1|2:n&1),X&&Lt(e,i.treeForkCount),t):(ce(e),null);case 22:case 23:return je(e),eu(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(ce(e),e.subtreeFlags&6&&(e.flags|=8192)):ce(e),n=e.updateQueue,n!==null&&ao(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Ie(bn),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Bt(xe),ce(e),null;case 25:return null;case 30:return null}throw Error(N(156,e.tag))}function V0(t,e){switch(Xr(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bt(xe),xi(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Vo(e),null;case 31:if(e.memoizedState!==null){if(je(e),e.alternate===null)throw Error(N(340));Vn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(je(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Vn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Te),null;case 4:return xi(),null;case 10:return Bt(e.type),null;case 22:case 23:return je(e),eu(),t!==null&&Ie(bn),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Bt(xe),null;case 25:return null;default:return null}}function Jh(t,e){switch(Xr(e),e.tag){case 3:Bt(xe),xi();break;case 26:case 27:case 5:Vo(e);break;case 4:xi();break;case 31:e.memoizedState!==null&&je(e);break;case 13:je(e);break;case 19:Ie(Te);break;case 10:Bt(e.type);break;case 22:case 23:je(e),eu(),t!==null&&Ie(bn);break;case 24:Bt(xe)}}function Jl(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var l=i.next;n=l;do{if((n.tag&t)===t){i=void 0;var o=n.create,r=n.inst;i=o(),r.destroy=i}n=n.next}while(n!==l)}}catch(u){le(e,e.return,u)}}function Cn(t,e,n){try{var i=e.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var o=l.next;i=o;do{if((i.tag&t)===t){var r=i.inst,u=r.destroy;if(u!==void 0){r.destroy=void 0,l=e;var c=n,f=u;try{f()}catch(d){le(l,c,d)}}}i=i.next}while(i!==o)}}catch(d){le(e,e.return,d)}}function Yh(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{eh(e,n)}catch(i){le(t,t.return,i)}}}function Oh(t,e,n){n.props=qn(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){le(t,e,i)}}function gl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(l){le(t,e,l)}}function _t(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(l){le(t,e,l)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(l){le(t,e,l)}else n.current=null}function Kh(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(l){le(t,t.return,l)}}function ls(t,e,n){try{var i=t.stateNode;nv(i,t.type,n,e),i[$e]=e}catch(l){le(t,t.return,l)}}function $h(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&xn(t.type)||t.tag===4}function os(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$h(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&xn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nr(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qt));else if(i!==4&&(i===27&&xn(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(nr(t,e,n),t=t.sibling;t!==null;)nr(t,e,n),t=t.sibling}function $o(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&xn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for($o(t,e,n),t=t.sibling;t!==null;)$o(t,e,n),t=t.sibling}function Xh(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,l=e.attributes;l.length;)e.removeAttributeNode(l[0]);He(e,i,n),e[Ve]=t,e[$e]=n}catch(o){le(t,t.return,o)}}var kt=!1,Ee=!1,as=!1,Hc=typeof WeakSet=="function"?WeakSet:Set,De=null;function L0(t,e){if(t=t.containerInfo,ur=oa,t=km(t),Jr(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var l=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var r=0,u=-1,c=-1,f=0,d=0,m=t,h=null;t:for(;;){for(var g;m!==n||l!==0&&m.nodeType!==3||(u=r+l),m!==o||i!==0&&m.nodeType!==3||(c=r+i),m.nodeType===3&&(r+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===t)break t;if(h===n&&++f===l&&(u=r),h===o&&++d===i&&(c=r),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cr={focusedElem:t,selectionRange:n},oa=!1,De=e;De!==null;)if(e=De,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,De=t;else for(;De!==null;){switch(e=De,o=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)l=t[n],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&o!==null){t=void 0,n=e,l=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var C=qn(n.type,l);t=i.getSnapshotBeforeUpdate(C,o),i.__reactInternalSnapshotBeforeUpdate=t}catch(S){le(n,n.return,S)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)dr(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dr(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(N(163))}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}}function Qh(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ut(t,n),i&4&&Jl(5,n);break;case 1:if(Ut(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){le(n,n.return,r)}else{var l=qn(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(l,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){le(n,n.return,r)}}i&64&&Yh(n),i&512&&gl(n,n.return);break;case 3:if(Ut(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{eh(t,e)}catch(r){le(n,n.return,r)}}break;case 27:e===null&&i&4&&Xh(n);case 26:case 5:Ut(t,n),e===null&&i&4&&Kh(n),i&512&&gl(n,n.return);break;case 12:Ut(t,n);break;case 31:Ut(t,n),i&4&&jh(t,n);break;case 13:Ut(t,n),i&4&&ep(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=J0.bind(null,n),cv(t,n))));break;case 22:if(i=n.memoizedState!==null||kt,!i){e=e!==null&&e.memoizedState!==null||Ee,l=kt;var o=Ee;kt=i,(Ee=e)&&!o?Vt(t,n,(n.subtreeFlags&8772)!==0):Ut(t,n),kt=l,Ee=o}break;case 30:break;default:Ut(t,n)}}function Zh(t){var e=t.alternate;e!==null&&(t.alternate=null,Zh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&qr(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pe=null,Ye=!1;function It(t,e,n){for(n=n.child;n!==null;)Wh(t,e,n),n=n.sibling}function Wh(t,e,n){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Hl,n)}catch{}switch(n.tag){case 26:Ee||_t(n,e),It(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ee||_t(n,e);var i=pe,l=Ye;xn(n.type)&&(pe=n.stateNode,Ye=!1),It(t,e,n),Cl(n.stateNode),pe=i,Ye=l;break;case 5:Ee||_t(n,e);case 6:if(i=pe,l=Ye,pe=null,It(t,e,n),pe=i,Ye=l,pe!==null)if(Ye)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(n.stateNode)}catch(o){le(n,e,o)}else try{pe.removeChild(n.stateNode)}catch(o){le(n,e,o)}break;case 18:pe!==null&&(Ye?(t=pe,Qc(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ui(t)):Qc(pe,n.stateNode));break;case 4:i=pe,l=Ye,pe=n.stateNode.containerInfo,Ye=!0,It(t,e,n),pe=i,Ye=l;break;case 0:case 11:case 14:case 15:Cn(2,n,e),Ee||Cn(4,n,e),It(t,e,n);break;case 1:Ee||(_t(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Oh(n,e,i)),It(t,e,n);break;case 21:It(t,e,n);break;case 22:Ee=(i=Ee)||n.memoizedState!==null,It(t,e,n),Ee=i;break;default:It(t,e,n)}}function jh(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ui(t)}catch(n){le(e,e.return,n)}}}function ep(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ui(t)}catch(n){le(e,e.return,n)}}function k0(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Hc),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Hc),e;default:throw Error(N(435,t.tag))}}function so(t,e){var n=k0(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var l=Y0.bind(null,t,i);i.then(l,l)}})}function Fe(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var l=n[i],o=t,r=e,u=r;e:for(;u!==null;){switch(u.tag){case 27:if(xn(u.type)){pe=u.stateNode,Ye=!1;break e}break;case 5:pe=u.stateNode,Ye=!1;break e;case 3:case 4:pe=u.stateNode.containerInfo,Ye=!0;break e}u=u.return}if(pe===null)throw Error(N(160));Wh(o,r,l),pe=null,Ye=!1,o=l.alternate,o!==null&&(o.return=null),l.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)tp(e,t),e=e.sibling}var Ct=null;function tp(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Fe(e,t),Je(t),i&4&&(Cn(3,t,t.return),Jl(3,t),Cn(5,t,t.return));break;case 1:Fe(e,t),Je(t),i&512&&(Ee||n===null||_t(n,n.return)),i&64&&kt&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var l=Ct;if(Fe(e,t),Je(t),i&512&&(Ee||n===null||_t(n,n.return)),i&4){var o=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,l=l.ownerDocument||l;t:switch(i){case"title":o=l.getElementsByTagName("title")[0],(!o||o[zl]||o[Ve]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=l.createElement(i),l.head.insertBefore(o,l.querySelector("head > title"))),He(o,i,n),o[Ve]=t,be(o),i=o;break e;case"link":var r=lf("link","href",l).get(i+(n.href||""));if(r){for(var u=0;u<r.length;u++)if(o=r[u],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(u,1);break t}}o=l.createElement(i),He(o,i,n),l.head.appendChild(o);break;case"meta":if(r=lf("meta","content",l).get(i+(n.content||""))){for(u=0;u<r.length;u++)if(o=r[u],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(u,1);break t}}o=l.createElement(i),He(o,i,n),l.head.appendChild(o);break;default:throw Error(N(468,i))}o[Ve]=t,be(o),i=o}t.stateNode=i}else of(l,t.type,t.stateNode);else t.stateNode=nf(l,i,t.memoizedProps);else o!==i?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,i===null?of(l,t.type,t.stateNode):nf(l,i,t.memoizedProps)):i===null&&t.stateNode!==null&&ls(t,t.memoizedProps,n.memoizedProps)}break;case 27:Fe(e,t),Je(t),i&512&&(Ee||n===null||_t(n,n.return)),n!==null&&i&4&&ls(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Fe(e,t),Je(t),i&512&&(Ee||n===null||_t(n,n.return)),t.flags&32){l=t.stateNode;try{_i(l,"")}catch(C){le(t,t.return,C)}}i&4&&t.stateNode!=null&&(l=t.memoizedProps,ls(t,l,n!==null?n.memoizedProps:l)),i&1024&&(as=!0);break;case 6:if(Fe(e,t),Je(t),i&4){if(t.stateNode===null)throw Error(N(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(C){le(t,t.return,C)}}break;case 3:if(No=null,l=Ct,Ct=na(e.containerInfo),Fe(e,t),Ct=l,Je(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(C){le(t,t.return,C)}as&&(as=!1,np(t));break;case 4:i=Ct,Ct=na(t.stateNode.containerInfo),Fe(e,t),Je(t),Ct=i;break;case 12:Fe(e,t),Je(t);break;case 31:Fe(e,t),Je(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,so(t,i)));break;case 13:Fe(e,t),Je(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_a=nt()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,so(t,i)));break;case 22:l=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,f=kt,d=Ee;if(kt=f||l,Ee=d||c,Fe(e,t),Ee=d,kt=f,Je(t),i&8192)e:for(e=t.stateNode,e._visibility=l?e._visibility&-2:e._visibility|1,l&&(n===null||c||kt||Ee||Rn(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(o=c.stateNode,l)r=o.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{u=c.stateNode;var m=c.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null;u.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(C){le(c,c.return,C)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(C){le(c,c.return,C)}}}else if(e.tag===18){if(n===null){c=e;try{var g=c.stateNode;l?Zc(g,!0):Zc(c.stateNode,!1)}catch(C){le(c,c.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,so(t,n))));break;case 19:Fe(e,t),Je(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,so(t,i)));break;case 30:break;case 21:break;default:Fe(e,t),Je(t)}}function Je(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if($h(i)){n=i;break}i=i.return}if(n==null)throw Error(N(160));switch(n.tag){case 27:var l=n.stateNode,o=os(t);$o(t,o,l);break;case 5:var r=n.stateNode;n.flags&32&&(_i(r,""),n.flags&=-33);var u=os(t);$o(t,u,r);break;case 3:case 4:var c=n.stateNode.containerInfo,f=os(t);nr(t,f,c);break;default:throw Error(N(161))}}catch(d){le(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function np(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;np(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ut(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Qh(t,e.alternate,e),e=e.sibling}function Rn(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Cn(4,e,e.return),Rn(e);break;case 1:_t(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Oh(e,e.return,n),Rn(e);break;case 27:Cl(e.stateNode);case 26:case 5:_t(e,e.return),Rn(e);break;case 22:e.memoizedState===null&&Rn(e);break;case 30:Rn(e);break;default:Rn(e)}t=t.sibling}}function Vt(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,l=t,o=e,r=o.flags;switch(o.tag){case 0:case 11:case 15:Vt(l,o,n),Jl(4,o);break;case 1:if(Vt(l,o,n),i=o,l=i.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(f){le(i,i.return,f)}if(i=o,l=i.updateQueue,l!==null){var u=i.stateNode;try{var c=l.shared.hiddenCallbacks;if(c!==null)for(l.shared.hiddenCallbacks=null,l=0;l<c.length;l++)jm(c[l],u)}catch(f){le(i,i.return,f)}}n&&r&64&&Yh(o),gl(o,o.return);break;case 27:Xh(o);case 26:case 5:Vt(l,o,n),n&&i===null&&r&4&&Kh(o),gl(o,o.return);break;case 12:Vt(l,o,n);break;case 31:Vt(l,o,n),n&&r&4&&jh(l,o);break;case 13:Vt(l,o,n),n&&r&4&&ep(l,o);break;case 22:o.memoizedState===null&&Vt(l,o,n),gl(o,o.return);break;case 30:break;default:Vt(l,o,n)}e=e.sibling}}function gu(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Pl(n))}function yu(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Pl(t))}function Tt(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ip(t,e,n,i),e=e.sibling}function ip(t,e,n,i){var l=e.flags;switch(e.tag){case 0:case 11:case 15:Tt(t,e,n,i),l&2048&&Jl(9,e);break;case 1:Tt(t,e,n,i);break;case 3:Tt(t,e,n,i),l&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Pl(t)));break;case 12:if(l&2048){Tt(t,e,n,i),t=e.stateNode;try{var o=e.memoizedProps,r=o.id,u=o.onPostCommit;typeof u=="function"&&u(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){le(e,e.return,c)}}else Tt(t,e,n,i);break;case 31:Tt(t,e,n,i);break;case 13:Tt(t,e,n,i);break;case 23:break;case 22:o=e.stateNode,r=e.alternate,e.memoizedState!==null?o._visibility&2?Tt(t,e,n,i):yl(t,e):o._visibility&2?Tt(t,e,n,i):(o._visibility|=2,Zn(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),l&2048&&gu(r,e);break;case 24:Tt(t,e,n,i),l&2048&&yu(e.alternate,e);break;default:Tt(t,e,n,i)}}function Zn(t,e,n,i,l){for(l=l&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var o=t,r=e,u=n,c=i,f=r.flags;switch(r.tag){case 0:case 11:case 15:Zn(o,r,u,c,l),Jl(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?Zn(o,r,u,c,l):yl(o,r):(d._visibility|=2,Zn(o,r,u,c,l)),l&&f&2048&&gu(r.alternate,r);break;case 24:Zn(o,r,u,c,l),l&&f&2048&&yu(r.alternate,r);break;default:Zn(o,r,u,c,l)}e=e.sibling}}function yl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,l=i.flags;switch(i.tag){case 22:yl(n,i),l&2048&&gu(i.alternate,i);break;case 24:yl(n,i),l&2048&&yu(i.alternate,i);break;default:yl(n,i)}e=e.sibling}}var al=8192;function Xn(t,e,n){if(t.subtreeFlags&al)for(t=t.child;t!==null;)lp(t,e,n),t=t.sibling}function lp(t,e,n){switch(t.tag){case 26:Xn(t,e,n),t.flags&al&&t.memoizedState!==null&&Ev(n,Ct,t.memoizedState,t.memoizedProps);break;case 5:Xn(t,e,n);break;case 3:case 4:var i=Ct;Ct=na(t.stateNode.containerInfo),Xn(t,e,n),Ct=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=al,al=16777216,Xn(t,e,n),al=i):Xn(t,e,n));break;default:Xn(t,e,n)}}function op(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ji(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];De=i,sp(i,t)}op(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ap(t),t=t.sibling}function ap(t){switch(t.tag){case 0:case 11:case 15:ji(t),t.flags&2048&&Cn(9,t,t.return);break;case 3:ji(t);break;case 12:ji(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,_o(t)):ji(t);break;default:ji(t)}}function _o(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];De=i,sp(i,t)}op(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Cn(8,e,e.return),_o(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,_o(e));break;default:_o(e)}t=t.sibling}}function sp(t,e){for(;De!==null;){var n=De;switch(n.tag){case 0:case 11:case 15:Cn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Pl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,De=i;else e:for(n=t;De!==null;){i=De;var l=i.sibling,o=i.return;if(Zh(i),i===n){De=null;break e}if(l!==null){l.return=o,De=l;break e}De=o}}}var H0={getCacheForType:function(t){var e=ke(xe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return ke(xe).controller.signal}},q0=typeof WeakMap=="function"?WeakMap:Map,j=0,re=null,K=null,$=0,ie=0,We=null,an=!1,zi=!1,vu=!1,Kt=0,ye=0,Sn=0,Un=0,Tu=0,tt=0,wi=0,vl=null,Oe=null,ir=!1,_a=0,rp=0,Xo=1/0,Qo=null,mn=null,Re=0,hn=null,Di=null,Pt=0,lr=0,or=null,up=null,Tl=0,ar=null;function ot(){return j&2&&$!==0?$&-$:q.T!==null?Su():vm()}function cp(){if(tt===0)if(!($&536870912)||X){var t=jl;jl<<=1,!(jl&3932160)&&(jl=262144),tt=t}else tt=536870912;return t=st.current,t!==null&&(t.flags|=32),tt}function Ke(t,e,n){(t===re&&(ie===2||ie===9)||t.cancelPendingCommit!==null)&&(bi(t,0),sn(t,$,tt,!1)),Gl(t,n),(!(j&2)||t!==re)&&(t===re&&(!(j&2)&&(Un|=n),ye===4&&sn(t,$,tt,!1)),Rt(t))}function fp(t,e,n){if(j&6)throw Error(N(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||ql(t,e),l=i?B0(t,e):ss(t,e,!0),o=i;do{if(l===0){zi&&!i&&sn(t,e,0,!1);break}else{if(n=t.current.alternate,o&&!G0(n)){l=ss(t,e,!1),o=!1;continue}if(l===2){if(o=e,t.errorRecoveryDisabledLanes&o)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var u=t;l=vl;var c=u.current.memoizedState.isDehydrated;if(c&&(bi(u,r).flags|=256),r=ss(u,r,!1),r!==2){if(vu&&!c){u.errorRecoveryDisabledLanes|=o,Un|=o,l=4;break e}o=Oe,Oe=l,o!==null&&(Oe===null?Oe=o:Oe.push.apply(Oe,o))}l=r}if(o=!1,l!==2)continue}}if(l===1){bi(t,0),sn(t,e,0,!0);break}e:{switch(i=t,o=l,o){case 0:case 1:throw Error(N(345));case 4:if((e&4194048)!==e)break;case 6:sn(i,e,tt,!an);break e;case 2:Oe=null;break;case 3:case 5:break;default:throw Error(N(329))}if((e&62914560)===e&&(l=_a+300-nt(),10<l)){if(sn(i,e,tt,!an),ha(i,0,!0)!==0)break e;Pt=e,i.timeoutHandle=bp(qc.bind(null,i,n,Oe,Qo,ir,e,tt,Un,wi,an,o,"Throttled",-0,0),l);break e}qc(i,n,Oe,Qo,ir,e,tt,Un,wi,an,o,null,-0,0)}}break}while(!0);Rt(t)}function qc(t,e,n,i,l,o,r,u,c,f,d,m,h,g){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qt},lp(e,o,m);var C=(o&62914560)===o?_a-nt():(o&4194048)===o?rp-nt():0;if(C=xv(m,C),C!==null){Pt=o,t.cancelPendingCommit=C(zc.bind(null,t,e,o,n,i,l,r,u,c,d,m,null,h,g)),sn(t,o,r,!f);return}}zc(t,e,o,n,i,l,r,u,c)}function G0(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var l=n[i],o=l.getSnapshot;l=l.value;try{if(!at(o(),l))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sn(t,e,n,i){e&=~Tu,e&=~Un,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var l=e;0<l;){var o=31-lt(l),r=1<<o;i[o]=-1,l&=~r}n!==0&&pm(t,n,e)}function Ma(){return j&6?!0:(Yl(0),!1)}function Cu(){if(K!==null){if(ie===0)var t=K.return;else t=K,Gt=Jn=null,ou(t),yi=null,Rl=0,t=K;for(;t!==null;)Jh(t.alternate,t),t=t.return;K=null}}function bi(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,ov(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Pt=0,Cu(),re=t,K=n=zt(t.current,null),$=e,ie=0,We=null,an=!1,zi=ql(t,e),vu=!1,wi=tt=Tu=Un=Sn=ye=0,Oe=vl=null,ir=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var l=31-lt(i),o=1<<l;e|=t[l],i&=~o}return Kt=e,va(),n}function dp(t,e){B=null,q.H=Dl,e===Gi||e===Ca?(e=gc(),ie=3):e===Wr?(e=gc(),ie=4):ie=e===hu?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,We=e,K===null&&(ye=1,Oo(t,mt(e,t.current)))}function mp(){var t=st.current;return t===null?!0:($&4194048)===$?pt===null:($&62914560)===$||$&536870912?t===pt:!1}function hp(){var t=q.H;return q.H=Dl,t===null?Dl:t}function pp(){var t=q.A;return q.A=H0,t}function Zo(){ye=4,an||($&4194048)!==$&&st.current!==null||(zi=!0),!(Sn&134217727)&&!(Un&134217727)||re===null||sn(re,$,tt,!1)}function ss(t,e,n){var i=j;j|=2;var l=hp(),o=pp();(re!==t||$!==e)&&(Qo=null,bi(t,e)),e=!1;var r=ye;e:do try{if(ie!==0&&K!==null){var u=K,c=We;switch(ie){case 8:Cu(),r=6;break e;case 3:case 2:case 9:case 6:st.current===null&&(e=!0);var f=ie;if(ie=0,We=null,fi(t,u,c,f),n&&zi){r=0;break e}break;default:f=ie,ie=0,We=null,fi(t,u,c,f)}}z0(),r=ye;break}catch(d){dp(t,d)}while(!0);return e&&t.shellSuspendCounter++,Gt=Jn=null,j=i,q.H=l,q.A=o,K===null&&(re=null,$=0,va()),r}function z0(){for(;K!==null;)gp(K)}function B0(t,e){var n=j;j|=2;var i=hp(),l=pp();re!==t||$!==e?(Qo=null,Xo=nt()+500,bi(t,e)):zi=ql(t,e);e:do try{if(ie!==0&&K!==null){e=K;var o=We;t:switch(ie){case 1:ie=0,We=null,fi(t,e,o,1);break;case 2:case 9:if(pc(o)){ie=0,We=null,Gc(e);break}e=function(){ie!==2&&ie!==9||re!==t||(ie=7),Rt(t)},o.then(e,e);break e;case 3:ie=7;break e;case 4:ie=5;break e;case 7:pc(o)?(ie=0,We=null,Gc(e)):(ie=0,We=null,fi(t,e,o,7));break;case 5:var r=null;switch(K.tag){case 26:r=K.memoizedState;case 5:case 27:var u=K;if(r?kp(r):u.stateNode.complete){ie=0,We=null;var c=u.sibling;if(c!==null)K=c;else{var f=u.return;f!==null?(K=f,Na(f)):K=null}break t}}ie=0,We=null,fi(t,e,o,5);break;case 6:ie=0,We=null,fi(t,e,o,6);break;case 8:Cu(),ye=6;break e;default:throw Error(N(462))}}P0();break}catch(d){dp(t,d)}while(!0);return Gt=Jn=null,q.H=i,q.A=l,j=n,K!==null?0:(re=null,$=0,va(),ye)}function P0(){for(;K!==null&&!fy();)gp(K)}function gp(t){var e=Fh(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?Na(t):K=e}function Gc(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Ic(n,e,e.pendingProps,e.type,void 0,$);break;case 11:e=Ic(n,e,e.pendingProps,e.type.render,e.ref,$);break;case 5:ou(e);default:Jh(n,e),e=K=Jm(e,Kt),e=Fh(n,e,Kt)}t.memoizedProps=t.pendingProps,e===null?Na(t):K=e}function fi(t,e,n,i){Gt=Jn=null,ou(e),yi=null,Rl=0;var l=e.return;try{if(D0(t,l,e,n,$)){ye=1,Oo(t,mt(n,t.current)),K=null;return}}catch(o){if(l!==null)throw K=l,o;ye=1,Oo(t,mt(n,t.current)),K=null;return}e.flags&32768?(X||i===1?t=!0:zi||$&536870912?t=!1:(an=t=!0,(i===2||i===9||i===3||i===6)&&(i=st.current,i!==null&&i.tag===13&&(i.flags|=16384))),yp(e,t)):Na(e)}function Na(t){var e=t;do{if(e.flags&32768){yp(e,an);return}t=e.return;var n=U0(e.alternate,e,Kt);if(n!==null){K=n;return}if(e=e.sibling,e!==null){K=e;return}K=e=t}while(e!==null);ye===0&&(ye=5)}function yp(t,e){do{var n=V0(t.alternate,t);if(n!==null){n.flags&=32767,K=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){K=t;return}K=t=n}while(t!==null);ye=6,K=null}function zc(t,e,n,i,l,o,r,u,c){t.cancelPendingCommit=null;do Ra();while(Re!==0);if(j&6)throw Error(N(327));if(e!==null){if(e===t.current)throw Error(N(177));if(o=e.lanes|e.childLanes,o|=Yr,Sy(t,n,o,r,u,c),t===re&&(K=re=null,$=0),Di=e,hn=t,Pt=n,lr=o,or=l,up=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,O0(Lo,function(){return Ep(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=q.T,q.T=null,l=ee.p,ee.p=2,r=j,j|=4;try{L0(t,e,n)}finally{j=r,ee.p=l,q.T=i}}Re=1,vp(),Tp(),Cp()}}function vp(){if(Re===1){Re=0;var t=hn,e=Di,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=q.T,q.T=null;var i=ee.p;ee.p=2;var l=j;j|=4;try{tp(e,t);var o=cr,r=km(t.containerInfo),u=o.focusedElem,c=o.selectionRange;if(r!==u&&u&&u.ownerDocument&&Lm(u.ownerDocument.documentElement,u)){if(c!==null&&Jr(u)){var f=c.start,d=c.end;if(d===void 0&&(d=f),"selectionStart"in u)u.selectionStart=f,u.selectionEnd=Math.min(d,u.value.length);else{var m=u.ownerDocument||document,h=m&&m.defaultView||window;if(h.getSelection){var g=h.getSelection(),C=u.textContent.length,S=Math.min(c.start,C),A=c.end===void 0?S:Math.min(c.end,C);!g.extend&&S>A&&(r=A,A=S,S=r);var v=rc(u,S),y=rc(u,A);if(v&&y&&(g.rangeCount!==1||g.anchorNode!==v.node||g.anchorOffset!==v.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var T=m.createRange();T.setStart(v.node,v.offset),g.removeAllRanges(),S>A?(g.addRange(T),g.extend(y.node,y.offset)):(T.setEnd(y.node,y.offset),g.addRange(T))}}}}for(m=[],g=u;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<m.length;u++){var E=m[u];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}oa=!!ur,cr=ur=null}finally{j=l,ee.p=i,q.T=n}}t.current=e,Re=2}}function Tp(){if(Re===2){Re=0;var t=hn,e=Di,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=q.T,q.T=null;var i=ee.p;ee.p=2;var l=j;j|=4;try{Qh(t,e.alternate,e)}finally{j=l,ee.p=i,q.T=n}}Re=3}}function Cp(){if(Re===4||Re===3){Re=0,dy();var t=hn,e=Di,n=Pt,i=up;e.subtreeFlags&10256||e.flags&10256?Re=5:(Re=0,Di=hn=null,Sp(t,t.pendingLanes));var l=t.pendingLanes;if(l===0&&(mn=null),Hr(n),e=e.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Hl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=q.T,l=ee.p,ee.p=2,q.T=null;try{for(var o=t.onRecoverableError,r=0;r<i.length;r++){var u=i[r];o(u.value,{componentStack:u.stack})}}finally{q.T=e,ee.p=l}}Pt&3&&Ra(),Rt(t),l=t.pendingLanes,n&261930&&l&42?t===ar?Tl++:(Tl=0,ar=t):Tl=0,Yl(0)}}function Sp(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Pl(e)))}function Ra(){return vp(),Tp(),Cp(),Ep()}function Ep(){if(Re!==5)return!1;var t=hn,e=lr;lr=0;var n=Hr(Pt),i=q.T,l=ee.p;try{ee.p=32>n?32:n,q.T=null,n=or,or=null;var o=hn,r=Pt;if(Re=0,Di=hn=null,Pt=0,j&6)throw Error(N(331));var u=j;if(j|=4,ap(o.current),ip(o,o.current,r,n),j=u,Yl(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Hl,o)}catch{}return!0}finally{ee.p=l,q.T=i,Sp(t,e)}}function Bc(t,e,n){e=mt(n,e),e=js(t.stateNode,e,2),t=dn(t,e,2),t!==null&&(Gl(t,2),Rt(t))}function le(t,e,n){if(t.tag===3)Bc(t,t,n);else for(;e!==null;){if(e.tag===3){Bc(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(mn===null||!mn.has(i))){t=mt(n,t),n=Hh(2),i=dn(e,n,2),i!==null&&(qh(n,i,e,t),Gl(i,2),Rt(i));break}}e=e.return}}function rs(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new q0;var l=new Set;i.set(e,l)}else l=i.get(e),l===void 0&&(l=new Set,i.set(e,l));l.has(n)||(vu=!0,l.add(n),t=F0.bind(null,t,e,n),e.then(t,t))}function F0(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,re===t&&($&n)===n&&(ye===4||ye===3&&($&62914560)===$&&300>nt()-_a?!(j&2)&&bi(t,0):Tu|=n,wi===$&&(wi=0)),Rt(t)}function xp(t,e){e===0&&(e=hm()),t=Fn(t,e),t!==null&&(Gl(t,e),Rt(t))}function J0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xp(t,n)}function Y0(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(N(314))}i!==null&&i.delete(e),xp(t,n)}function O0(t,e){return Lr(t,e)}var Wo=null,Wn=null,sr=!1,jo=!1,us=!1,rn=0;function Rt(t){t!==Wn&&t.next===null&&(Wn===null?Wo=Wn=t:Wn=Wn.next=t),jo=!0,sr||(sr=!0,$0())}function Yl(t,e){if(!us&&jo){us=!0;do for(var n=!1,i=Wo;i!==null;){if(t!==0){var l=i.pendingLanes;if(l===0)var o=0;else{var r=i.suspendedLanes,u=i.pingedLanes;o=(1<<31-lt(42|t)+1)-1,o&=l&~(r&~u),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Pc(i,o))}else o=$,o=ha(i,i===re?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(o&3)||ql(i,o)||(n=!0,Pc(i,o));i=i.next}while(n);us=!1}}function K0(){Ap()}function Ap(){jo=sr=!1;var t=0;rn!==0&&lv()&&(t=rn);for(var e=nt(),n=null,i=Wo;i!==null;){var l=i.next,o=_p(i,e);o===0?(i.next=null,n===null?Wo=l:n.next=l,l===null&&(Wn=n)):(n=i,(t!==0||o&3)&&(jo=!0)),i=l}Re!==0&&Re!==5||Yl(t),rn!==0&&(rn=0)}function _p(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,l=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var r=31-lt(o),u=1<<r,c=l[r];c===-1?(!(u&n)||u&i)&&(l[r]=Cy(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}if(e=re,n=$,n=ha(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(ie===2||ie===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Ha(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||ql(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Ha(i),Hr(n)){case 2:case 8:n=dm;break;case 32:n=Lo;break;case 268435456:n=mm;break;default:n=Lo}return i=Mp.bind(null,t),n=Lr(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Ha(i),t.callbackPriority=2,t.callbackNode=null,2}function Mp(t,e){if(Re!==0&&Re!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ra()&&t.callbackNode!==n)return null;var i=$;return i=ha(t,t===re?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(fp(t,i,e),_p(t,nt()),t.callbackNode!=null&&t.callbackNode===n?Mp.bind(null,t):null)}function Pc(t,e){if(Ra())return null;fp(t,e,!0)}function $0(){av(function(){j&6?Lr(fm,K0):Ap()})}function Su(){if(rn===0){var t=Mi;t===0&&(t=Wl,Wl<<=1,!(Wl&261888)&&(Wl=256)),rn=t}return rn}function Fc(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:go(""+t)}function Jc(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function X0(t,e,n,i,l){if(e==="submit"&&n&&n.stateNode===l){var o=Fc((l[$e]||null).action),r=i.submitter;r&&(e=(e=r[$e]||null)?Fc(e.formAction):r.getAttribute("formAction"),e!==null&&(o=e,r=null));var u=new pa("action","action",null,i,l);t.push({event:u,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(rn!==0){var c=r?Jc(l,r):new FormData(l);Zs(n,{pending:!0,data:c,method:l.method,action:o},null,c)}}else typeof o=="function"&&(u.preventDefault(),c=r?Jc(l,r):new FormData(l),Zs(n,{pending:!0,data:c,method:l.method,action:o},o,c))},currentTarget:l}]})}}for(var cs=0;cs<Gs.length;cs++){var fs=Gs[cs],Q0=fs.toLowerCase(),Z0=fs[0].toUpperCase()+fs.slice(1);St(Q0,"on"+Z0)}St(qm,"onAnimationEnd");St(Gm,"onAnimationIteration");St(zm,"onAnimationStart");St("dblclick","onDoubleClick");St("focusin","onFocus");St("focusout","onBlur");St(m0,"onTransitionRun");St(h0,"onTransitionStart");St(p0,"onTransitionCancel");St(Bm,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function Np(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],l=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var r=i.length-1;0<=r;r--){var u=i[r],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&l.isPropagationStopped())break e;o=u,l.currentTarget=f;try{o(l)}catch(d){Ho(d)}l.currentTarget=null,o=c}else for(r=0;r<i.length;r++){if(u=i[r],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&l.isPropagationStopped())break e;o=u,l.currentTarget=f;try{o(l)}catch(d){Ho(d)}l.currentTarget=null,o=c}}}}function O(t,e){var n=e[bs];n===void 0&&(n=e[bs]=new Set);var i=t+"__bubble";n.has(i)||(Rp(e,t,2,!1),n.add(i))}function ds(t,e,n){var i=0;e&&(i|=4),Rp(n,t,i,e)}var ro="_reactListening"+Math.random().toString(36).slice(2);function Eu(t){if(!t[ro]){t[ro]=!0,Tm.forEach(function(n){n!=="selectionchange"&&(W0.has(n)||ds(n,!1,t),ds(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ro]||(e[ro]=!0,ds("selectionchange",!1,e))}}function Rp(t,e,n,i){switch(Bp(e)){case 2:var l=Mv;break;case 8:l=Nv;break;default:l=Mu}n=l.bind(null,e,n,t),l=void 0,!ks||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),i?l!==void 0?t.addEventListener(e,n,{capture:!0,passive:l}):t.addEventListener(e,n,!0):l!==void 0?t.addEventListener(e,n,{passive:l}):t.addEventListener(e,n,!1)}function ms(t,e,n,i,l){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var u=i.stateNode.containerInfo;if(u===l)break;if(r===4)for(r=i.return;r!==null;){var c=r.tag;if((c===3||c===4)&&r.stateNode.containerInfo===l)return;r=r.return}for(;u!==null;){if(r=ni(u),r===null)return;if(c=r.tag,c===5||c===6||c===26||c===27){i=o=r;continue e}u=u.parentNode}}i=i.return}Nm(function(){var f=o,d=zr(n),m=[];e:{var h=Pm.get(t);if(h!==void 0){var g=pa,C=t;switch(t){case"keypress":if(vo(n)===0)break e;case"keydown":case"keyup":g=Yy;break;case"focusin":C="focus",g=Pa;break;case"focusout":C="blur",g=Pa;break;case"beforeblur":case"afterblur":g=Pa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$y;break;case qm:case Gm:case zm:g=ky;break;case Bm:g=Qy;break;case"scroll":case"scrollend":g=by;break;case"wheel":g=Wy;break;case"copy":case"cut":case"paste":g=qy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ec;break;case"toggle":case"beforetoggle":g=e0}var S=(e&4)!==0,A=!S&&(t==="scroll"||t==="scrollend"),v=S?h!==null?h+"Capture":null:h;S=[];for(var y=f,T;y!==null;){var E=y;if(T=E.stateNode,E=E.tag,E!==5&&E!==26&&E!==27||T===null||v===null||(E=xl(y,v),E!=null&&S.push(Il(y,E,T))),A)break;y=y.return}0<S.length&&(h=new g(h,C,null,n,d),m.push({event:h,listeners:S}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Ls&&(C=n.relatedTarget||n.fromElement)&&(ni(C)||C[ki]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(C=n.relatedTarget||n.toElement,g=f,C=C?ni(C):null,C!==null&&(A=kl(C),S=C.tag,C!==A||S!==5&&S!==27&&S!==6)&&(C=null)):(g=null,C=f),g!==C)){if(S=Wu,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=ec,E="onPointerLeave",v="onPointerEnter",y="pointer"),A=g==null?h:ll(g),T=C==null?h:ll(C),h=new S(E,y+"leave",g,n,d),h.target=A,h.relatedTarget=T,E=null,ni(d)===f&&(S=new S(v,y+"enter",C,n,d),S.target=T,S.relatedTarget=A,E=S),A=E,g&&C)t:{for(S=j0,v=g,y=C,T=0,E=v;E;E=S(E))T++;E=0;for(var M=y;M;M=S(M))E++;for(;0<T-E;)v=S(v),T--;for(;0<E-T;)y=S(y),E--;for(;T--;){if(v===y||y!==null&&v===y.alternate){S=v;break t}v=S(v),y=S(y)}S=null}else S=null;g!==null&&Yc(m,h,g,S,!1),C!==null&&A!==null&&Yc(m,A,C,S,!0)}}e:{if(h=f?ll(f):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var _=lc;else if(ic(h))if(Um)_=c0;else{_=r0;var x=s0}else g=h.nodeName,!g||g.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?f&&Gr(f.elementType)&&(_=lc):_=u0;if(_&&(_=_(t,f))){Im(m,_,n,d);break e}x&&x(t,h,f),t==="focusout"&&f&&h.type==="number"&&f.memoizedProps.value!=null&&Vs(h,"number",h.value)}switch(x=f?ll(f):window,t){case"focusin":(ic(x)||x.contentEditable==="true")&&(oi=x,Hs=f,cl=null);break;case"focusout":cl=Hs=oi=null;break;case"mousedown":qs=!0;break;case"contextmenu":case"mouseup":case"dragend":qs=!1,uc(m,n,d);break;case"selectionchange":if(d0)break;case"keydown":case"keyup":uc(m,n,d)}var b;if(Fr)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else li?Dm(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(wm&&n.locale!=="ko"&&(li||D!=="onCompositionStart"?D==="onCompositionEnd"&&li&&(b=Rm()):(on=d,Br="value"in on?on.value:on.textContent,li=!0)),x=ea(f,D),0<x.length&&(D=new ju(D,t,null,n,d),m.push({event:D,listeners:x}),b?D.data=b:(b=bm(n),b!==null&&(D.data=b)))),(b=n0?i0(t,n):l0(t,n))&&(D=ea(f,"onBeforeInput"),0<D.length&&(x=new ju("onBeforeInput","beforeinput",null,n,d),m.push({event:x,listeners:D}),x.data=b)),X0(m,t,f,n,d)}Np(m,e)})}function Il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ea(t,e){for(var n=e+"Capture",i=[];t!==null;){var l=t,o=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||o===null||(l=xl(t,n),l!=null&&i.unshift(Il(t,l,o)),l=xl(t,e),l!=null&&i.push(Il(t,l,o))),t.tag===3)return i;t=t.return}return[]}function j0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yc(t,e,n,i,l){for(var o=e._reactName,r=[];n!==null&&n!==i;){var u=n,c=u.alternate,f=u.stateNode;if(u=u.tag,c!==null&&c===i)break;u!==5&&u!==26&&u!==27||f===null||(c=f,l?(f=xl(n,o),f!=null&&r.unshift(Il(n,f,c))):l||(f=xl(n,o),f!=null&&r.push(Il(n,f,c)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var ev=/\r\n?/g,tv=/\u0000|\uFFFD/g;function Oc(t){return(typeof t=="string"?t:""+t).replace(ev,`
`).replace(tv,"")}function wp(t,e){return e=Oc(e),Oc(t)===e}function ae(t,e,n,i,l,o){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||_i(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&_i(t,""+i);break;case"className":to(t,"class",i);break;case"tabIndex":to(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":to(t,n,i);break;case"style":Mm(t,i,o);break;case"data":if(e!=="object"){to(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=go(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(e!=="input"&&ae(t,e,"name",l.name,l,null),ae(t,e,"formEncType",l.formEncType,l,null),ae(t,e,"formMethod",l.formMethod,l,null),ae(t,e,"formTarget",l.formTarget,l,null)):(ae(t,e,"encType",l.encType,l,null),ae(t,e,"method",l.method,l,null),ae(t,e,"target",l.target,l,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=go(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=qt);break;case"onScroll":i!=null&&O("scroll",t);break;case"onScrollEnd":i!=null&&O("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(N(61));if(n=i.__html,n!=null){if(l.children!=null)throw Error(N(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=go(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":O("beforetoggle",t),O("toggle",t),po(t,"popover",i);break;case"xlinkActuate":Dt(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Dt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Dt(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Dt(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Dt(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Dt(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Dt(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":po(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=wy.get(n)||n,po(t,n,i))}}function rr(t,e,n,i,l,o){switch(n){case"style":Mm(t,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(N(61));if(n=i.__html,n!=null){if(l.children!=null)throw Error(N(60));t.innerHTML=n}}break;case"children":typeof i=="string"?_i(t,i):(typeof i=="number"||typeof i=="bigint")&&_i(t,""+i);break;case"onScroll":i!=null&&O("scroll",t);break;case"onScrollEnd":i!=null&&O("scrollend",t);break;case"onClick":i!=null&&(t.onclick=qt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cm.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(l=n.endsWith("Capture"),e=n.slice(2,l?n.length-7:void 0),o=t[$e]||null,o=o!=null?o[n]:null,typeof o=="function"&&t.removeEventListener(e,o,l),typeof i=="function")){typeof o!="function"&&o!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,l);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):po(t,n,i)}}}function He(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":O("error",t),O("load",t);var i=!1,l=!1,o;for(o in n)if(n.hasOwnProperty(o)){var r=n[o];if(r!=null)switch(o){case"src":i=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,e));default:ae(t,e,o,r,n,null)}}l&&ae(t,e,"srcSet",n.srcSet,n,null),i&&ae(t,e,"src",n.src,n,null);return;case"input":O("invalid",t);var u=o=r=l=null,c=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":l=d;break;case"type":r=d;break;case"checked":c=d;break;case"defaultChecked":f=d;break;case"value":o=d;break;case"defaultValue":u=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(N(137,e));break;default:ae(t,e,i,d,n,null)}}xm(t,o,u,c,f,r,l,!1);return;case"select":O("invalid",t),i=r=o=null;for(l in n)if(n.hasOwnProperty(l)&&(u=n[l],u!=null))switch(l){case"value":o=u;break;case"defaultValue":r=u;break;case"multiple":i=u;default:ae(t,e,l,u,n,null)}e=o,n=r,t.multiple=!!i,e!=null?hi(t,!!i,e,!1):n!=null&&hi(t,!!i,n,!0);return;case"textarea":O("invalid",t),o=l=i=null;for(r in n)if(n.hasOwnProperty(r)&&(u=n[r],u!=null))switch(r){case"value":i=u;break;case"defaultValue":l=u;break;case"children":o=u;break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(N(91));break;default:ae(t,e,r,u,n,null)}_m(t,i,l,o);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ae(t,e,c,i,n,null)}return;case"dialog":O("beforetoggle",t),O("toggle",t),O("cancel",t),O("close",t);break;case"iframe":case"object":O("load",t);break;case"video":case"audio":for(i=0;i<bl.length;i++)O(bl[i],t);break;case"image":O("error",t),O("load",t);break;case"details":O("toggle",t);break;case"embed":case"source":case"link":O("error",t),O("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,e));default:ae(t,e,f,i,n,null)}return;default:if(Gr(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&rr(t,e,d,i,n,void 0));return}}for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!=null&&ae(t,e,u,i,n,null))}function nv(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,o=null,r=null,u=null,c=null,f=null,d=null;for(g in n){var m=n[g];if(n.hasOwnProperty(g)&&m!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=m;default:i.hasOwnProperty(g)||ae(t,e,g,null,i,m)}}for(var h in i){var g=i[h];if(m=n[h],i.hasOwnProperty(h)&&(g!=null||m!=null))switch(h){case"type":o=g;break;case"name":l=g;break;case"checked":f=g;break;case"defaultChecked":d=g;break;case"value":r=g;break;case"defaultValue":u=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(N(137,e));break;default:g!==m&&ae(t,e,h,g,i,m)}}Us(t,r,u,c,f,d,o,l);return;case"select":g=r=u=h=null;for(o in n)if(c=n[o],n.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":g=c;default:i.hasOwnProperty(o)||ae(t,e,o,null,i,c)}for(l in i)if(o=i[l],c=n[l],i.hasOwnProperty(l)&&(o!=null||c!=null))switch(l){case"value":h=o;break;case"defaultValue":u=o;break;case"multiple":r=o;default:o!==c&&ae(t,e,l,o,i,c)}e=u,n=r,i=g,h!=null?hi(t,!!n,h,!1):!!i!=!!n&&(e!=null?hi(t,!!n,e,!0):hi(t,!!n,n?[]:"",!1));return;case"textarea":g=h=null;for(u in n)if(l=n[u],n.hasOwnProperty(u)&&l!=null&&!i.hasOwnProperty(u))switch(u){case"value":break;case"children":break;default:ae(t,e,u,null,i,l)}for(r in i)if(l=i[r],o=n[r],i.hasOwnProperty(r)&&(l!=null||o!=null))switch(r){case"value":h=l;break;case"defaultValue":g=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(N(91));break;default:l!==o&&ae(t,e,r,l,i,o)}Am(t,h,g);return;case"option":for(var C in n)if(h=n[C],n.hasOwnProperty(C)&&h!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:ae(t,e,C,null,i,h)}for(c in i)if(h=i[c],g=n[c],i.hasOwnProperty(c)&&h!==g&&(h!=null||g!=null))switch(c){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ae(t,e,c,h,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)h=n[S],n.hasOwnProperty(S)&&h!=null&&!i.hasOwnProperty(S)&&ae(t,e,S,null,i,h);for(f in i)if(h=i[f],g=n[f],i.hasOwnProperty(f)&&h!==g&&(h!=null||g!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(N(137,e));break;default:ae(t,e,f,h,i,g)}return;default:if(Gr(e)){for(var A in n)h=n[A],n.hasOwnProperty(A)&&h!==void 0&&!i.hasOwnProperty(A)&&rr(t,e,A,void 0,i,h);for(d in i)h=i[d],g=n[d],!i.hasOwnProperty(d)||h===g||h===void 0&&g===void 0||rr(t,e,d,h,i,g);return}}for(var v in n)h=n[v],n.hasOwnProperty(v)&&h!=null&&!i.hasOwnProperty(v)&&ae(t,e,v,null,i,h);for(m in i)h=i[m],g=n[m],!i.hasOwnProperty(m)||h===g||h==null&&g==null||ae(t,e,m,h,i,g)}function Kc(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iv(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var l=n[i],o=l.transferSize,r=l.initiatorType,u=l.duration;if(o&&u&&Kc(r)){for(r=0,u=l.responseEnd,i+=1;i<n.length;i++){var c=n[i],f=c.startTime;if(f>u)break;var d=c.transferSize,m=c.initiatorType;d&&Kc(m)&&(c=c.responseEnd,r+=d*(c<u?1:(u-f)/(c-f)))}if(--i,e+=8*(o+r)/(l.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ur=null,cr=null;function ta(t){return t.nodeType===9?t:t.ownerDocument}function $c(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dp(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function fr(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hs=null;function lv(){var t=window.event;return t&&t.type==="popstate"?t===hs?!1:(hs=t,!0):(hs=null,!1)}var bp=typeof setTimeout=="function"?setTimeout:void 0,ov=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,av=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(t){return Xc.resolve(null).then(t).catch(sv)}:bp;function sv(t){setTimeout(function(){throw t})}function xn(t){return t==="head"}function Qc(t,e){var n=e,i=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(l),Ui(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Cl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Cl(n);for(var o=n.firstChild;o;){var r=o.nextSibling,u=o.nodeName;o[zl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=r}}else n==="body"&&Cl(t.ownerDocument.body);n=l}while(n);Ui(e)}function Zc(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function dr(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":dr(n),qr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function rv(t,e,n,i){for(;t.nodeType===1;){var l=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[zl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(o=t.getAttribute("rel"),o==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(o!==l.rel||t.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||t.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||t.getAttribute("title")!==(l.title==null?null:l.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(o=t.getAttribute("src"),(o!==(l.src==null?null:l.src)||t.getAttribute("type")!==(l.type==null?null:l.type)||t.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var o=l.name==null?null:""+l.name;if(l.type==="hidden"&&t.getAttribute("name")===o)return t}else return t;if(t=gt(t.nextSibling),t===null)break}return null}function uv(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=gt(t.nextSibling),t===null))return null;return t}function Ip(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=gt(t.nextSibling),t===null))return null;return t}function mr(t){return t.data==="$?"||t.data==="$~"}function hr(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function cv(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function gt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var pr=null;function Wc(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return gt(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function jc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Up(t,e,n){switch(e=ta(n),t){case"html":if(t=e.documentElement,!t)throw Error(N(452));return t;case"head":if(t=e.head,!t)throw Error(N(453));return t;case"body":if(t=e.body,!t)throw Error(N(454));return t;default:throw Error(N(451))}}function Cl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);qr(t)}var vt=new Map,ef=new Set;function na(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $t=ee.d;ee.d={f:fv,r:dv,D:mv,C:hv,L:pv,m:gv,X:vv,S:yv,M:Tv};function fv(){var t=$t.f(),e=Ma();return t||e}function dv(t){var e=Hi(t);e!==null&&e.tag===5&&e.type==="form"?Mh(e):$t.r(t)}var Bi=typeof document>"u"?null:document;function Vp(t,e,n){var i=Bi;if(i&&typeof e=="string"&&e){var l=dt(e);l='link[rel="'+t+'"][href="'+l+'"]',typeof n=="string"&&(l+='[crossorigin="'+n+'"]'),ef.has(l)||(ef.add(l),t={rel:t,crossOrigin:n,href:e},i.querySelector(l)===null&&(e=i.createElement("link"),He(e,"link",t),be(e),i.head.appendChild(e)))}}function mv(t){$t.D(t),Vp("dns-prefetch",t,null)}function hv(t,e){$t.C(t,e),Vp("preconnect",t,e)}function pv(t,e,n){$t.L(t,e,n);var i=Bi;if(i&&t&&e){var l='link[rel="preload"][as="'+dt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(l+='[imagesrcset="'+dt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(l+='[imagesizes="'+dt(n.imageSizes)+'"]')):l+='[href="'+dt(t)+'"]';var o=l;switch(e){case"style":o=Ii(t);break;case"script":o=Pi(t)}vt.has(o)||(t=he({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),vt.set(o,t),i.querySelector(l)!==null||e==="style"&&i.querySelector(Ol(o))||e==="script"&&i.querySelector(Kl(o))||(e=i.createElement("link"),He(e,"link",t),be(e),i.head.appendChild(e)))}}function gv(t,e){$t.m(t,e);var n=Bi;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",l='link[rel="modulepreload"][as="'+dt(i)+'"][href="'+dt(t)+'"]',o=l;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Pi(t)}if(!vt.has(o)&&(t=he({rel:"modulepreload",href:t},e),vt.set(o,t),n.querySelector(l)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Kl(o)))return}i=n.createElement("link"),He(i,"link",t),be(i),n.head.appendChild(i)}}}function yv(t,e,n){$t.S(t,e,n);var i=Bi;if(i&&t){var l=mi(i).hoistableStyles,o=Ii(t);e=e||"default";var r=l.get(o);if(!r){var u={loading:0,preload:null};if(r=i.querySelector(Ol(o)))u.loading=5;else{t=he({rel:"stylesheet",href:t,"data-precedence":e},n),(n=vt.get(o))&&xu(t,n);var c=r=i.createElement("link");be(c),He(c,"link",t),c._p=new Promise(function(f,d){c.onload=f,c.onerror=d}),c.addEventListener("load",function(){u.loading|=1}),c.addEventListener("error",function(){u.loading|=2}),u.loading|=4,Mo(r,e,i)}r={type:"stylesheet",instance:r,count:1,state:u},l.set(o,r)}}}function vv(t,e){$t.X(t,e);var n=Bi;if(n&&t){var i=mi(n).hoistableScripts,l=Pi(t),o=i.get(l);o||(o=n.querySelector(Kl(l)),o||(t=he({src:t,async:!0},e),(e=vt.get(l))&&Au(t,e),o=n.createElement("script"),be(o),He(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(l,o))}}function Tv(t,e){$t.M(t,e);var n=Bi;if(n&&t){var i=mi(n).hoistableScripts,l=Pi(t),o=i.get(l);o||(o=n.querySelector(Kl(l)),o||(t=he({src:t,async:!0,type:"module"},e),(e=vt.get(l))&&Au(t,e),o=n.createElement("script"),be(o),He(o,"link",t),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(l,o))}}function tf(t,e,n,i){var l=(l=un.current)?na(l):null;if(!l)throw Error(N(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ii(n.href),n=mi(l).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ii(n.href);var o=mi(l).hoistableStyles,r=o.get(t);if(r||(l=l.ownerDocument||l,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,r),(o=l.querySelector(Ol(t)))&&!o._p&&(r.instance=o,r.state.loading=5),vt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vt.set(t,n),o||Cv(l,t,n,r.state))),e&&i===null)throw Error(N(528,""));return r}if(e&&i!==null)throw Error(N(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Pi(n),n=mi(l).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,t))}}function Ii(t){return'href="'+dt(t)+'"'}function Ol(t){return'link[rel="stylesheet"]['+t+"]"}function Lp(t){return he({},t,{"data-precedence":t.precedence,precedence:null})}function Cv(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),He(e,"link",n),be(e),t.head.appendChild(e))}function Pi(t){return'[src="'+dt(t)+'"]'}function Kl(t){return"script[async]"+t}function nf(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+dt(n.href)+'"]');if(i)return e.instance=i,be(i),i;var l=he({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),be(i),He(i,"style",l),Mo(i,n.precedence,t),e.instance=i;case"stylesheet":l=Ii(n.href);var o=t.querySelector(Ol(l));if(o)return e.state.loading|=4,e.instance=o,be(o),o;i=Lp(n),(l=vt.get(l))&&xu(i,l),o=(t.ownerDocument||t).createElement("link"),be(o);var r=o;return r._p=new Promise(function(u,c){r.onload=u,r.onerror=c}),He(o,"link",i),e.state.loading|=4,Mo(o,n.precedence,t),e.instance=o;case"script":return o=Pi(n.src),(l=t.querySelector(Kl(o)))?(e.instance=l,be(l),l):(i=n,(l=vt.get(o))&&(i=he({},n),Au(i,l)),t=t.ownerDocument||t,l=t.createElement("script"),be(l),He(l,"link",i),t.head.appendChild(l),e.instance=l);case"void":return null;default:throw Error(N(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Mo(i,n.precedence,t));return e.instance}function Mo(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=i.length?i[i.length-1]:null,o=l,r=0;r<i.length;r++){var u=i[r];if(u.dataset.precedence===e)o=u;else if(o!==l)break}o?o.parentNode.insertBefore(t,o.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function xu(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Au(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var No=null;function lf(t,e,n){if(No===null){var i=new Map,l=No=new Map;l.set(n,i)}else l=No,i=l.get(n),i||(i=new Map,l.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),l=0;l<n.length;l++){var o=n[l];if(!(o[zl]||o[Ve]||t==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var r=o.getAttribute(e)||"";r=t+r;var u=i.get(r);u?u.push(o):i.set(r,[o])}}return i}function of(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Sv(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function kp(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Ev(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var l=Ii(i.href),o=e.querySelector(Ol(l));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=ia.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=o,be(o);return}o=e.ownerDocument||e,i=Lp(i),(l=vt.get(l))&&xu(i,l),o=o.createElement("link"),be(o);var r=o;r._p=new Promise(function(u,c){r.onload=u,r.onerror=c}),He(o,"link",i),n.instance=o}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=ia.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var ps=0;function xv(t,e){return t.stylesheets&&t.count===0&&Ro(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Ro(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4+e);0<t.imgBytes&&ps===0&&(ps=62500*iv());var l=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ro(t,t.stylesheets),t.unsuspend)){var o=t.unsuspend;t.unsuspend=null,o()}},(t.imgBytes>ps?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(l)}}:null}function ia(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ro(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var la=null;function Ro(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,la=new Map,e.forEach(Av,t),la=null,ia.call(t))}function Av(t,e){if(!(e.state.loading&4)){var n=la.get(t);if(n)var i=n.get(null);else{n=new Map,la.set(t,n);for(var l=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<l.length;o++){var r=l[o];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}l=e.instance,r=l.getAttribute("data-precedence"),o=n.get(r)||i,o===i&&n.set(null,l),n.set(r,l),this.count++,i=ia.bind(this),l.addEventListener("load",i),l.addEventListener("error",i),o?o.parentNode.insertBefore(l,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(l,t.firstChild)),e.state.loading|=4}}var Ul={$$typeof:Ht,Provider:null,Consumer:null,_currentValue:wn,_currentValue2:wn,_threadCount:0};function _v(t,e,n,i,l,o,r,u,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.hiddenUpdates=qa(null),this.identifierPrefix=i,this.onUncaughtError=l,this.onCaughtError=o,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Hp(t,e,n,i,l,o,r,u,c,f,d,m){return t=new _v(t,e,n,r,c,f,d,m,u),e=1,o===!0&&(e|=24),o=et(3,null,null,e),t.current=o,o.stateNode=t,e=Qr(),e.refCount++,t.pooledCache=e,e.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:e},jr(o),t}function qp(t){return t?(t=ri,t):ri}function Gp(t,e,n,i,l,o){l=qp(l),i.context===null?i.context=l:i.pendingContext=l,i=fn(e),i.payload={element:n},o=o===void 0?null:o,o!==null&&(i.callback=o),n=dn(t,i,e),n!==null&&(Ke(n,t,e),dl(n,t,e))}function af(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _u(t,e){af(t,e),(t=t.alternate)&&af(t,e)}function zp(t){if(t.tag===13||t.tag===31){var e=Fn(t,67108864);e!==null&&Ke(e,t,67108864),_u(t,67108864)}}function sf(t){if(t.tag===13||t.tag===31){var e=ot();e=kr(e);var n=Fn(t,e);n!==null&&Ke(n,t,e),_u(t,e)}}var oa=!0;function Mv(t,e,n,i){var l=q.T;q.T=null;var o=ee.p;try{ee.p=2,Mu(t,e,n,i)}finally{ee.p=o,q.T=l}}function Nv(t,e,n,i){var l=q.T;q.T=null;var o=ee.p;try{ee.p=8,Mu(t,e,n,i)}finally{ee.p=o,q.T=l}}function Mu(t,e,n,i){if(oa){var l=gr(i);if(l===null)ms(t,e,i,aa,n),rf(t,i);else if(wv(l,t,e,n,i))i.stopPropagation();else if(rf(t,i),e&4&&-1<Rv.indexOf(t)){for(;l!==null;){var o=Hi(l);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var r=Mn(o.pendingLanes);if(r!==0){var u=o;for(u.pendingLanes|=2,u.entangledLanes|=2;r;){var c=1<<31-lt(r);u.entanglements[1]|=c,r&=~c}Rt(o),!(j&6)&&(Xo=nt()+500,Yl(0))}}break;case 31:case 13:u=Fn(o,2),u!==null&&Ke(u,o,2),Ma(),_u(o,2)}if(o=gr(i),o===null&&ms(t,e,i,aa,n),o===l)break;l=o}l!==null&&i.stopPropagation()}else ms(t,e,i,null,n)}}function gr(t){return t=zr(t),Nu(t)}var aa=null;function Nu(t){if(aa=null,t=ni(t),t!==null){var e=kl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=am(e),t!==null)return t;t=null}else if(n===31){if(t=sm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return aa=t,null}function Bp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(my()){case fm:return 2;case dm:return 8;case Lo:case hy:return 32;case mm:return 268435456;default:return 32}default:return 32}}var yr=!1,pn=null,gn=null,yn=null,Vl=new Map,Ll=new Map,nn=[],Rv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rf(t,e){switch(t){case"focusin":case"focusout":pn=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":Vl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function el(t,e,n,i,l,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[l]},e!==null&&(e=Hi(e),e!==null&&zp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function wv(t,e,n,i,l){switch(e){case"focusin":return pn=el(pn,t,e,n,i,l),!0;case"dragenter":return gn=el(gn,t,e,n,i,l),!0;case"mouseover":return yn=el(yn,t,e,n,i,l),!0;case"pointerover":var o=l.pointerId;return Vl.set(o,el(Vl.get(o)||null,t,e,n,i,l)),!0;case"gotpointercapture":return o=l.pointerId,Ll.set(o,el(Ll.get(o)||null,t,e,n,i,l)),!0}return!1}function Pp(t){var e=ni(t.target);if(e!==null){var n=kl(e);if(n!==null){if(e=n.tag,e===13){if(e=am(n),e!==null){t.blockedOn=e,Yu(t.priority,function(){sf(n)});return}}else if(e===31){if(e=sm(n),e!==null){t.blockedOn=e,Yu(t.priority,function(){sf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gr(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ls=i,n.target.dispatchEvent(i),Ls=null}else return e=Hi(n),e!==null&&zp(e),t.blockedOn=n,!1;e.shift()}return!0}function uf(t,e,n){wo(t)&&n.delete(e)}function Dv(){yr=!1,pn!==null&&wo(pn)&&(pn=null),gn!==null&&wo(gn)&&(gn=null),yn!==null&&wo(yn)&&(yn=null),Vl.forEach(uf),Ll.forEach(uf)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,yr||(yr=!0,we.unstable_scheduleCallback(we.unstable_NormalPriority,Dv)))}var co=null;function cf(t){co!==t&&(co=t,we.unstable_scheduleCallback(we.unstable_NormalPriority,function(){co===t&&(co=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],l=t[e+2];if(typeof i!="function"){if(Nu(i||n)===null)continue;break}var o=Hi(n);o!==null&&(t.splice(e,3),e-=3,Zs(o,{pending:!0,data:l,method:n.method,action:i},i,l))}}))}function Ui(t){function e(c){return uo(c,t)}pn!==null&&uo(pn,t),gn!==null&&uo(gn,t),yn!==null&&uo(yn,t),Vl.forEach(e),Ll.forEach(e);for(var n=0;n<nn.length;n++){var i=nn[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)Pp(n),n.blockedOn===null&&nn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var l=n[i],o=n[i+1],r=l[$e]||null;if(typeof o=="function")r||cf(n);else if(r){var u=null;if(o&&o.hasAttribute("formAction")){if(l=o,r=o[$e]||null)u=r.formAction;else if(Nu(l)!==null)continue}else u=r.action;typeof u=="function"?n[i+1]=u:(n.splice(i,3),i-=3),cf(n)}}}function Fp(){function t(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(r){return l=r})},focusReset:"manual",scroll:"manual"})}function e(){l!==null&&(l(),l=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,l=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),l!==null&&(l(),l=null)}}}function Ru(t){this._internalRoot=t}wa.prototype.render=Ru.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));var n=e.current,i=ot();Gp(n,i,t,e,null,null)};wa.prototype.unmount=Ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gp(t.current,2,null,t,null,null),Ma(),e[ki]=null}};function wa(t){this._internalRoot=t}wa.prototype.unstable_scheduleHydration=function(t){if(t){var e=vm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nn.length&&e!==0&&e<nn[n].priority;n++);nn.splice(n,0,t),n===0&&Pp(t)}};var ff=lm.version;if(ff!=="19.2.0")throw Error(N(527,ff,"19.2.0"));ee.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=ay(e),t=t!==null?rm(t):null,t=t===null?null:t.stateNode,t};var bv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fo.isDisabled&&fo.supportsFiber)try{Hl=fo.inject(bv),it=fo}catch{}}da.createRoot=function(t,e){if(!om(t))throw Error(N(299));var n=!1,i="",l=Vh,o=Lh,r=kh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(l=e.onUncaughtError),e.onCaughtError!==void 0&&(o=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Hp(t,1,!1,null,null,n,i,null,l,o,r,Fp),t[ki]=e.current,Eu(t),new Ru(e)};da.hydrateRoot=function(t,e,n){if(!om(t))throw Error(N(299));var i=!1,l="",o=Vh,r=Lh,u=kh,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(u=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=Hp(t,1,!0,e,n??null,i,l,c,o,r,u,Fp),e.context=qp(null),n=e.current,i=ot(),i=kr(i),l=fn(i),l.callback=null,dn(n,l,i),n=i,e.current.lanes=n,Gl(e,n),Rt(e),t[ki]=e.current,Eu(t),new wa(e)};da.version="19.2.0";function Jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jp)}catch(t){console.error(t)}}Jp(),Wd.exports=da;var Iv=Wd.exports;const Uv=Pd(Iv);var qe=(t=>(t.User="user",t.AI="ai",t))(qe||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vv,Lv;function kv(){return{geminiUrl:Vv,vertexUrl:Lv}}function Hv(t,e,n,i){var l,o;if(!(t!=null&&t.baseUrl)){const r=kv();return e?(l=r.vertexUrl)!==null&&l!==void 0?l:n:(o=r.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yn{}function k(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const o=e[l];return o!=null?String(o):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function s(t,e,n){for(let o=0;o<e.length-1;o++){const r=e[o];if(r.endsWith("[]")){const u=r.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let f=0;f<c.length;f++){const d=c[f];s(d,e.slice(o+1),n[f])}else for(const f of c)s(f,e.slice(o+1),n)}return}else if(r.endsWith("[0]")){const u=r.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];s(c[0],e.slice(o+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}const i=e[e.length-1],l=t[i];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const l=i.slice(0,-2);if(l in t){const o=t[l];return Array.isArray(o)?o.map(r=>a(r,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qv(t){const e={},n=a(t,["operationName"]);n!=null&&s(e,["operationName"],n);const i=a(t,["resourceName"]);return i!=null&&s(e,["_url","resourceName"],i),e}function Gv(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=a(t,["done"]);l!=null&&s(e,["done"],l);const o=a(t,["error"]);o!=null&&s(e,["error"],o);const r=a(t,["response","generateVideoResponse"]);return r!=null&&s(e,["response"],Bv(r)),e}function zv(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=a(t,["done"]);l!=null&&s(e,["done"],l);const o=a(t,["error"]);o!=null&&s(e,["error"],o);const r=a(t,["response"]);return r!=null&&s(e,["response"],Pv(r)),e}function Bv(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Fv(r))),s(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function Pv(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Jv(r))),s(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function Fv(t){const e={},n=a(t,["_self"]);return n!=null&&s(e,["video"],Kv(n)),e}function Jv(t){const e={},n=a(t,["_self"]);return n!=null&&s(e,["video"],$v(n)),e}function Yv(t){const e={},n=a(t,["operationName"]);return n!=null&&s(e,["_url","operationName"],n),e}function Ov(t){const e={},n=a(t,["operationName"]);return n!=null&&s(e,["_url","operationName"],n),e}function Kv(t){const e={},n=a(t,["video","uri"]);n!=null&&s(e,["uri"],n);const i=a(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],wu(i));const l=a(t,["encoding"]);return l!=null&&s(e,["mimeType"],l),e}function $v(t){const e={},n=a(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],wu(i));const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var df;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(df||(df={}));var mf;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(mf||(mf={}));var Ae;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ae||(Ae={}));var hf;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(hf||(hf={}));var pf;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(pf||(pf={}));var gf;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(gf||(gf={}));var yf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yf||(yf={}));var vf;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(vf||(vf={}));var Tf;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Tf||(Tf={}));var Cf;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Cf||(Cf={}));var Sf;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT"})(Sf||(Sf={}));var Ef;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Ef||(Ef={}));var xf;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xf||(xf={}));var Af;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Af||(Af={}));var _f;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_f||(_f={}));var Vi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Vi||(Vi={}));var Mf;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mf||(Mf={}));var vr;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vr||(vr={}));var Nf;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Nf||(Nf={}));var Rf;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Rf||(Rf={}));var wf;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(wf||(wf={}));var Df;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Df||(Df={}));var bf;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(bf||(bf={}));var If;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(If||(If={}));var Uf;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Uf||(Uf={}));var Vf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Vf||(Vf={}));var Lf;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Lf||(Lf={}));var kf;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(kf||(kf={}));var Hf;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Hf||(Hf={}));var qf;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qf||(qf={}));var Gf;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gf||(Gf={}));var zf;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zf||(zf={}));var Bf;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Bf||(Bf={}));var Pf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Pf||(Pf={}));var Ff;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ff||(Ff={}));var Jf;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Jf||(Jf={}));var Yf;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Yf||(Yf={}));var Of;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Of||(Of={}));var Kf;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Kf||(Kf={}));var $f;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})($f||($f={}));var Xf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Xf||(Xf={}));var Qf;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Qf||(Qf={}));var Zf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Zf||(Zf={}));var Wf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Wf||(Wf={}));var jf;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(jf||(jf={}));var ed;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ed||(ed={}));var td;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(td||(td={}));var nd;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(nd||(nd={}));var di;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(di||(di={}));class Tr{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class tl{get text(){var e,n,i,l,o,r,u,c;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1;const m=[];for(const h of(c=(u=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,C]of Object.entries(h))g!=="text"&&g!=="thought"&&(C!==null||C!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,f+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,i,l,o,r,u,c;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const d=[];for(const m of(c=(u=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&d.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(f+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,l,o,r,u,c;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(u=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,l,o,r,u,c,f;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(u=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(f=d==null?void 0:d[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,l,o,r,u,c,f;if(((l=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(u=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(f=d==null?void 0:d[0])===null||f===void 0?void 0:f.output}}class id{}class ld{}class Xv{}class Qv{}class Zv{}class Wv{}class od{}class ad{}class sd{}class jv{}class sa{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new sa;let l;const o=e;return n?l=zv(o):l=Gv(o),Object.assign(i,l),i}}class rd{}class ud{}class cd{}class eT{}class tT{}class nT{}class fd{}class iT{get text(){var e,n,i;let l="",o=!1;const r=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(u))c!=="text"&&c!=="thought"&&f!==null&&r.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,l+=u.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?l:void 0}get data(){var e,n,i;let l="";const o=[];for(const r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(r))u!=="inlineData"&&c!==null&&o.push(u);r.inlineData&&typeof r.inlineData.data=="string"&&(l+=atob(r.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class lT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Yp(t,e){const n=Z(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Op(t){return Array.isArray(t)?t.map(e=>ra(e)):[ra(t)]}function ra(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Kp(t){const e=ra(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $p(t){const e=ra(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dd(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Xp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>dd(e)):[dd(t)]}function Cr(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function md(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function hd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ge(t){if(t==null)throw new Error("ContentUnion is required");return Cr(t)?t:{role:"user",parts:Xp(t)}}function Du(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ge(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Ge(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ge(n)):[Ge(e)]}function yt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(md(t)||hd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ge(t)]}const e=[],n=[],i=Cr(t[0]);for(const l of t){const o=Cr(l);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(l);else{if(md(l)||hd(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return i||e.push({role:"user",parts:Xp(n)}),e}function oT(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ae).includes(n[0].toUpperCase())?n[0].toUpperCase():Ae.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ae).includes(i.toUpperCase())?i.toUpperCase():Ae.TYPE_UNSPECIFIED})}}function Ci(t){const e={},n=["items"],i=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&oT(t.type,e);for(const[r,u]of Object.entries(t))if(u!=null)if(r=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ae).includes(u.toUpperCase())?u.toUpperCase():Ae.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=Ci(u);else if(i.includes(r)){const c=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}c.push(Ci(f))}e[r]=c}else if(l.includes(r)){const c={};for(const[f,d]of Object.entries(u))c[f]=Ci(d);e[r]=c}else{if(r==="additionalProperties")continue;e[r]=u}return e}function bu(t){return Ci(t)}function Iu(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Uu(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ci(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ci(e.response));return t}function Ji(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function aT(t,e,n,i=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function Xt(t,e){if(typeof e!="string")throw new Error("name must be a string");return aT(t,e,"cachedContents")}function Qp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function On(t){return wu(t)}function sT(t){return t!=null&&typeof t=="object"&&"name"in t}function rT(t){return t!=null&&typeof t=="object"&&"video"in t}function uT(t){return t!=null&&typeof t=="object"&&"uri"in t}function Zp(t){var e;let n;if(sT(t)&&(n=t.name),!(uT(t)&&(n=t.uri,n===void 0))&&!(rT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Wp(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function jp(t){for(const e of["models","tunedModels","publisherModels"])if(cT(t,e))return t[e];return[]}function cT(t,e){return t!==null&&typeof t=="object"&&e in t}function fT(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function dT(t,e={}){const n=[],i=new Set;for(const l of t){const o=l.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const r=fT(l,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function eg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function mT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tg(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let o=!1;for(const r of l){if(typeof r!="object"||r===null)continue;const c=r.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Yi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ng(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hT(t){const e={},n=a(t,["responsesFile"]);n!=null&&s(e,["fileName"],n);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>nC(r))),s(e,["inlinedResponses"],o)}const l=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>eC(r))),s(e,["inlinedEmbedContentResponses"],o)}return e}function pT(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&s(e,["format"],n);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&s(e,["gcsUri"],i);const l=a(t,["bigqueryDestination","outputUri"]);return l!=null&&s(e,["bigqueryUri"],l),e}function gT(t){const e={},n=a(t,["format"]);n!=null&&s(e,["predictionsFormat"],n);const i=a(t,["gcsUri"]);i!=null&&s(e,["gcsDestination","outputUriPrefix"],i);const l=a(t,["bigqueryUri"]);if(l!=null&&s(e,["bigqueryDestination","outputUri"],l),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jn(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["metadata","displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["metadata","state"]);l!=null&&s(e,["state"],ng(l));const o=a(t,["metadata","createTime"]);o!=null&&s(e,["createTime"],o);const r=a(t,["metadata","endTime"]);r!=null&&s(e,["endTime"],r);const u=a(t,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const c=a(t,["metadata","model"]);c!=null&&s(e,["model"],c);const f=a(t,["metadata","output"]);return f!=null&&s(e,["dest"],hT(tg(f))),e}function Sr(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["state"]);l!=null&&s(e,["state"],ng(l));const o=a(t,["error"]);o!=null&&s(e,["error"],lg(o));const r=a(t,["createTime"]);r!=null&&s(e,["createTime"],r);const u=a(t,["startTime"]);u!=null&&s(e,["startTime"],u);const c=a(t,["endTime"]);c!=null&&s(e,["endTime"],c);const f=a(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const d=a(t,["model"]);d!=null&&s(e,["model"],d);const m=a(t,["inputConfig"]);m!=null&&s(e,["src"],yT(m));const h=a(t,["outputConfig"]);return h!=null&&s(e,["dest"],pT(tg(h))),e}function yT(t){const e={},n=a(t,["instancesFormat"]);n!=null&&s(e,["format"],n);const i=a(t,["gcsSource","uris"]);i!=null&&s(e,["gcsUri"],i);const l=a(t,["bigquerySource","inputUri"]);return l!=null&&s(e,["bigqueryUri"],l),e}function vT(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&s(n,["fileName"],i);const l=a(e,["inlinedRequests"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>tC(t,r))),s(n,["requests","requests"],o)}return n}function TT(t){const e={},n=a(t,["format"]);n!=null&&s(e,["instancesFormat"],n);const i=a(t,["gcsUri"]);i!=null&&s(e,["gcsSource","uris"],i);const l=a(t,["bigqueryUri"]);if(l!=null&&s(e,["bigquerySource","inputUri"],l),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CT(t){const e={},n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ST(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ET(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Yi(t,i)),n}function xT(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Yi(t,i)),n}function AT(t){const e={},n=a(t,["content"]);n!=null&&s(e,["content"],RT(n));const i=a(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],_T(i));const l=a(t,["tokenCount"]);l!=null&&s(e,["tokenCount"],l);const o=a(t,["finishReason"]);o!=null&&s(e,["finishReason"],o);const r=a(t,["urlContextMetadata"]);r!=null&&s(e,["urlContextMetadata"],AC(r));const u=a(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&s(e,["index"],f);const d=a(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const m=a(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function _T(t){const e={},n=a(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function MT(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function NT(t){const e={},n=a(t,["values"]);return n!=null&&s(e,["values"],n),e}function RT(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>dC(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function ig(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>mC(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function wT(t,e){const n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&s(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function DT(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const l=a(t,["dest"]);return e!==void 0&&l!=null&&s(e,["outputConfig"],gT(mT(l))),n}function gs(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["src"]);l!=null&&s(n,["batch","inputConfig"],vT(t,eg(t,l)));const o=a(e,["config"]);return o!=null&&wT(o,n),n}function bT(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["model"],Z(t,i));const l=a(e,["src"]);l!=null&&s(n,["inputConfig"],TT(eg(t,l)));const o=a(e,["config"]);return o!=null&&DT(o,n),n}function IT(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&s(e,["batch","displayName"],i),n}function ys(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["src"]);l!=null&&s(n,["batch","inputConfig"],zT(t,l));const o=a(e,["config"]);return o!=null&&IT(o,n),n}function UT(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Yi(t,i)),n}function VT(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Yi(t,i)),n}function LT(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["done"]);l!=null&&s(e,["done"],l);const o=a(t,["error"]);return o!=null&&s(e,["error"],Vu(o)),e}function kT(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["done"]);l!=null&&s(e,["done"],l);const o=a(t,["error"]);return o!=null&&s(e,["error"],lg(o)),e}function HT(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function qT(t,e){const n={},i=a(e,["contents"]);i!=null&&s(n,["requests[]","request","content"],Du(t,i));const l=a(e,["config"]);return l!=null&&s(n,["config"],GT(l,n)),n}function GT(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);const l=a(t,["title"]);e!==void 0&&l!=null&&s(e,["requests[]","title"],l);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&s(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function zT(t,e){const n={},i=a(e,["fileName"]);i!=null&&s(n,["file_name"],i);const l=a(e,["inlinedRequests"]);return l!=null&&s(n,["requests"],qT(t,l)),n}function BT(t){const e={},n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function PT(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function FT(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function JT(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function YT(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function OT(t){const e={},n=a(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=a(t,["description"]);i!=null&&s(e,["description"],i);const l=a(t,["name"]);l!=null&&s(e,["name"],l);const o=a(t,["parameters"]);o!=null&&s(e,["parameters"],o);const r=a(t,["parametersJsonSchema"]);r!=null&&s(e,["parametersJsonSchema"],r);const u=a(t,["response"]);u!=null&&s(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function KT(t,e,n){const i={},l=a(e,["systemInstruction"]);n!==void 0&&l!=null&&s(n,["systemInstruction"],ig(Ge(l)));const o=a(e,["temperature"]);o!=null&&s(i,["temperature"],o);const r=a(e,["topP"]);r!=null&&s(i,["topP"],r);const u=a(e,["topK"]);u!=null&&s(i,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&s(i,["maxOutputTokens"],f);const d=a(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const m=a(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);const h=a(e,["logprobs"]);h!=null&&s(i,["logprobs"],h);const g=a(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const C=a(e,["frequencyPenalty"]);C!=null&&s(i,["frequencyPenalty"],C);const S=a(e,["seed"]);S!=null&&s(i,["seed"],S);const A=a(e,["responseMimeType"]);A!=null&&s(i,["responseMimeType"],A);const v=a(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],yC(bu(v)));const y=a(e,["responseJsonSchema"]);if(y!=null&&s(i,["responseJsonSchema"],y),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=a(e,["safetySettings"]);if(n!==void 0&&T!=null){let V=T;Array.isArray(V)&&(V=V.map(Q=>gC(Q))),s(n,["safetySettings"],V)}const E=a(e,["tools"]);if(n!==void 0&&E!=null){let V=Ji(E);Array.isArray(V)&&(V=V.map(Q=>xC(Fi(Q)))),s(n,["tools"],V)}const M=a(e,["toolConfig"]);if(n!==void 0&&M!=null&&s(n,["toolConfig"],EC(M)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=a(e,["cachedContent"]);n!==void 0&&_!=null&&s(n,["cachedContent"],Xt(t,_));const x=a(e,["responseModalities"]);x!=null&&s(i,["responseModalities"],x);const b=a(e,["mediaResolution"]);b!=null&&s(i,["mediaResolution"],b);const D=a(e,["speechConfig"]);if(D!=null&&s(i,["speechConfig"],CC(Iu(D))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=a(e,["thinkingConfig"]);I!=null&&s(i,["thinkingConfig"],SC(I));const J=a(e,["imageConfig"]);return J!=null&&s(i,["imageConfig"],jT(J)),i}function $T(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>AT(f))),s(e,["candidates"],c)}const l=a(t,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const o=a(t,["promptFeedback"]);o!=null&&s(e,["promptFeedback"],o);const r=a(t,["responseId"]);r!=null&&s(e,["responseId"],r);const u=a(t,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function XT(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Yi(t,i)),n}function QT(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Yi(t,i)),n}function ZT(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],HT(n)),e}function WT(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],iC(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function jT(t){const e={},n=a(t,["aspectRatio"]);return n!=null&&s(e,["aspectRatio"],n),e}function eC(t){const e={},n=a(t,["response"]);n!=null&&s(e,["response"],vC(n));const i=a(t,["error"]);return i!=null&&s(e,["error"],Vu(i)),e}function tC(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["request","model"],Z(t,i));const l=a(e,["contents"]);if(l!=null){let r=yt(l);Array.isArray(r)&&(r=r.map(u=>ig(u))),s(n,["request","contents"],r)}const o=a(e,["config"]);return o!=null&&s(n,["request","generationConfig"],KT(t,o,n)),n}function nC(t){const e={},n=a(t,["response"]);n!=null&&s(e,["response"],$T(n));const i=a(t,["error"]);return i!=null&&s(e,["error"],Vu(i)),e}function iC(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Vu(t){const e={},n=a(t,["details"]);n!=null&&s(e,["details"],n);const i=a(t,["code"]);i!=null&&s(e,["code"],i);const l=a(t,["message"]);return l!=null&&s(e,["message"],l),e}function lg(t){const e={},n=a(t,["details"]);n!=null&&s(e,["details"],n);const i=a(t,["code"]);i!=null&&s(e,["code"],i);const l=a(t,["message"]);return l!=null&&s(e,["message"],l),e}function lC(t){const e={},n=a(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=a(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function oC(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);if(e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function aC(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const o=a(t,["filter"]);return e!==void 0&&o!=null&&s(e,["_query","filter"],o),n}function sC(t){const e={},n=a(t,["config"]);return n!=null&&oC(n,e),e}function rC(t){const e={},n=a(t,["config"]);return n!=null&&aC(n,e),e}function uC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["operations"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>jn(r))),s(e,["batchJobs"],o)}return e}function cC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["batchPredictionJobs"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>Sr(r))),s(e,["batchJobs"],o)}return e}function fC(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>TC(l))),s(e,["speakerVoiceConfigs"],i)}return e}function dC(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],NC(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],CT(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],BT(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],FT(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function mC(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],RC(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],ST(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],PT(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],JT(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function hC(t){const e={},n=a(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function pC(t){const e={},n=a(t,["latLng"]);n!=null&&s(e,["latLng"],lC(n));const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function gC(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&s(e,["category"],n);const i=a(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function yC(t){const e={},n=a(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=a(t,["default"]);i!=null&&s(e,["default"],i);const l=a(t,["description"]);l!=null&&s(e,["description"],l);const o=a(t,["enum"]);o!=null&&s(e,["enum"],o);const r=a(t,["example"]);r!=null&&s(e,["example"],r);const u=a(t,["format"]);u!=null&&s(e,["format"],u);const c=a(t,["items"]);c!=null&&s(e,["items"],c);const f=a(t,["maxItems"]);f!=null&&s(e,["maxItems"],f);const d=a(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const m=a(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const h=a(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=a(t,["minItems"]);g!=null&&s(e,["minItems"],g);const C=a(t,["minLength"]);C!=null&&s(e,["minLength"],C);const S=a(t,["minProperties"]);S!=null&&s(e,["minProperties"],S);const A=a(t,["minimum"]);A!=null&&s(e,["minimum"],A);const v=a(t,["nullable"]);v!=null&&s(e,["nullable"],v);const y=a(t,["pattern"]);y!=null&&s(e,["pattern"],y);const T=a(t,["properties"]);T!=null&&s(e,["properties"],T);const E=a(t,["propertyOrdering"]);E!=null&&s(e,["propertyOrdering"],E);const M=a(t,["required"]);M!=null&&s(e,["required"],M);const _=a(t,["title"]);_!=null&&s(e,["title"],_);const x=a(t,["type"]);return x!=null&&s(e,["type"],x),e}function vC(t){const e={},n=a(t,["embedding"]);n!=null&&s(e,["embedding"],NT(n));const i=a(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function TC(t){const e={},n=a(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=a(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],og(i)),e}function CC(t){const e={},n=a(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],og(n));const i=a(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],fC(i));const l=a(t,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function SC(t){const e={},n=a(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=a(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function EC(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],YT(n));const i=a(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],pC(i)),e}function xC(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>OT(f))),s(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],WT(i));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&s(e,["googleSearchRetrieval"],ZT(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&s(e,["urlContext"],_C());const r=a(t,["computerUse"]);r!=null&&s(e,["computerUse"],MT(r));const u=a(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function AC(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>MC(l))),s(e,["urlMetadata"],i)}return e}function _C(){return{}}function MC(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=a(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function NC(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function RC(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function og(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],hC(n)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Gn||(Gn={}));class $l{constructor(e,n,i,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,l)}init(e,n,i){var l,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(o=(l=r.config)===null||l===void 0?void 0:l.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wC extends Yn{constructor(e){super(),this.apiClient=e,this.create=async n=>{var i,l;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const o=n.src;if(!(Array.isArray(n.src)||o.inlinedRequests!==void 0))return this.createInternal(n);const u=this.createInlinedGenerateContentRequest(n),c=u.path,f=u.body,d=gs(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(h=>h.json()).then(h=>jn(h))},this.createEmbeddings=async n=>{var i,l;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const u=this.createInlinedEmbedContentRequest(n),c=u.path,f=u.body,d=ys(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(h=>h.json()).then(h=>jn(h))},this.list=async(n={})=>new $l(Gn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=gs(this.apiClient,e),i=n._url,l=k("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,c=u.requests,f=[];for(const d of c){const m=Object.assign({},d);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}f.push(m)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:l,body:n}}createInlinedEmbedContentRequest(e){const n=ys(this.apiClient,e),i=n._url,l=k("{model}:asyncBatchEmbedContent",i),u=n.batch.inputConfig.requests,c=u.requests,f=[];delete u.config;for(const d of c){const m=Object.assign({},d),h=m.request;for(const g in m)g!=="request"&&(h[g]=m[g],delete m[g]);f.push(m)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},l=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${l}`),i.dest===void 0){const o=this.getGcsUri(e),r=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${l}`;else if(r)i.dest=`${r}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=bT(this.apiClient,e);return u=k("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Sr(d))}else{const f=gs(this.apiClient,e);return u=k("{model}:batchGenerateContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>jn(d))}}async createEmbeddingsInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ys(this.apiClient,e);return o=k("{model}:asyncBatchEmbedContent",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),l.then(c=>jn(c))}}async get(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=QT(this.apiClient,e);return u=k("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Sr(d))}else{const f=XT(this.apiClient,e);return u=k("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>jn(d))}}async cancel(e){var n,i,l,o;let r="",u={};if(this.apiClient.isVertexAI()){const c=xT(this.apiClient,e);r=k("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=ET(this.apiClient,e);r=k("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=rC(e);return u=k("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=cC(d),h=new fd;return Object.assign(h,m),h})}else{const f=sC(e);return u=k("batches",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=uC(d),h=new fd;return Object.assign(h,m),h})}}async delete(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=VT(this.apiClient,e);return u=k("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>kT(d))}else{const f=UT(this.apiClient,e);return u=k("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>LT(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DC(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function bC(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],DC(n));const i=a(t,["authType"]);i!=null&&s(e,["authType"],i);const l=a(t,["googleServiceAccountConfig"]);l!=null&&s(e,["googleServiceAccountConfig"],l);const o=a(t,["httpBasicAuthConfig"]);o!=null&&s(e,["httpBasicAuthConfig"],o);const r=a(t,["oauthConfig"]);r!=null&&s(e,["oauthConfig"],r);const u=a(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function IC(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function UC(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["data"]);i!=null&&s(e,["data"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Do(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["model"]);l!=null&&s(e,["model"],l);const o=a(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=a(t,["updateTime"]);r!=null&&s(e,["updateTime"],r);const u=a(t,["expireTime"]);u!=null&&s(e,["expireTime"],u);const c=a(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function bo(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["model"]);l!=null&&s(e,["model"],l);const o=a(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=a(t,["updateTime"]);r!=null&&s(e,["updateTime"],r);const u=a(t,["expireTime"]);u!=null&&s(e,["expireTime"],u);const c=a(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function VC(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function LC(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function pd(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>vS(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function gd(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>TS(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function kC(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=a(t,["expireTime"]);e!==void 0&&l!=null&&s(e,["expireTime"],l);const o=a(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=a(t,["contents"]);if(e!==void 0&&r!=null){let d=yt(r);Array.isArray(d)&&(d=d.map(m=>pd(m))),s(e,["contents"],d)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],pd(Ge(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(m=>AS(m))),s(e,["tools"],d)}const f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&s(e,["toolConfig"],ES(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function HC(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=a(t,["expireTime"]);e!==void 0&&l!=null&&s(e,["expireTime"],l);const o=a(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=a(t,["contents"]);if(e!==void 0&&r!=null){let m=yt(r);Array.isArray(m)&&(m=m.map(h=>gd(h))),s(e,["contents"],m)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],gd(Ge(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>_S(h))),s(e,["tools"],m)}const f=a(t,["toolConfig"]);e!==void 0&&f!=null&&s(e,["toolConfig"],xS(f));const d=a(t,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),n}function qC(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["model"],Yp(t,i));const l=a(e,["config"]);return l!=null&&kC(l,n),n}function GC(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["model"],Yp(t,i));const l=a(e,["config"]);return l!=null&&HC(l,n),n}function zC(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Xt(t,i)),n}function BC(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Xt(t,i)),n}function PC(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function FC(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function JC(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function YC(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function OC(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function KC(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function $C(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function XC(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function QC(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function ZC(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function WC(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function jC(t){const e={},n=a(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=a(t,["description"]);i!=null&&s(e,["description"],i);const l=a(t,["name"]);l!=null&&s(e,["name"],l);const o=a(t,["parameters"]);o!=null&&s(e,["parameters"],o);const r=a(t,["parametersJsonSchema"]);r!=null&&s(e,["parametersJsonSchema"],r);const u=a(t,["response"]);u!=null&&s(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function eS(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&s(e,["description"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["parameters"]);l!=null&&s(e,["parameters"],l);const o=a(t,["parametersJsonSchema"]);o!=null&&s(e,["parametersJsonSchema"],o);const r=a(t,["response"]);r!=null&&s(e,["response"],r);const u=a(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function tS(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Xt(t,i)),n}function nS(t,e){const n={},i=a(e,["name"]);return i!=null&&s(n,["_url","name"],Xt(t,i)),n}function iS(t){const e={},n=a(t,["authConfig"]);return n!=null&&s(e,["authConfig"],bC(n)),e}function lS(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],JC(n)),e}function oS(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],YC(n)),e}function aS(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],rS(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function sS(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],uS(n));const i=a(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function rS(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function uS(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function cS(t){const e={},n=a(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=a(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function fS(t){const e={},n=a(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=a(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function dS(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),n}function mS(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),n}function hS(t){const e={},n=a(t,["config"]);return n!=null&&dS(n,e),e}function pS(t){const e={},n=a(t,["config"]);return n!=null&&mS(n,e),e}function gS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["cachedContents"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>Do(r))),s(e,["cachedContents"],o)}return e}function yS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["cachedContents"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>bo(r))),s(e,["cachedContents"],o)}return e}function vS(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],IS(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],IC(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],KC(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],XC(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function TS(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],US(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],UC(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],$C(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],QC(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function CS(t){const e={},n=a(t,["latLng"]);n!=null&&s(e,["latLng"],cS(n));const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function SS(t){const e={},n=a(t,["latLng"]);n!=null&&s(e,["latLng"],fS(n));const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function ES(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],ZC(n));const i=a(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],CS(i)),e}function xS(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],WC(n));const i=a(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],SS(i)),e}function AS(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>jC(f))),s(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],aS(i));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&s(e,["googleSearchRetrieval"],lS(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&s(e,["urlContext"],DS());const r=a(t,["computerUse"]);r!=null&&s(e,["computerUse"],VC(r));const u=a(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function _S(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>eS(h))),s(e,["functionDeclarations"],m)}const i=a(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);const l=a(t,["googleSearch"]);l!=null&&s(e,["googleSearch"],sS(l));const o=a(t,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],oS(o));const r=a(t,["enterpriseWebSearch"]);r!=null&&s(e,["enterpriseWebSearch"],OC(r));const u=a(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],iS(u)),a(t,["urlContext"])!=null&&s(e,["urlContext"],bS());const f=a(t,["computerUse"]);f!=null&&s(e,["computerUse"],LC(f));const d=a(t,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function MS(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=a(t,["expireTime"]);return e!==void 0&&l!=null&&s(e,["expireTime"],l),n}function NS(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const l=a(t,["expireTime"]);return e!==void 0&&l!=null&&s(e,["expireTime"],l),n}function RS(t,e){const n={},i=a(e,["name"]);i!=null&&s(n,["_url","name"],Xt(t,i));const l=a(e,["config"]);return l!=null&&MS(l,n),n}function wS(t,e){const n={},i=a(e,["name"]);i!=null&&s(n,["_url","name"],Xt(t,i));const l=a(e,["config"]);return l!=null&&NS(l,n),n}function DS(){return{}}function bS(){return{}}function IS(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function US(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VS extends Yn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $l(Gn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=GC(this.apiClient,e);return u=k("cachedContents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>bo(d))}else{const f=qC(this.apiClient,e);return u=k("cachedContents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Do(d))}}async get(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=nS(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>bo(d))}else{const f=tS(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Do(d))}}async delete(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=BC(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=FC(d),h=new ud;return Object.assign(h,m),h})}else{const f=zC(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=PC(d),h=new ud;return Object.assign(h,m),h})}}async update(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=wS(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>bo(d))}else{const f=RS(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Do(d))}}async listInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=pS(e);return u=k("cachedContents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=yS(d),h=new cd;return Object.assign(h,m),h})}else{const f=hS(e);return u=k("cachedContents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=gS(d),h=new cd;return Object.assign(h,m),h})}}}function yd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(t){return this instanceof fe?(this.v=t,this):new fe(t)}function Si(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),l,o=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",r),l[Symbol.asyncIterator]=function(){return this},l;function r(g){return function(C){return Promise.resolve(C).then(g,m)}}function u(g,C){i[g]&&(l[g]=function(S){return new Promise(function(A,v){o.push([g,S,A,v])>1||c(g,S)})},C&&(l[g]=C(l[g])))}function c(g,C){try{f(i[g](C))}catch(S){h(o[0][3],S)}}function f(g){g.value instanceof fe?Promise.resolve(g.value.v).then(d,m):h(o[0][2],g)}function d(g){c("next",g)}function m(g){c("throw",g)}function h(g,C){g(C),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Sl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yd=="function"?yd(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(r){return new Promise(function(u,c){r=t[o](r),l(u,c,r.done,r.value)})}}function l(o,r,u,c){Promise.resolve(c).then(function(f){o({value:f,done:u})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LS(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ag(n)}function ag(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function kS(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function vd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const l=[];let o=!0;for(;i<n&&t[i].role==="model";)l.push(t[i]),o&&!ag(t[i])&&(o=!1),i++;o?e.push(...l):e.pop()}return e}class HS{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new qS(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qS{constructor(e,n,i,l={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=l,this.history=o,this.sendPromise=Promise.resolve(),kS(o)}async sendMessage(e){var n;await this.sendPromise;const i=Ge(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,r,u;const c=await l,f=(r=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content,d=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];d!=null&&(h=(u=d.slice(m))!==null&&u!==void 0?u:[]);const g=f?[f]:[];this.recordHistory(i,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const i=Ge(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const o=await l;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?vd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,l;return Si(this,arguments,function*(){var r,u,c,f;const d=[];try{for(var m=!0,h=Sl(e),g;g=yield fe(h.next()),r=g.done,!r;m=!0){f=g.value,m=!1;const C=f;if(LS(C)){const S=(l=(i=C.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content;S!==void 0&&d.push(S)}yield yield fe(C)}}catch(C){u={error:C}}finally{try{!m&&!r&&(c=h.return)&&(yield fe(c.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let l=[];n.length>0&&n.every(o=>o.role!==void 0)?l=n:l.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...vd(i)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Da extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Da.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GS(t){const e={},n=a(t,["file"]);return n!=null&&s(e,["file"],YS(n)),e}function zS(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function BS(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["_url","file"],Zp(n)),e}function PS(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function Er(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["mimeType"]);l!=null&&s(e,["mimeType"],l);const o=a(t,["sizeBytes"]);o!=null&&s(e,["sizeBytes"],o);const r=a(t,["createTime"]);r!=null&&s(e,["createTime"],r);const u=a(t,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const c=a(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=a(t,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const d=a(t,["uri"]);d!=null&&s(e,["uri"],d);const m=a(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);const h=a(t,["state"]);h!=null&&s(e,["state"],h);const g=a(t,["source"]);g!=null&&s(e,["source"],g);const C=a(t,["videoMetadata"]);C!=null&&s(e,["videoMetadata"],C);const S=a(t,["error"]);return S!=null&&s(e,["error"],FS(S)),e}function FS(t){const e={},n=a(t,["details"]);n!=null&&s(e,["details"],n);const i=a(t,["message"]);i!=null&&s(e,["message"],i);const l=a(t,["code"]);return l!=null&&s(e,["code"],l),e}function JS(t){const e={},n=a(t,["details"]);n!=null&&s(e,["details"],n);const i=a(t,["message"]);i!=null&&s(e,["message"],i);const l=a(t,["code"]);return l!=null&&s(e,["code"],l),e}function YS(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["mimeType"]);l!=null&&s(e,["mimeType"],l);const o=a(t,["sizeBytes"]);o!=null&&s(e,["sizeBytes"],o);const r=a(t,["createTime"]);r!=null&&s(e,["createTime"],r);const u=a(t,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const c=a(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=a(t,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const d=a(t,["uri"]);d!=null&&s(e,["uri"],d);const m=a(t,["downloadUri"]);m!=null&&s(e,["downloadUri"],m);const h=a(t,["state"]);h!=null&&s(e,["state"],h);const g=a(t,["source"]);g!=null&&s(e,["source"],g);const C=a(t,["videoMetadata"]);C!=null&&s(e,["videoMetadata"],C);const S=a(t,["error"]);return S!=null&&s(e,["error"],JS(S)),e}function OS(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["_url","file"],Zp(n)),e}function KS(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),n}function $S(t){const e={},n=a(t,["config"]);return n!=null&&KS(n,e),e}function XS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["files"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>Er(r))),s(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QS extends Yn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $l(Gn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Er(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$S(e);return o=k("files",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>{const f=XS(c),d=new eT;return Object.assign(d,f),d})}}async createInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=GS(e);return o=k("upload/v1beta/files",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),l.then(c=>{const f=zS(c),d=new tT;return Object.assign(d,f),d})}}async get(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OS(e);return o=k("files/{file}",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),l.then(c=>Er(c))}}async delete(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BS(e);return o=k("files/{file}",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>{const f=PS(c),d=new nT;return Object.assign(d,f),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZS(){return{}}function WS(){return{}}function jS(){return{}}function e1(){return{}}function t1(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function n1(t){const e={},n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);i!=null&&s(e,["mimeType"],i);const l=a(t,["sourceMetadata"]);return l!=null&&s(e,["sourceMetadata"],$1(l)),e}function Td(){return{}}function Cd(){return{}}function i1(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],t1(n));const i=a(t,["authType"]);i!=null&&s(e,["authType"],i);const l=a(t,["googleServiceAccountConfig"]);l!=null&&s(e,["googleServiceAccountConfig"],l);const o=a(t,["httpBasicAuthConfig"]);o!=null&&s(e,["httpBasicAuthConfig"],o);const r=a(t,["oauthConfig"]);r!=null&&s(e,["oauthConfig"],r);const u=a(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function l1(t){const e={},n=a(t,["disabled"]);n!=null&&s(e,["disabled"],n);const i=a(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const l=a(t,["endOfSpeechSensitivity"]);l!=null&&s(e,["endOfSpeechSensitivity"],l);const o=a(t,["prefixPaddingMs"]);o!=null&&s(e,["prefixPaddingMs"],o);const r=a(t,["silenceDurationMs"]);return r!=null&&s(e,["silenceDurationMs"],r),e}function o1(t){const e={},n=a(t,["disabled"]);n!=null&&s(e,["disabled"],n);const i=a(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const l=a(t,["endOfSpeechSensitivity"]);l!=null&&s(e,["endOfSpeechSensitivity"],l);const o=a(t,["prefixPaddingMs"]);o!=null&&s(e,["prefixPaddingMs"],o);const r=a(t,["silenceDurationMs"]);return r!=null&&s(e,["silenceDurationMs"],r),e}function a1(t){const e={},n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function s1(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["data"]);i!=null&&s(e,["data"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function r1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function u1(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["data"]);i!=null&&s(e,["data"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function c1(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function f1(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function d1(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>dE(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function m1(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>mE(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function h1(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>hE(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function p1(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>pE(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function g1(t){const e={},n=a(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const i=a(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],AE(i)),e}function y1(t){const e={},n=a(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const i=a(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],_E(i)),e}function v1(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function T1(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function C1(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function S1(t){const e={},n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function E1(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function x1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function A1(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function sg(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function rg(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function _1(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function M1(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function N1(t){const e={},n=a(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=a(t,["description"]);i!=null&&s(e,["description"],i);const l=a(t,["name"]);l!=null&&s(e,["name"],l);const o=a(t,["parameters"]);o!=null&&s(e,["parameters"],o);const r=a(t,["parametersJsonSchema"]);r!=null&&s(e,["parametersJsonSchema"],r);const u=a(t,["response"]);u!=null&&s(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function R1(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&s(e,["description"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["parameters"]);l!=null&&s(e,["parameters"],l);const o=a(t,["parametersJsonSchema"]);o!=null&&s(e,["parametersJsonSchema"],o);const r=a(t,["response"]);r!=null&&s(e,["response"],r);const u=a(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function w1(t){const e={},n=a(t,["authConfig"]);return n!=null&&s(e,["authConfig"],i1(n)),e}function D1(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],v1(n)),e}function b1(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],T1(n)),e}function I1(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],V1(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function U1(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],L1(n));const i=a(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function V1(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function L1(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function k1(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","responseModalities"],l);const o=a(t,["temperature"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","temperature"],o);const r=a(t,["topP"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","topP"],r);const u=a(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const d=a(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const m=a(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],NE(Uu(m)));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","thinkingConfig"],wE(h));const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const C=a(t,["systemInstruction"]);e!==void 0&&C!=null&&s(e,["setup","systemInstruction"],h1(Ge(C)));const S=a(t,["tools"]);if(e!==void 0&&S!=null){let _=Ji(S);Array.isArray(_)&&(_=_.map(x=>bE(Fi(x)))),s(e,["setup","tools"],_)}const A=a(t,["sessionResumption"]);e!==void 0&&A!=null&&s(e,["setup","sessionResumption"],EE(A));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","inputAudioTranscription"],Td());const y=a(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&s(e,["setup","outputAudioTranscription"],Td());const T=a(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&s(e,["setup","realtimeInputConfig"],CE(T));const E=a(t,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],g1(E));const M=a(t,["proactivity"]);return e!==void 0&&M!=null&&s(e,["setup","proactivity"],vE(M)),n}function H1(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","responseModalities"],l);const o=a(t,["temperature"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","temperature"],o);const r=a(t,["topP"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","topP"],r);const u=a(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const d=a(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const m=a(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],RE(Uu(m)));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","thinkingConfig"],DE(h));const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const C=a(t,["systemInstruction"]);e!==void 0&&C!=null&&s(e,["setup","systemInstruction"],p1(Ge(C)));const S=a(t,["tools"]);if(e!==void 0&&S!=null){let _=Ji(S);Array.isArray(_)&&(_=_.map(x=>IE(Fi(x)))),s(e,["setup","tools"],_)}const A=a(t,["sessionResumption"]);e!==void 0&&A!=null&&s(e,["setup","sessionResumption"],xE(A));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","inputAudioTranscription"],Cd());const y=a(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&s(e,["setup","outputAudioTranscription"],Cd());const T=a(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&s(e,["setup","realtimeInputConfig"],SE(T));const E=a(t,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],y1(E));const M=a(t,["proactivity"]);return e!==void 0&&M!=null&&s(e,["setup","proactivity"],TE(M)),n}function q1(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["setup","model"],Z(t,i));const l=a(e,["config"]);return l!=null&&s(n,["config"],k1(l,n)),n}function G1(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["setup","model"],Z(t,i));const l=a(e,["config"]);return l!=null&&s(n,["config"],H1(l,n)),n}function z1(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>JE(l))),s(e,["weightedPrompts"],i)}return e}function ug(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>mg(l))),s(e,["weightedPrompts"],i)}return e}function xr(t){const e={},n=a(t,["setup"]);n!=null&&s(e,["setup"],cg(n));const i=a(t,["clientContent"]);i!=null&&s(e,["clientContent"],ug(i));const l=a(t,["musicGenerationConfig"]);l!=null&&s(e,["musicGenerationConfig"],fg(l));const o=a(t,["playbackControl"]);return o!=null&&s(e,["playbackControl"],o),e}function cg(t){const e={},n=a(t,["model"]);return n!=null&&s(e,["model"],n),e}function B1(t){const e={},n=a(t,["text"]);n!=null&&s(e,["text"],n);const i=a(t,["filteredReason"]);return i!=null&&s(e,["filteredReason"],i),e}function P1(t){const e={},n=a(t,["temperature"]);n!=null&&s(e,["temperature"],n);const i=a(t,["topK"]);i!=null&&s(e,["topK"],i);const l=a(t,["seed"]);l!=null&&s(e,["seed"],l);const o=a(t,["guidance"]);o!=null&&s(e,["guidance"],o);const r=a(t,["bpm"]);r!=null&&s(e,["bpm"],r);const u=a(t,["density"]);u!=null&&s(e,["density"],u);const c=a(t,["brightness"]);c!=null&&s(e,["brightness"],c);const f=a(t,["scale"]);f!=null&&s(e,["scale"],f);const d=a(t,["muteBass"]);d!=null&&s(e,["muteBass"],d);const m=a(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);const h=a(t,["onlyBassAndDrums"]);h!=null&&s(e,["onlyBassAndDrums"],h);const g=a(t,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function fg(t){const e={},n=a(t,["temperature"]);n!=null&&s(e,["temperature"],n);const i=a(t,["topK"]);i!=null&&s(e,["topK"],i);const l=a(t,["seed"]);l!=null&&s(e,["seed"],l);const o=a(t,["guidance"]);o!=null&&s(e,["guidance"],o);const r=a(t,["bpm"]);r!=null&&s(e,["bpm"],r);const u=a(t,["density"]);u!=null&&s(e,["density"],u);const c=a(t,["brightness"]);c!=null&&s(e,["brightness"],c);const f=a(t,["scale"]);f!=null&&s(e,["scale"],f);const d=a(t,["muteBass"]);d!=null&&s(e,["muteBass"],d);const m=a(t,["muteDrums"]);m!=null&&s(e,["muteDrums"],m);const h=a(t,["onlyBassAndDrums"]);h!=null&&s(e,["onlyBassAndDrums"],h);const g=a(t,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function F1(t){const e={},n=a(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>n1(l))),s(e,["audioChunks"],i)}return e}function J1(t){const e={};a(t,["setupComplete"])!=null&&s(e,["setupComplete"],Y1());const i=a(t,["serverContent"]);i!=null&&s(e,["serverContent"],F1(i));const l=a(t,["filteredPrompt"]);return l!=null&&s(e,["filteredPrompt"],B1(l)),e}function Y1(){return{}}function O1(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],fg(n)),e}function K1(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>mg(l))),s(e,["weightedPrompts"],i)}return e}function $1(t){const e={},n=a(t,["clientContent"]);n!=null&&s(e,["clientContent"],z1(n));const i=a(t,["musicGenerationConfig"]);return i!=null&&s(e,["musicGenerationConfig"],P1(i)),e}function X1(t){const e={},n=a(t,["media"]);if(n!=null){let f=Op(n);Array.isArray(f)&&(f=f.map(d=>d)),s(e,["mediaChunks"],f)}const i=a(t,["audio"]);i!=null&&s(e,["audio"],$p(i));const l=a(t,["audioStreamEnd"]);l!=null&&s(e,["audioStreamEnd"],l);const o=a(t,["video"]);o!=null&&s(e,["video"],Kp(o));const r=a(t,["text"]);return r!=null&&s(e,["text"],r),a(t,["activityStart"])!=null&&s(e,["activityStart"],jS()),a(t,["activityEnd"])!=null&&s(e,["activityEnd"],ZS()),e}function Q1(t){const e={},n=a(t,["media"]);if(n!=null){let f=Op(n);Array.isArray(f)&&(f=f.map(d=>d)),s(e,["mediaChunks"],f)}const i=a(t,["audio"]);i!=null&&s(e,["audio"],$p(i));const l=a(t,["audioStreamEnd"]);l!=null&&s(e,["audioStreamEnd"],l);const o=a(t,["video"]);o!=null&&s(e,["video"],Kp(o));const r=a(t,["text"]);return r!=null&&s(e,["text"],r),a(t,["activityStart"])!=null&&s(e,["activityStart"],e1()),a(t,["activityEnd"])!=null&&s(e,["activityEnd"],WS()),e}function Z1(t){const e={},n=a(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],d1(n));const i=a(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const l=a(t,["interrupted"]);l!=null&&s(e,["interrupted"],l);const o=a(t,["groundingMetadata"]);o!=null&&s(e,["groundingMetadata"],o);const r=a(t,["generationComplete"]);r!=null&&s(e,["generationComplete"],r);const u=a(t,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],Sd(u));const c=a(t,["outputTranscription"]);c!=null&&s(e,["outputTranscription"],Sd(c));const f=a(t,["urlContextMetadata"]);f!=null&&s(e,["urlContextMetadata"],UE(f));const d=a(t,["turnCompleteReason"]);d!=null&&s(e,["turnCompleteReason"],d);const m=a(t,["waitingForInput"]);return m!=null&&s(e,["waitingForInput"],m),e}function W1(t){const e={},n=a(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],m1(n));const i=a(t,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const l=a(t,["interrupted"]);l!=null&&s(e,["interrupted"],l);const o=a(t,["groundingMetadata"]);o!=null&&s(e,["groundingMetadata"],o);const r=a(t,["generationComplete"]);r!=null&&s(e,["generationComplete"],r);const u=a(t,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],Ed(u));const c=a(t,["outputTranscription"]);c!=null&&s(e,["outputTranscription"],Ed(c));const f=a(t,["turnCompleteReason"]);f!=null&&s(e,["turnCompleteReason"],f);const d=a(t,["waitingForInput"]);return d!=null&&s(e,["waitingForInput"],d),e}function j1(t){const e={},n=a(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function eE(t){const e={},n=a(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function tE(t){const e={};a(t,["setupComplete"])!=null&&s(e,["setupComplete"],oE());const i=a(t,["serverContent"]);i!=null&&s(e,["serverContent"],Z1(i));const l=a(t,["toolCall"]);l!=null&&s(e,["toolCall"],uE(l));const o=a(t,["toolCallCancellation"]);o!=null&&s(e,["toolCallCancellation"],sE(o));const r=a(t,["usageMetadata"]);r!=null&&s(e,["usageMetadata"],HE(r));const u=a(t,["goAway"]);u!=null&&s(e,["goAway"],j1(u));const c=a(t,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],iE(c)),e}function nE(t){const e={},n=a(t,["setupComplete"]);n!=null&&s(e,["setupComplete"],aE(n));const i=a(t,["serverContent"]);i!=null&&s(e,["serverContent"],W1(i));const l=a(t,["toolCall"]);l!=null&&s(e,["toolCall"],cE(l));const o=a(t,["toolCallCancellation"]);o!=null&&s(e,["toolCallCancellation"],rE(o));const r=a(t,["usageMetadata"]);r!=null&&s(e,["usageMetadata"],qE(r));const u=a(t,["goAway"]);u!=null&&s(e,["goAway"],eE(u));const c=a(t,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],lE(c)),e}function iE(t){const e={},n=a(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const i=a(t,["resumable"]);i!=null&&s(e,["resumable"],i);const l=a(t,["lastConsumedClientMessageIndex"]);return l!=null&&s(e,["lastConsumedClientMessageIndex"],l),e}function lE(t){const e={},n=a(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const i=a(t,["resumable"]);i!=null&&s(e,["resumable"],i);const l=a(t,["lastConsumedClientMessageIndex"]);return l!=null&&s(e,["lastConsumedClientMessageIndex"],l),e}function oE(){return{}}function aE(t){const e={},n=a(t,["sessionId"]);return n!=null&&s(e,["sessionId"],n),e}function sE(t){const e={},n=a(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function rE(t){const e={},n=a(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function uE(t){const e={},n=a(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>sg(l))),s(e,["functionCalls"],i)}return e}function cE(t){const e={},n=a(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>rg(l))),s(e,["functionCalls"],i)}return e}function mo(t){const e={},n=a(t,["modality"]);n!=null&&s(e,["modality"],n);const i=a(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function ho(t){const e={},n=a(t,["modality"]);n!=null&&s(e,["modality"],n);const i=a(t,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function fE(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>ME(l))),s(e,["speakerVoiceConfigs"],i)}return e}function dE(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],GE(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],a1(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],S1(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],sg(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function mE(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],zE(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],s1(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],E1(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],rg(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function hE(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],BE(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],r1(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],x1(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],_1(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function pE(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],PE(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],u1(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],A1(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],M1(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function gE(t){const e={},n=a(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function yE(t){const e={},n=a(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function vE(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function TE(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function CE(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],l1(n));const i=a(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const l=a(t,["turnCoverage"]);return l!=null&&s(e,["turnCoverage"],l),e}function SE(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],o1(n));const i=a(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const l=a(t,["turnCoverage"]);return l!=null&&s(e,["turnCoverage"],l),e}function EE(t){const e={},n=a(t,["handle"]);if(n!=null&&s(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xE(t){const e={},n=a(t,["handle"]);n!=null&&s(e,["handle"],n);const i=a(t,["transparent"]);return i!=null&&s(e,["transparent"],i),e}function AE(t){const e={},n=a(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function _E(t){const e={},n=a(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function ME(t){const e={},n=a(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=a(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],dg(i)),e}function NE(t){const e={},n=a(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],dg(n));const i=a(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],fE(i));const l=a(t,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function RE(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],FE(n)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function wE(t){const e={},n=a(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=a(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function DE(t){const e={},n=a(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=a(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function bE(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>N1(f))),s(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],I1(i));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&s(e,["googleSearchRetrieval"],D1(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&s(e,["urlContext"],VE());const r=a(t,["computerUse"]);r!=null&&s(e,["computerUse"],c1(r));const u=a(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function IE(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>R1(h))),s(e,["functionDeclarations"],m)}const i=a(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);const l=a(t,["googleSearch"]);l!=null&&s(e,["googleSearch"],U1(l));const o=a(t,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],b1(o));const r=a(t,["enterpriseWebSearch"]);r!=null&&s(e,["enterpriseWebSearch"],C1(r));const u=a(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],w1(u)),a(t,["urlContext"])!=null&&s(e,["urlContext"],LE());const f=a(t,["computerUse"]);f!=null&&s(e,["computerUse"],f1(f));const d=a(t,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function Sd(t){const e={},n=a(t,["text"]);n!=null&&s(e,["text"],n);const i=a(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function Ed(t){const e={},n=a(t,["text"]);n!=null&&s(e,["text"],n);const i=a(t,["finished"]);return i!=null&&s(e,["finished"],i),e}function UE(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>kE(l))),s(e,["urlMetadata"],i)}return e}function VE(){return{}}function LE(){return{}}function kE(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=a(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function HE(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const i=a(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const l=a(t,["responseTokenCount"]);l!=null&&s(e,["responseTokenCount"],l);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&s(e,["toolUsePromptTokenCount"],o);const r=a(t,["thoughtsTokenCount"]);r!=null&&s(e,["thoughtsTokenCount"],r);const u=a(t,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>mo(g))),s(e,["promptTokensDetails"],h)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>mo(g))),s(e,["cacheTokensDetails"],h)}const d=a(t,["responseTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>mo(g))),s(e,["responseTokensDetails"],h)}const m=a(t,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>mo(g))),s(e,["toolUsePromptTokensDetails"],h)}return e}function qE(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const i=a(t,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const l=a(t,["candidatesTokenCount"]);l!=null&&s(e,["responseTokenCount"],l);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&s(e,["toolUsePromptTokenCount"],o);const r=a(t,["thoughtsTokenCount"]);r!=null&&s(e,["thoughtsTokenCount"],r);const u=a(t,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(C=>ho(C))),s(e,["promptTokensDetails"],g)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(C=>ho(C))),s(e,["cacheTokensDetails"],g)}const d=a(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(C=>ho(C))),s(e,["responseTokensDetails"],g)}const m=a(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(C=>ho(C))),s(e,["toolUsePromptTokensDetails"],g)}const h=a(t,["trafficType"]);return h!=null&&s(e,["trafficType"],h),e}function GE(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function zE(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function BE(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function PE(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function dg(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],gE(n)),e}function FE(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],yE(n)),e}function JE(t){const e={},n=a(t,["text"]);n!=null&&s(e,["text"],n);const i=a(t,["weight"]);return i!=null&&s(e,["weight"],i),e}function mg(t){const e={},n=a(t,["text"]);n!=null&&s(e,["text"],n);const i=a(t,["weight"]);return i!=null&&s(e,["weight"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YE(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function OE(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],YE(n));const i=a(t,["authType"]);i!=null&&s(e,["authType"],i);const l=a(t,["googleServiceAccountConfig"]);l!=null&&s(e,["googleServiceAccountConfig"],l);const o=a(t,["httpBasicAuthConfig"]);o!=null&&s(e,["httpBasicAuthConfig"],o);const r=a(t,["oauthConfig"]);r!=null&&s(e,["oauthConfig"],r);const u=a(t,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function KE(t){const e={},n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function $E(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["data"]);i!=null&&s(e,["data"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function XE(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function QE(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["data"]);i!=null&&s(e,["data"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function ZE(t){const e={},n=a(t,["content"]);n!=null&&s(e,["content"],ux(n));const i=a(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],ex(i));const l=a(t,["tokenCount"]);l!=null&&s(e,["tokenCount"],l);const o=a(t,["finishReason"]);o!=null&&s(e,["finishReason"],o);const r=a(t,["urlContextMetadata"]);r!=null&&s(e,["urlContextMetadata"],w_(r));const u=a(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&s(e,["index"],f);const d=a(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const m=a(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function WE(t){const e={},n=a(t,["content"]);n!=null&&s(e,["content"],cx(n));const i=a(t,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],tx(i));const l=a(t,["finishMessage"]);l!=null&&s(e,["finishMessage"],l);const o=a(t,["finishReason"]);o!=null&&s(e,["finishReason"],o);const r=a(t,["urlContextMetadata"]);r!=null&&s(e,["urlContextMetadata"],D_(r));const u=a(t,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&s(e,["index"],f);const d=a(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const m=a(t,["safetyRatings"]);return m!=null&&s(e,["safetyRatings"],m),e}function jE(t){const e={},n=a(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const i=a(t,["epoch"]);i!=null&&s(e,["epoch"],i);const l=a(t,["step"]);return l!=null&&s(e,["step"],l),e}function ex(t){const e={},n=a(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function tx(t){const e={},n=a(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function nx(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);if(l!=null){let o=yt(l);Array.isArray(o)&&(o=o.map(r=>Oi(r))),s(n,["contents"],o)}return n}function ix(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["tokensInfo"]);return i!=null&&s(e,["tokensInfo"],i),e}function lx(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function ox(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function ax(t){const e={},n=a(t,["values"]);return n!=null&&s(e,["values"],n),e}function sx(t){const e={},n=a(t,["values"]);n!=null&&s(e,["values"],n);const i=a(t,["statistics"]);return i!=null&&s(e,["statistics"],rx(i)),e}function rx(t){const e={},n=a(t,["truncated"]);n!=null&&s(e,["truncated"],n);const i=a(t,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function ux(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>BA(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function cx(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>PA(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function ba(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>FA(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function Oi(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>JA(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function fx(t){const e={},n=a(t,["controlType"]);n!=null&&s(e,["controlType"],n);const i=a(t,["enableControlImageComputation"]);return i!=null&&s(e,["computeControl"],i),e}function dx(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function mx(t,e){const n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],Oi(Ge(i)));const l=a(t,["tools"]);if(e!==void 0&&l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>vg(u))),s(e,["tools"],r)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&s(e,["generationConfig"],o),n}function hx(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);if(l!=null){let r=yt(l);Array.isArray(r)&&(r=r.map(u=>ba(u))),s(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&dx(o),n}function px(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);if(l!=null){let r=yt(l);Array.isArray(r)&&(r=r.map(u=>Oi(u))),s(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&mx(o,n),n}function gx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);i!=null&&s(e,["totalTokens"],i);const l=a(t,["cachedContentTokenCount"]);return l!=null&&s(e,["cachedContentTokenCount"],l),e}function yx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);return i!=null&&s(e,["totalTokens"],i),e}function vx(t,e){const n={},i=a(e,["model"]);return i!=null&&s(n,["_url","name"],Z(t,i)),n}function Tx(t,e){const n={},i=a(e,["model"]);return i!=null&&s(n,["_url","name"],Z(t,i)),n}function Cx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function Sx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function Ex(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function xx(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Ax(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const l=a(t,["negativePrompt"]);e!==void 0&&l!=null&&s(e,["parameters","negativePrompt"],l);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const d=a(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const m=a(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&s(e,["parameters","includeRaiReason"],h);const g=a(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const C=a(t,["outputMimeType"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","mimeType"],C);const S=a(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&s(e,["parameters","outputOptions","compressionQuality"],S);const A=a(t,["addWatermark"]);e!==void 0&&A!=null&&s(e,["parameters","addWatermark"],A);const v=a(t,["editMode"]);e!==void 0&&v!=null&&s(e,["parameters","editMode"],v);const y=a(t,["baseSteps"]);return e!==void 0&&y!=null&&s(e,["parameters","editConfig","baseSteps"],y),n}function _x(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["prompt"]);l!=null&&s(n,["instances[0]","prompt"],l);const o=a(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>WA(c))),s(n,["instances[0]","referenceImages"],u)}const r=a(e,["config"]);return r!=null&&Ax(r,n),n}function Mx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>Ia(o))),s(e,["generatedImages"],l)}return e}function Nx(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);const l=a(t,["title"]);e!==void 0&&l!=null&&s(e,["requests[]","title"],l);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&s(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Rx(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);const l=a(t,["title"]);e!==void 0&&l!=null&&s(e,["instances[]","title"],l);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&s(e,["parameters","outputDimensionality"],o);const r=a(t,["mimeType"]);e!==void 0&&r!=null&&s(e,["instances[]","mimeType"],r);const u=a(t,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),n}function wx(){return{}}function Dx(t){const e={},n=a(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function bx(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);l!=null&&s(n,["requests[]","content"],Du(t,l));const o=a(e,["config"]);o!=null&&Nx(o,n);const r=a(e,["model"]);return r!==void 0&&s(n,["requests[]","model"],Z(t,r)),n}function Ix(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);l!=null&&s(n,["instances[]","content"],Du(t,l));const o=a(e,["config"]);return o!=null&&Rx(o,n),n}function Ux(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>ax(r))),s(e,["embeddings"],o)}return a(t,["metadata"])!=null&&s(e,["metadata"],wx()),e}function Vx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>sx(r))),s(e,["embeddings"],o)}const l=a(t,["metadata"]);return l!=null&&s(e,["metadata"],Dx(l)),e}function Lx(t){const e={},n=a(t,["endpoint"]);n!=null&&s(e,["name"],n);const i=a(t,["deployedModelId"]);return i!=null&&s(e,["deployedModelId"],i),e}function kx(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&s(e,["excludeDomains"],n),e}function Hx(t){const e={},n=a(t,["label"]);n!=null&&s(e,["label"],n);const i=a(t,["score"]);return i!=null&&s(e,["score"],i),e}function qx(t){const e={},n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Gx(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function zx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Bx(t){const e={},n=a(t,["displayName"]);n!=null&&s(e,["displayName"],n);const i=a(t,["fileUri"]);i!=null&&s(e,["fileUri"],i);const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Px(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function Fx(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function Jx(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function Yx(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function Ox(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Kx(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function $x(t){const e={},n=a(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=a(t,["description"]);i!=null&&s(e,["description"],i);const l=a(t,["name"]);l!=null&&s(e,["name"],l);const o=a(t,["parameters"]);o!=null&&s(e,["parameters"],o);const r=a(t,["parametersJsonSchema"]);r!=null&&s(e,["parametersJsonSchema"],r);const u=a(t,["response"]);u!=null&&s(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Xx(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&s(e,["description"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["parameters"]);l!=null&&s(e,["parameters"],l);const o=a(t,["parametersJsonSchema"]);o!=null&&s(e,["parametersJsonSchema"],o);const r=a(t,["response"]);r!=null&&s(e,["response"],r);const u=a(t,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Qx(t,e,n){const i={},l=a(e,["systemInstruction"]);n!==void 0&&l!=null&&s(n,["systemInstruction"],ba(Ge(l)));const o=a(e,["temperature"]);o!=null&&s(i,["temperature"],o);const r=a(e,["topP"]);r!=null&&s(i,["topP"],r);const u=a(e,["topK"]);u!=null&&s(i,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&s(i,["maxOutputTokens"],f);const d=a(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const m=a(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);const h=a(e,["logprobs"]);h!=null&&s(i,["logprobs"],h);const g=a(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const C=a(e,["frequencyPenalty"]);C!=null&&s(i,["frequencyPenalty"],C);const S=a(e,["seed"]);S!=null&&s(i,["seed"],S);const A=a(e,["responseMimeType"]);A!=null&&s(i,["responseMimeType"],A);const v=a(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],i_(bu(v)));const y=a(e,["responseJsonSchema"]);if(y!=null&&s(i,["responseJsonSchema"],y),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=a(e,["safetySettings"]);if(n!==void 0&&T!=null){let V=T;Array.isArray(V)&&(V=V.map(Q=>t_(Q))),s(n,["safetySettings"],V)}const E=a(e,["tools"]);if(n!==void 0&&E!=null){let V=Ji(E);Array.isArray(V)&&(V=V.map(Q=>T_(Fi(Q)))),s(n,["tools"],V)}const M=a(e,["toolConfig"]);if(n!==void 0&&M!=null&&s(n,["toolConfig"],y_(M)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=a(e,["cachedContent"]);n!==void 0&&_!=null&&s(n,["cachedContent"],Xt(t,_));const x=a(e,["responseModalities"]);x!=null&&s(i,["responseModalities"],x);const b=a(e,["mediaResolution"]);b!=null&&s(i,["mediaResolution"],b);const D=a(e,["speechConfig"]);if(D!=null&&s(i,["speechConfig"],f_(Iu(D))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=a(e,["thinkingConfig"]);I!=null&&s(i,["thinkingConfig"],p_(I));const J=a(e,["imageConfig"]);return J!=null&&s(i,["imageConfig"],_A(J)),i}function Zx(t,e,n){const i={},l=a(e,["systemInstruction"]);n!==void 0&&l!=null&&s(n,["systemInstruction"],Oi(Ge(l)));const o=a(e,["temperature"]);o!=null&&s(i,["temperature"],o);const r=a(e,["topP"]);r!=null&&s(i,["topP"],r);const u=a(e,["topK"]);u!=null&&s(i,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&s(i,["maxOutputTokens"],f);const d=a(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const m=a(e,["responseLogprobs"]);m!=null&&s(i,["responseLogprobs"],m);const h=a(e,["logprobs"]);h!=null&&s(i,["logprobs"],h);const g=a(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const C=a(e,["frequencyPenalty"]);C!=null&&s(i,["frequencyPenalty"],C);const S=a(e,["seed"]);S!=null&&s(i,["seed"],S);const A=a(e,["responseMimeType"]);A!=null&&s(i,["responseMimeType"],A);const v=a(e,["responseSchema"]);v!=null&&s(i,["responseSchema"],l_(bu(v)));const y=a(e,["responseJsonSchema"]);y!=null&&s(i,["responseJsonSchema"],y);const T=a(e,["routingConfig"]);T!=null&&s(i,["routingConfig"],T);const E=a(e,["modelSelectionConfig"]);E!=null&&s(i,["modelConfig"],GA(E));const M=a(e,["safetySettings"]);if(n!==void 0&&M!=null){let w=M;Array.isArray(w)&&(w=w.map(U=>n_(U))),s(n,["safetySettings"],w)}const _=a(e,["tools"]);if(n!==void 0&&_!=null){let w=Ji(_);Array.isArray(w)&&(w=w.map(U=>vg(Fi(U)))),s(n,["tools"],w)}const x=a(e,["toolConfig"]);n!==void 0&&x!=null&&s(n,["toolConfig"],v_(x));const b=a(e,["labels"]);n!==void 0&&b!=null&&s(n,["labels"],b);const D=a(e,["cachedContent"]);n!==void 0&&D!=null&&s(n,["cachedContent"],Xt(t,D));const I=a(e,["responseModalities"]);I!=null&&s(i,["responseModalities"],I);const J=a(e,["mediaResolution"]);J!=null&&s(i,["mediaResolution"],J);const V=a(e,["speechConfig"]);V!=null&&s(i,["speechConfig"],d_(Iu(V)));const Q=a(e,["audioTimestamp"]);Q!=null&&s(i,["audioTimestamp"],Q);const ne=a(e,["thinkingConfig"]);ne!=null&&s(i,["thinkingConfig"],g_(ne));const H=a(e,["imageConfig"]);return H!=null&&s(i,["imageConfig"],MA(H)),i}function xd(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);if(l!=null){let r=yt(l);Array.isArray(r)&&(r=r.map(u=>ba(u))),s(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&s(n,["generationConfig"],Qx(t,o,n)),n}function Ad(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["contents"]);if(l!=null){let r=yt(l);Array.isArray(r)&&(r=r.map(u=>Oi(u))),s(n,["contents"],r)}const o=a(e,["config"]);return o!=null&&s(n,["generationConfig"],Zx(t,o,n)),n}function _d(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>ZE(f))),s(e,["candidates"],c)}const l=a(t,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const o=a(t,["promptFeedback"]);o!=null&&s(e,["promptFeedback"],o);const r=a(t,["responseId"]);r!=null&&s(e,["responseId"],r);const u=a(t,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Md(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>WE(d))),s(e,["candidates"],f)}const l=a(t,["createTime"]);l!=null&&s(e,["createTime"],l);const o=a(t,["modelVersion"]);o!=null&&s(e,["modelVersion"],o);const r=a(t,["promptFeedback"]);r!=null&&s(e,["promptFeedback"],r);const u=a(t,["responseId"]);u!=null&&s(e,["responseId"],u);const c=a(t,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Wx(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&s(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&s(e,["parameters","safetySetting"],r);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&s(e,["parameters","includeRaiReason"],f);const d=a(t,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","mimeType"],m);const h=a(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&s(e,["parameters","outputOptions","compressionQuality"],h),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=a(t,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function jx(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const l=a(t,["negativePrompt"]);e!==void 0&&l!=null&&s(e,["parameters","negativePrompt"],l);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const d=a(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const m=a(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&s(e,["parameters","includeSafetyAttributes"],m);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&s(e,["parameters","includeRaiReason"],h);const g=a(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const C=a(t,["outputMimeType"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","mimeType"],C);const S=a(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&s(e,["parameters","outputOptions","compressionQuality"],S);const A=a(t,["addWatermark"]);e!==void 0&&A!=null&&s(e,["parameters","addWatermark"],A);const v=a(t,["imageSize"]);e!==void 0&&v!=null&&s(e,["parameters","sampleImageSize"],v);const y=a(t,["enhancePrompt"]);return e!==void 0&&y!=null&&s(e,["parameters","enhancePrompt"],y),n}function eA(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["prompt"]);l!=null&&s(n,["instances[0]","prompt"],l);const o=a(e,["config"]);return o!=null&&Wx(o,n),n}function tA(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["prompt"]);l!=null&&s(n,["instances[0]","prompt"],l);const o=a(e,["config"]);return o!=null&&jx(o,n),n}function nA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>hA(r))),s(e,["generatedImages"],o)}const l=a(t,["positivePromptSafetyAttributes"]);return l!=null&&s(e,["positivePromptSafetyAttributes"],gg(l)),e}function iA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Ia(r))),s(e,["generatedImages"],o)}const l=a(t,["positivePromptSafetyAttributes"]);return l!=null&&s(e,["positivePromptSafetyAttributes"],yg(l)),e}function lA(t,e){const n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=a(t,["durationSeconds"]);if(e!==void 0&&l!=null&&s(e,["parameters","durationSeconds"],l),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&s(e,["parameters","aspectRatio"],o);const r=a(t,["resolution"]);e!==void 0&&r!=null&&s(e,["parameters","resolution"],r);const u=a(t,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&s(e,["parameters","negativePrompt"],c);const f=a(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&s(e,["parameters","enhancePrompt"],f),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(a(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(a(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function oA(t,e){const n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const l=a(t,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const o=a(t,["fps"]);e!==void 0&&o!=null&&s(e,["parameters","fps"],o);const r=a(t,["durationSeconds"]);e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r);const u=a(t,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const f=a(t,["resolution"]);e!==void 0&&f!=null&&s(e,["parameters","resolution"],f);const d=a(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const m=a(t,["pubsubTopic"]);e!==void 0&&m!=null&&s(e,["parameters","pubsubTopic"],m);const h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&s(e,["parameters","negativePrompt"],h);const g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const C=a(t,["generateAudio"]);e!==void 0&&C!=null&&s(e,["parameters","generateAudio"],C);const S=a(t,["lastFrame"]);e!==void 0&&S!=null&&s(e,["instances[0]","lastFrame"],Et(S));const A=a(t,["referenceImages"]);if(e!==void 0&&A!=null){let T=A;Array.isArray(T)&&(T=T.map(E=>q_(E))),s(e,["instances[0]","referenceImages"],T)}const v=a(t,["mask"]);e!==void 0&&v!=null&&s(e,["instances[0]","mask"],H_(v));const y=a(t,["compressionQuality"]);return e!==void 0&&y!=null&&s(e,["parameters","compressionQuality"],y),n}function aA(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=a(t,["done"]);l!=null&&s(e,["done"],l);const o=a(t,["error"]);o!=null&&s(e,["error"],o);const r=a(t,["response","generateVideoResponse"]);return r!=null&&s(e,["response"],cA(r)),e}function sA(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["metadata"]);i!=null&&s(e,["metadata"],i);const l=a(t,["done"]);l!=null&&s(e,["done"],l);const o=a(t,["error"]);o!=null&&s(e,["error"],o);const r=a(t,["response"]);return r!=null&&s(e,["response"],fA(r)),e}function rA(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["prompt"]);l!=null&&s(n,["instances[0]","prompt"],l);const o=a(e,["image"]);if(o!=null&&s(n,["instances[0]","image"],pg(o)),a(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const r=a(e,["source"]);r!=null&&dA(r,n);const u=a(e,["config"]);return u!=null&&lA(u,n),n}function uA(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["prompt"]);l!=null&&s(n,["instances[0]","prompt"],l);const o=a(e,["image"]);o!=null&&s(n,["instances[0]","image"],Et(o));const r=a(e,["video"]);r!=null&&s(n,["instances[0]","video"],Tg(r));const u=a(e,["source"]);u!=null&&mA(u,n);const c=a(e,["config"]);return c!=null&&oA(c,n),n}function cA(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>gA(r))),s(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function fA(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>yA(r))),s(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function dA(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const l=a(t,["image"]);if(e!==void 0&&l!=null&&s(e,["instances[0]","image"],pg(l)),a(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function mA(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const l=a(t,["image"]);e!==void 0&&l!=null&&s(e,["instances[0]","image"],Et(l));const o=a(t,["video"]);return e!==void 0&&o!=null&&s(e,["instances[0]","video"],Tg(o)),n}function hA(t){const e={},n=a(t,["_self"]);n!=null&&s(e,["image"],NA(n));const i=a(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const l=a(t,["_self"]);return l!=null&&s(e,["safetyAttributes"],gg(l)),e}function Ia(t){const e={},n=a(t,["_self"]);n!=null&&s(e,["image"],hg(n));const i=a(t,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const l=a(t,["_self"]);l!=null&&s(e,["safetyAttributes"],yg(l));const o=a(t,["prompt"]);return o!=null&&s(e,["enhancedPrompt"],o),e}function pA(t){const e={},n=a(t,["_self"]);n!=null&&s(e,["mask"],hg(n));const i=a(t,["labels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>Hx(o))),s(e,["labels"],l)}return e}function gA(t){const e={},n=a(t,["_self"]);return n!=null&&s(e,["video"],L_(n)),e}function yA(t){const e={},n=a(t,["_self"]);return n!=null&&s(e,["video"],k_(n)),e}function vA(t,e){const n={},i=a(e,["model"]);return i!=null&&s(n,["_url","name"],Z(t,i)),n}function TA(t,e){const n={},i=a(e,["model"]);return i!=null&&s(n,["_url","name"],Z(t,i)),n}function CA(t){const e={},n=a(t,["authConfig"]);return n!=null&&s(e,["authConfig"],OE(n)),e}function SA(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ex(n)),e}function EA(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],xx(n)),e}function xA(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],RA(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function AA(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&s(e,["timeRangeFilter"],wA(n));const i=a(t,["excludeDomains"]);return i!=null&&s(e,["excludeDomains"],i),e}function _A(t){const e={},n=a(t,["aspectRatio"]);return n!=null&&s(e,["aspectRatio"],n),e}function MA(t){const e={},n=a(t,["aspectRatio"]);return n!=null&&s(e,["aspectRatio"],n),e}function NA(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],On(n));const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function hg(t){const e={},n=a(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],On(i));const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function pg(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],On(n));const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Et(t){const e={},n=a(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const i=a(t,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],On(i));const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function RA(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function wA(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function DA(t){const e={},n=a(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=a(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function bA(t){const e={},n=a(t,["latitude"]);n!=null&&s(e,["latitude"],n);const i=a(t,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function IA(t,e,n){const i={},l=a(e,["pageSize"]);n!==void 0&&l!=null&&s(n,["_query","pageSize"],l);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&s(n,["_query","pageToken"],o);const r=a(e,["filter"]);n!==void 0&&r!=null&&s(n,["_query","filter"],r);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&s(n,["_url","models_url"],Wp(t,u)),i}function UA(t,e,n){const i={},l=a(e,["pageSize"]);n!==void 0&&l!=null&&s(n,["_query","pageSize"],l);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&s(n,["_query","pageToken"],o);const r=a(e,["filter"]);n!==void 0&&r!=null&&s(n,["_query","filter"],r);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&s(n,["_url","models_url"],Wp(t,u)),i}function VA(t,e){const n={},i=a(e,["config"]);return i!=null&&IA(t,i,n),n}function LA(t,e){const n={},i=a(e,["config"]);return i!=null&&UA(t,i,n),n}function kA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["_self"]);if(l!=null){let o=jp(l);Array.isArray(o)&&(o=o.map(r=>Ar(r))),s(e,["models"],o)}return e}function HA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["_self"]);if(l!=null){let o=jp(l);Array.isArray(o)&&(o=o.map(r=>_r(r))),s(e,["models"],o)}return e}function qA(t){const e={},n=a(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);const i=a(t,["segmentationClasses"]);i!=null&&s(e,["maskClasses"],i);const l=a(t,["maskDilation"]);return l!=null&&s(e,["dilation"],l),e}function Ar(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["description"]);l!=null&&s(e,["description"],l);const o=a(t,["version"]);o!=null&&s(e,["version"],o);const r=a(t,["_self"]);r!=null&&s(e,["tunedModelInfo"],C_(r));const u=a(t,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const c=a(t,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const f=a(t,["supportedGenerationMethods"]);return f!=null&&s(e,["supportedActions"],f),e}function _r(t){const e={},n=a(t,["name"]);n!=null&&s(e,["name"],n);const i=a(t,["displayName"]);i!=null&&s(e,["displayName"],i);const l=a(t,["description"]);l!=null&&s(e,["description"],l);const o=a(t,["versionId"]);o!=null&&s(e,["version"],o);const r=a(t,["deployedModels"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(h=>Lx(h))),s(e,["endpoints"],m)}const u=a(t,["labels"]);u!=null&&s(e,["labels"],u);const c=a(t,["_self"]);c!=null&&s(e,["tunedModelInfo"],S_(c));const f=a(t,["defaultCheckpointId"]);f!=null&&s(e,["defaultCheckpointId"],f);const d=a(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>jE(h))),s(e,["checkpoints"],m)}return e}function GA(t){const e={},n=a(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function zA(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>c_(l))),s(e,["speakerVoiceConfigs"],i)}return e}function BA(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],G_(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],KE(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],qx(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],Px(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function PA(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],z_(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],$E(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],Gx(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],Fx(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function FA(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],B_(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],XE(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],zx(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],Jx(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function JA(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],P_(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],QE(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],Bx(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],Yx(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function YA(t){const e={},n=a(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function OA(t){const e={},n=a(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function KA(t){const e={},n=a(t,["productImage"]);return n!=null&&s(e,["image"],Et(n)),e}function $A(t,e){const n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const l=a(t,["baseSteps"]);e!==void 0&&l!=null&&s(e,["parameters","editConfig","baseSteps"],l);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=a(t,["seed"]);e!==void 0&&r!=null&&s(e,["parameters","seed"],r);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const f=a(t,["addWatermark"]);e!==void 0&&f!=null&&s(e,["parameters","addWatermark"],f);const d=a(t,["outputMimeType"]);e!==void 0&&d!=null&&s(e,["parameters","outputOptions","mimeType"],d);const m=a(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m);const h=a(t,["enhancePrompt"]);return e!==void 0&&h!=null&&s(e,["parameters","enhancePrompt"],h),n}function XA(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["source"]);l!=null&&ZA(l,n);const o=a(e,["config"]);return o!=null&&$A(o,n),n}function QA(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>Ia(l))),s(e,["generatedImages"],i)}return e}function ZA(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const l=a(t,["personImage"]);e!==void 0&&l!=null&&s(e,["instances[0]","personImage","image"],Et(l));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>KA(u))),s(e,["instances[0]","productImages"],r)}return n}function WA(t){const e={},n=a(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],Et(n));const i=a(t,["referenceId"]);i!=null&&s(e,["referenceId"],i);const l=a(t,["referenceType"]);l!=null&&s(e,["referenceType"],l);const o=a(t,["maskImageConfig"]);o!=null&&s(e,["maskImageConfig"],qA(o));const r=a(t,["controlImageConfig"]);r!=null&&s(e,["controlImageConfig"],fx(r));const u=a(t,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],m_(u));const c=a(t,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],h_(c)),e}function jA(t){const e={},n=a(t,["latLng"]);n!=null&&s(e,["latLng"],DA(n));const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function e_(t){const e={},n=a(t,["latLng"]);n!=null&&s(e,["latLng"],bA(n));const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function gg(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const l=a(t,["contentType"]);return l!=null&&s(e,["contentType"],l),e}function yg(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const l=a(t,["contentType"]);return l!=null&&s(e,["contentType"],l),e}function t_(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&s(e,["category"],n);const i=a(t,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function n_(t){const e={},n=a(t,["method"]);n!=null&&s(e,["method"],n);const i=a(t,["category"]);i!=null&&s(e,["category"],i);const l=a(t,["threshold"]);return l!=null&&s(e,["threshold"],l),e}function i_(t){const e={},n=a(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=a(t,["default"]);i!=null&&s(e,["default"],i);const l=a(t,["description"]);l!=null&&s(e,["description"],l);const o=a(t,["enum"]);o!=null&&s(e,["enum"],o);const r=a(t,["example"]);r!=null&&s(e,["example"],r);const u=a(t,["format"]);u!=null&&s(e,["format"],u);const c=a(t,["items"]);c!=null&&s(e,["items"],c);const f=a(t,["maxItems"]);f!=null&&s(e,["maxItems"],f);const d=a(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const m=a(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const h=a(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=a(t,["minItems"]);g!=null&&s(e,["minItems"],g);const C=a(t,["minLength"]);C!=null&&s(e,["minLength"],C);const S=a(t,["minProperties"]);S!=null&&s(e,["minProperties"],S);const A=a(t,["minimum"]);A!=null&&s(e,["minimum"],A);const v=a(t,["nullable"]);v!=null&&s(e,["nullable"],v);const y=a(t,["pattern"]);y!=null&&s(e,["pattern"],y);const T=a(t,["properties"]);T!=null&&s(e,["properties"],T);const E=a(t,["propertyOrdering"]);E!=null&&s(e,["propertyOrdering"],E);const M=a(t,["required"]);M!=null&&s(e,["required"],M);const _=a(t,["title"]);_!=null&&s(e,["title"],_);const x=a(t,["type"]);return x!=null&&s(e,["type"],x),e}function l_(t){const e={},n=a(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const i=a(t,["default"]);i!=null&&s(e,["default"],i);const l=a(t,["description"]);l!=null&&s(e,["description"],l);const o=a(t,["enum"]);o!=null&&s(e,["enum"],o);const r=a(t,["example"]);r!=null&&s(e,["example"],r);const u=a(t,["format"]);u!=null&&s(e,["format"],u);const c=a(t,["items"]);c!=null&&s(e,["items"],c);const f=a(t,["maxItems"]);f!=null&&s(e,["maxItems"],f);const d=a(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const m=a(t,["maxProperties"]);m!=null&&s(e,["maxProperties"],m);const h=a(t,["maximum"]);h!=null&&s(e,["maximum"],h);const g=a(t,["minItems"]);g!=null&&s(e,["minItems"],g);const C=a(t,["minLength"]);C!=null&&s(e,["minLength"],C);const S=a(t,["minProperties"]);S!=null&&s(e,["minProperties"],S);const A=a(t,["minimum"]);A!=null&&s(e,["minimum"],A);const v=a(t,["nullable"]);v!=null&&s(e,["nullable"],v);const y=a(t,["pattern"]);y!=null&&s(e,["pattern"],y);const T=a(t,["properties"]);T!=null&&s(e,["properties"],T);const E=a(t,["propertyOrdering"]);E!=null&&s(e,["propertyOrdering"],E);const M=a(t,["required"]);M!=null&&s(e,["required"],M);const _=a(t,["title"]);_!=null&&s(e,["title"],_);const x=a(t,["type"]);return x!=null&&s(e,["type"],x),e}function o_(t){const e={},n=a(t,["image"]);return n!=null&&s(e,["image"],Et(n)),e}function a_(t,e){const n={},i=a(t,["mode"]);e!==void 0&&i!=null&&s(e,["parameters","mode"],i);const l=a(t,["maxPredictions"]);e!==void 0&&l!=null&&s(e,["parameters","maxPredictions"],l);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&s(e,["parameters","confidenceThreshold"],o);const r=a(t,["maskDilation"]);e!==void 0&&r!=null&&s(e,["parameters","maskDilation"],r);const u=a(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u),n}function s_(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["source"]);l!=null&&u_(l,n);const o=a(e,["config"]);return o!=null&&a_(o,n),n}function r_(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>pA(l))),s(e,["generatedMasks"],i)}return e}function u_(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const l=a(t,["image"]);e!==void 0&&l!=null&&s(e,["instances[0]","image"],Et(l));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&s(e,["instances[0]","scribble"],o_(o)),n}function c_(t){const e={},n=a(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=a(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],Cg(i)),e}function f_(t){const e={},n=a(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Cg(n));const i=a(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],zA(i));const l=a(t,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function d_(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],F_(n)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=a(t,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function m_(t){const e={},n=a(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function h_(t){const e={},n=a(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);const i=a(t,["subjectDescription"]);return i!=null&&s(e,["subjectDescription"],i),e}function p_(t){const e={},n=a(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=a(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function g_(t){const e={},n=a(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=a(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function y_(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Ox(n));const i=a(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],jA(i)),e}function v_(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Kx(n));const i=a(t,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],e_(i)),e}function T_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>$x(f))),s(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],xA(i));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&s(e,["googleSearchRetrieval"],SA(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&s(e,["urlContext"],b_());const r=a(t,["computerUse"]);r!=null&&s(e,["computerUse"],lx(r));const u=a(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function vg(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(h=>Xx(h))),s(e,["functionDeclarations"],m)}const i=a(t,["retrieval"]);i!=null&&s(e,["retrieval"],i);const l=a(t,["googleSearch"]);l!=null&&s(e,["googleSearch"],AA(l));const o=a(t,["googleSearchRetrieval"]);o!=null&&s(e,["googleSearchRetrieval"],EA(o));const r=a(t,["enterpriseWebSearch"]);r!=null&&s(e,["enterpriseWebSearch"],kx(r));const u=a(t,["googleMaps"]);u!=null&&s(e,["googleMaps"],CA(u)),a(t,["urlContext"])!=null&&s(e,["urlContext"],I_());const f=a(t,["computerUse"]);f!=null&&s(e,["computerUse"],ox(f));const d=a(t,["codeExecution"]);return d!=null&&s(e,["codeExecution"],d),e}function C_(t){const e={},n=a(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&s(e,["createTime"],i);const l=a(t,["updateTime"]);return l!=null&&s(e,["updateTime"],l),e}function S_(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&s(e,["createTime"],i);const l=a(t,["updateTime"]);return l!=null&&s(e,["updateTime"],l),e}function E_(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const l=a(t,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&s(e,["defaultCheckpointId"],o),n}function x_(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const l=a(t,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&s(e,["defaultCheckpointId"],o),n}function A_(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","name"],Z(t,i));const l=a(e,["config"]);return l!=null&&E_(l,n),n}function __(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["config"]);return l!=null&&x_(l,n),n}function M_(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const l=a(t,["includeRaiReason"]);e!==void 0&&l!=null&&s(e,["parameters","includeRaiReason"],l);const o=a(t,["outputMimeType"]);e!==void 0&&o!=null&&s(e,["parameters","outputOptions","mimeType"],o);const r=a(t,["outputCompressionQuality"]);e!==void 0&&r!=null&&s(e,["parameters","outputOptions","compressionQuality"],r);const u=a(t,["enhanceInputImage"]);e!==void 0&&u!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=a(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=a(t,["numberOfImages"]);e!==void 0&&f!=null&&s(e,["parameters","sampleCount"],f);const d=a(t,["mode"]);return e!==void 0&&d!=null&&s(e,["parameters","mode"],d),n}function N_(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["_url","model"],Z(t,i));const l=a(e,["image"]);l!=null&&s(n,["instances[0]","image"],Et(l));const o=a(e,["upscaleFactor"]);o!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],o);const r=a(e,["config"]);return r!=null&&M_(r,n),n}function R_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(o=>Ia(o))),s(e,["generatedImages"],l)}return e}function w_(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>U_(l))),s(e,["urlMetadata"],i)}return e}function D_(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>V_(l))),s(e,["urlMetadata"],i)}return e}function b_(){return{}}function I_(){return{}}function U_(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=a(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function V_(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const i=a(t,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function L_(t){const e={},n=a(t,["video","uri"]);n!=null&&s(e,["uri"],n);const i=a(t,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],On(i));const l=a(t,["encoding"]);return l!=null&&s(e,["mimeType"],l),e}function k_(t){const e={},n=a(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],On(i));const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function H_(t){const e={},n=a(t,["image"]);n!=null&&s(e,["_self"],Et(n));const i=a(t,["maskMode"]);return i!=null&&s(e,["maskMode"],i),e}function q_(t){const e={},n=a(t,["image"]);n!=null&&s(e,["image"],Et(n));const i=a(t,["referenceType"]);return i!=null&&s(e,["referenceType"],i),e}function G_(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function z_(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function B_(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function P_(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function Tg(t){const e={},n=a(t,["uri"]);n!=null&&s(e,["gcsUri"],n);const i=a(t,["videoBytes"]);i!=null&&s(e,["bytesBase64Encoded"],On(i));const l=a(t,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Cg(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],YA(n)),e}function F_(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],OA(n)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J_="Content-Type",Y_="X-Server-Timeout",O_="User-Agent",Mr="x-goog-api-client",K_="1.22.0",$_=`google-genai-sdk/${K_}`,X_="v1beta1",Q_="v1beta",Nd=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Z_{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:X_,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Q_,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const l=[this.getRequestUrlInternal(n)];return i&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[r,u]of Object.entries(e.queryParams))l.searchParams.append(r,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(l,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[l,o]of Object.entries(n))typeof o=="object"?i[l]=Object.assign(Object.assign({},i[l]),o):o!==void 0&&(i[l]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,n,i);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(l,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const l=new AbortController,o=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const r=setTimeout(()=>l.abort(),n.timeout);r&&typeof r.unref=="function"&&r.unref()}i&&i.addEventListener("abort",()=>{l.abort()}),e.signal=o}return n&&n.extraBody!==null&&W_(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async l=>(await Rd(l),new Tr(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async l=>(await Rd(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){var n;return Si(this,arguments,function*(){const l=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let r="";for(;;){const{done:u,value:c}=yield fe(l.read());if(u){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const m=JSON.parse(f);if("error"in m){const h=JSON.parse(JSON.stringify(m.error)),g=h.status,C=h.code,S=`got status: ${g}. ${JSON.stringify(m)}`;if(C>=400&&C<600)throw new Da({message:S,status:C})}}catch(m){if(m.name==="ApiError")throw m}r+=f;let d=r.match(Nd);for(;d;){const m=d[1];try{const h=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield fe(new Tr(h)),r=r.slice(d[0].length),d=r.match(Nd)}catch(h){throw new Error(`exception parsing stream chunk ${m}. ${h}`)}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=$_+" "+this.clientOptions.userAgentExtra;return e[O_]=n,e[Mr]=n,e[J_]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,l]of Object.entries(e.headers))n.append(i,l);e.timeout&&e.timeout>0&&n.append(Y_,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const o=this.clientOptions.uploader,r=await o.stat(e);l.sizeBytes=String(r.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=u;const c=await this.fetchUploadUrl(l,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let l={};n!=null&&n.httpOptions?l=n.httpOptions:l={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},r=await this.request({path:k("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!r||!(r!=null&&r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=r==null?void 0:r.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Rd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(i);throw n>=400&&n<600?new Da({message:l,status:n}):new Error(l)}}function W_(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,r){const u=Object.assign({},o);for(const c in r)if(Object.prototype.hasOwnProperty.call(r,c)){const f=r[c],d=u[c];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?u[c]=i(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),u[c]=f)}return u}const l=i(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j_="mcp_used/unknown";let eM=!1;function Sg(t){for(const e of t)if(tM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return eM}function Eg(t){var e;const n=(e=t[Mr])!==null&&e!==void 0?e:"";t[Mr]=(n+` ${j_}`).trimStart()}function tM(t){return t!==null&&typeof t=="object"&&t instanceof Lu}function nM(t,e=100){return Si(this,arguments,function*(){let i,l=0;for(;l<e;){const o=yield fe(t.listTools({cursor:i}));for(const r of o.tools)yield yield fe(r),l++;if(!o.nextCursor)break;i=o.nextCursor}})}class Lu{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Lu(e,n)}async initialize(){var e,n,i,l;if(this.mcpTools.length>0)return;const o={},r=[];for(const d of this.mcpClients)try{for(var u=!0,c=(n=void 0,Sl(nM(d))),f;f=await c.next(),e=f.done,!e;u=!0){l=f.value,u=!1;const m=l;r.push(m);const h=m.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=d}}catch(m){n={error:m}}finally{try{!u&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),dT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const r=await l.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iM(t,e,n){const i=new lT;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data);const o=J1(l);Object.assign(i,o),e(i)}class lM{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),r=sM(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${l}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const d=new Promise(T=>{f=T}),m=e.callbacks,h=function(){f({})},g=this.apiClient,C={onopen:h,onmessage:T=>{iM(g,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(T){}},S=this.webSocketFactory.create(c,aM(r),C);S.connect(),await d;const A=Z(this.apiClient,e.model),v=cg({model:A}),y=xr({setup:v});return S.send(JSON.stringify(y)),new oM(S,this.apiClient)}}class oM{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=K1(e),i=ug(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=O1(e),i=xr(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=xr({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(di.PLAY)}pause(){this.sendPlaybackControl(di.PAUSE)}stop(){this.sendPlaybackControl(di.STOP)}resetContext(){this.sendPlaybackControl(di.RESET_CONTEXT)}close(){this.conn.close()}}function aM(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function sM(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function uM(t,e,n){const i=new iT;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const o=JSON.parse(l);if(t.isVertexAI()){const r=nE(o);Object.assign(i,r)}else{const r=tE(o);Object.assign(i,r)}e(i)}class cM{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new lM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,l,o,r,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&Sg(e.config.tools)&&Eg(m);const h=hM(m);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const D=this.apiClient.getApiKey();let I="BidiGenerateContent",J="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",J="access_token"),d=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${I}?${J}=${D}`}let g=()=>{};const C=new Promise(D=>{g=D}),S=e.callbacks,A=function(){var D;(D=S==null?void 0:S.onopen)===null||D===void 0||D.call(S),g({})},v=this.apiClient,y={onopen:A,onmessage:D=>{uM(v,S.onmessage,D)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=S==null?void 0:S.onclose)!==null&&i!==void 0?i:function(D){}},T=this.webSocketFactory.create(d,mM(h),y);T.connect(),await C;let E=Z(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const D=this.apiClient.getProject(),I=this.apiClient.getLocation();E=`projects/${D}/locations/${I}/`+E}let M={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Vi.AUDIO]}:e.config.responseModalities=[Vi.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(u=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&u!==void 0?u:[],x=[];for(const D of _)if(this.isCallableTool(D)){const I=D;x.push(await I.tool())}else x.push(D);x.length>0&&(e.config.tools=x);const b={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=G1(this.apiClient,b):M=q1(this.apiClient,b),delete M.config,T.send(JSON.stringify(M)),new dM(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const fM={turnComplete:!0};class dM{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=yt(n.turns),e.isVertexAI()?i=i.map(l=>Oi(l)):i=i.map(l=>ba(l))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(rM)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},fM),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Q1(e)}:n={realtimeInput:X1(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function mM(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function hM(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wd=10;function Dd(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const r of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ei(r)){l=!0;break}if(!l)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ei(t){return"callTool"in t&&typeof t.callTool=="function"}function pM(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>Ei(l)))!==null&&i!==void 0?i:!1}function gM(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>!Ei(l)))!==null&&i!==void 0?i:!1}function bd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yM extends Yn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,l,o,r,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!pM(n)||Dd(n.config))return await this.generateContentInternal(c);if(gM(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,d;const m=yt(c.contents),h=(o=(l=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&o!==void 0?o:wd;let g=0;for(;g<h&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const C=f.candidates[0].content,S=[];for(const A of(u=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&u!==void 0?u:[])if(Ei(A)){const y=await A.callTool(f.functionCalls);S.push(...y)}g++,d={role:"user",parts:S},c.contents=yt(c.contents),c.contents.push(C),c.contents.push(d),bd(c.config)&&(m.push(C),m.push(d))}return bd(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Dd(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var l;let o;const r=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((l=c==null?void 0:c.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:r.push(c);let u;return o?u={generatedImages:r,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new $l(Gn.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,l;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const r=await Promise.all(o.map(async c=>Ei(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(u.config.tools=r,e.config&&e.config.tools&&Sg(e.config.tools)){const c=(l=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&l!==void 0?l:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Eg(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,i,l;const o=new Map;for(const r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ei(r)){const u=r,c=await u.tool();for(const f of(l=c.functionDeclarations)!==null&&l!==void 0?l:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,u)}}return o}async processAfcStream(e){var n,i,l;const o=(l=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&l!==void 0?l:wd;let r=!1,u=0;const c=await this.initAfcToolsMap(e);return function(f,d,m){var h,g;return Si(this,arguments,function*(){for(var C,S,A,v;u<o;){r&&(u++,r=!1);const M=yield fe(f.processParamsMaybeAddMcpUsage(m)),_=yield fe(f.generateContentStreamInternal(M)),x=[],b=[];try{for(var y=!0,T=(S=void 0,Sl(_)),E;E=yield fe(T.next()),C=E.done,!C;y=!0){v=E.value,y=!1;const D=v;if(yield yield fe(D),D.candidates&&(!((h=D.candidates[0])===null||h===void 0)&&h.content)){b.push(D.candidates[0].content);for(const I of(g=D.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<o&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(I.functionCall.name)){const J=yield fe(d.get(I.functionCall.name).callTool([I.functionCall]));x.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(D){S={error:D}}finally{try{!y&&!C&&(A=T.return)&&(yield fe(A.call(T)))}finally{if(S)throw S.error}}if(x.length>0){r=!0;const D=new tl;D.candidates=[{content:{role:"user",parts:x}}],yield yield fe(D);const I=[];I.push(...b),I.push({role:"user",parts:x});const J=yt(m.contents).concat(I);m.contents=J}else break}})}(this,c,e)}async generateContentInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=Ad(this.apiClient,e);return u=k("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=Md(d),h=new tl;return Object.assign(h,m),h})}else{const f=xd(this.apiClient,e);return u=k("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=_d(d),h=new tl;return Object.assign(h,m),h})}}async generateContentStreamInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=Ad(this.apiClient,e);return u=k("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(m){return Si(this,arguments,function*(){var h,g,C,S;try{for(var A=!0,v=Sl(m),y;y=yield fe(v.next()),h=y.done,!h;A=!0){S=y.value,A=!1;const T=S,E=Md(yield fe(T.json()));E.sdkHttpResponse={headers:T.headers};const M=new tl;Object.assign(M,E),yield yield fe(M)}}catch(T){g={error:T}}finally{try{!A&&!h&&(C=v.return)&&(yield fe(C.call(v)))}finally{if(g)throw g.error}}})})}else{const f=xd(this.apiClient,e);return u=k("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),r.then(function(m){return Si(this,arguments,function*(){var h,g,C,S;try{for(var A=!0,v=Sl(m),y;y=yield fe(v.next()),h=y.done,!h;A=!0){S=y.value,A=!1;const T=S,E=_d(yield fe(T.json()));E.sdkHttpResponse={headers:T.headers};const M=new tl;Object.assign(M,E),yield yield fe(M)}}catch(T){g={error:T}}finally{try{!A&&!h&&(C=v.return)&&(yield fe(C.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=Ix(this.apiClient,e);return u=k("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=Vx(d),h=new id;return Object.assign(h,m),h})}else{const f=bx(this.apiClient,e);return u=k("{model}:batchEmbedContents",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=Ux(d),h=new id;return Object.assign(h,m),h})}}async generateImagesInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=tA(this.apiClient,e);return u=k("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=iA(d),h=new ld;return Object.assign(h,m),h})}else{const f=eA(this.apiClient,e);return u=k("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=nA(d),h=new ld;return Object.assign(h,m),h})}}async editImageInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=_x(this.apiClient,e);return o=k("{model}:predict",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>{const f=Mx(c),d=new Xv;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=N_(this.apiClient,e);return o=k("{model}:predict",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>{const f=R_(c),d=new Qv;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=XA(this.apiClient,e);return o=k("{model}:predict",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),l.then(c=>{const f=QA(c),d=new Zv;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=s_(this.apiClient,e);return o=k("{model}:predict",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),l.then(c=>{const f=r_(c),d=new Wv;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=TA(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>_r(d))}else{const f=vA(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Ar(d))}}async listInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=LA(this.apiClient,e);return u=k("{models_url}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=HA(d),h=new od;return Object.assign(h,m),h})}else{const f=VA(this.apiClient,e);return u=k("{models_url}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=kA(d),h=new od;return Object.assign(h,m),h})}}async update(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=__(this.apiClient,e);return u=k("{model}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>_r(d))}else{const f=A_(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Ar(d))}}async delete(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=Tx(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=Sx(d),h=new ad;return Object.assign(h,m),h})}else{const f=vx(this.apiClient,e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=Cx(d),h=new ad;return Object.assign(h,m),h})}}async countTokens(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=px(this.apiClient,e);return u=k("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=yx(d),h=new sd;return Object.assign(h,m),h})}else{const f=hx(this.apiClient,e);return u=k("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=gx(d),h=new sd;return Object.assign(h,m),h})}}async computeTokens(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=nx(this.apiClient,e);return o=k("{model}:computeTokens",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>{const f=ix(c),d=new jv;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=uA(this.apiClient,e);return u=k("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const m=sA(d),h=new sa;return Object.assign(h,m),h})}else{const f=rA(this.apiClient,e);return u=k("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const m=aA(d),h=new sa;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vM extends Yn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:r,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:r,isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:l,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=Ov(e);return u=k("{operationName}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else{const f=Yv(e);return u=k("{operationName}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=qv(e);return o=k("{resourceName}:fetchPredictOperation",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Id(){return{}}function TM(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["name"],n),e}function CM(t){const e={},n=a(t,["disabled"]);n!=null&&s(e,["disabled"],n);const i=a(t,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const l=a(t,["endOfSpeechSensitivity"]);l!=null&&s(e,["endOfSpeechSensitivity"],l);const o=a(t,["prefixPaddingMs"]);o!=null&&s(e,["prefixPaddingMs"],o);const r=a(t,["silenceDurationMs"]);return r!=null&&s(e,["silenceDurationMs"],r),e}function SM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&s(e,["data"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function EM(t){const e={},n=a(t,["environment"]);n!=null&&s(e,["environment"],n);const i=a(t,["excludedPredefinedFunctions"]);return i!=null&&s(e,["excludedPredefinedFunctions"],i),e}function xM(t){const e={},n=a(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(o=>HM(o))),s(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&s(e,["role"],i),e}function AM(t){const e={},n=a(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const i=a(t,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],PM(i)),e}function _M(t,e,n){const i={},l=a(e,["expireTime"]);n!==void 0&&l!=null&&s(n,["expireTime"],l);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&s(n,["newSessionExpireTime"],o);const r=a(e,["uses"]);n!==void 0&&r!=null&&s(n,["uses"],r);const u=a(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&s(n,["bidiGenerateContentSetup"],LM(t,u));const c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&s(n,["fieldMask"],c),i}function MM(t,e){const n={},i=a(e,["config"]);return i!=null&&s(n,["config"],_M(t,i,n)),n}function NM(t){const e={},n=a(t,["mode"]);n!=null&&s(e,["mode"],n);const i=a(t,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function RM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function wM(t){const e={},n=a(t,["id"]);n!=null&&s(e,["id"],n);const i=a(t,["args"]);i!=null&&s(e,["args"],i);const l=a(t,["name"]);return l!=null&&s(e,["name"],l),e}function DM(t){const e={},n=a(t,["behavior"]);n!=null&&s(e,["behavior"],n);const i=a(t,["description"]);i!=null&&s(e,["description"],i);const l=a(t,["name"]);l!=null&&s(e,["name"],l);const o=a(t,["parameters"]);o!=null&&s(e,["parameters"],o);const r=a(t,["parametersJsonSchema"]);r!=null&&s(e,["parametersJsonSchema"],r);const u=a(t,["response"]);u!=null&&s(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function bM(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],NM(n)),e}function IM(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&s(e,["timeRangeFilter"],UM(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function UM(t){const e={},n=a(t,["startTime"]);n!=null&&s(e,["startTime"],n);const i=a(t,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function VM(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","responseModalities"],l);const o=a(t,["temperature"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig","temperature"],o);const r=a(t,["topP"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","topP"],r);const u=a(t,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const d=a(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const m=a(t,["speechConfig"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","speechConfig"],JM(Uu(m)));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","thinkingConfig"],YM(h));const g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],g);const C=a(t,["systemInstruction"]);e!==void 0&&C!=null&&s(e,["setup","systemInstruction"],xM(Ge(C)));const S=a(t,["tools"]);if(e!==void 0&&S!=null){let _=Ji(S);Array.isArray(_)&&(_=_.map(x=>OM(Fi(x)))),s(e,["setup","tools"],_)}const A=a(t,["sessionResumption"]);e!==void 0&&A!=null&&s(e,["setup","sessionResumption"],BM(A));const v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","inputAudioTranscription"],Id());const y=a(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&s(e,["setup","outputAudioTranscription"],Id());const T=a(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&s(e,["setup","realtimeInputConfig"],zM(T));const E=a(t,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],AM(E));const M=a(t,["proactivity"]);return e!==void 0&&M!=null&&s(e,["setup","proactivity"],GM(M)),n}function LM(t,e){const n={},i=a(e,["model"]);i!=null&&s(n,["setup","model"],Z(t,i));const l=a(e,["config"]);return l!=null&&s(n,["config"],VM(l,n)),n}function kM(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>FM(l))),s(e,["speakerVoiceConfigs"],i)}return e}function HM(t){const e={},n=a(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],$M(n));const i=a(t,["thought"]);i!=null&&s(e,["thought"],i);const l=a(t,["inlineData"]);l!=null&&s(e,["inlineData"],SM(l));const o=a(t,["fileData"]);o!=null&&s(e,["fileData"],RM(o));const r=a(t,["thoughtSignature"]);r!=null&&s(e,["thoughtSignature"],r);const u=a(t,["functionCall"]);u!=null&&s(e,["functionCall"],wM(u));const c=a(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const d=a(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const m=a(t,["text"]);return m!=null&&s(e,["text"],m),e}function qM(t){const e={},n=a(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function GM(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function zM(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],CM(n));const i=a(t,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const l=a(t,["turnCoverage"]);return l!=null&&s(e,["turnCoverage"],l),e}function BM(t){const e={},n=a(t,["handle"]);if(n!=null&&s(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PM(t){const e={},n=a(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function FM(t){const e={},n=a(t,["speaker"]);n!=null&&s(e,["speaker"],n);const i=a(t,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],xg(i)),e}function JM(t){const e={},n=a(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],xg(n));const i=a(t,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],kM(i));const l=a(t,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function YM(t){const e={},n=a(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const i=a(t,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function OM(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>DM(f))),s(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearch"]);i!=null&&s(e,["googleSearch"],IM(i));const l=a(t,["googleSearchRetrieval"]);if(l!=null&&s(e,["googleSearchRetrieval"],bM(l)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&s(e,["urlContext"],KM());const r=a(t,["computerUse"]);r!=null&&s(e,["computerUse"],EM(r));const u=a(t,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function KM(){return{}}function $M(t){const e={},n=a(t,["fps"]);n!=null&&s(e,["fps"],n);const i=a(t,["endOffset"]);i!=null&&s(e,["endOffset"],i);const l=a(t,["startOffset"]);return l!=null&&s(e,["startOffset"],l),e}function xg(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],qM(n)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const l=Object.keys(i).map(o=>`${n}.${o}`);e.push(...l)}else e.push(n)}return e.join(",")}function QM(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const o=XM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];l.length>0&&(u=l.map(f=>r.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class ZM extends Yn{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=MM(this.apiClient,e);o=k("auth_tokens",u._url),r=u._query,delete u.config,delete u._url,delete u._query;const c=QM(u,e.config);return l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>TM(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WM(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["_url","name"],n),e}function jM(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["_url","name"],n),e}function eN(t,e){const n={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&s(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=a(t,["epochCount"]);e!==void 0&&l!=null&&s(e,["tuningTask","hyperparameters","epochCount"],l);const o=a(t,["learningRateMultiplier"]);if(o!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const r=a(t,["batchSize"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","batchSize"],r);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function tN(t,e){const n={},i=a(t,["validationDataset"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec"],TN(i,n));const l=a(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&s(e,["tunedModelDisplayName"],l);const o=a(t,["description"]);e!==void 0&&o!=null&&s(e,["description"],o);const r=a(t,["epochCount"]);e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],r);const u=a(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=a(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=a(t,["adapterSize"]);if(e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=a(t,["labels"]);return e!==void 0&&d!=null&&s(e,["labels"],d),n}function nN(t){const e={},n=a(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const i=a(t,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);const l=a(t,["trainingDataset"]);l!=null&&s(e,["tuningTask","trainingData"],pN(l));const o=a(t,["config"]);return o!=null&&eN(o,e),e}function iN(t){const e={},n=a(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const i=a(t,["preTunedModel"]);i!=null&&s(e,["preTunedModel"],i);const l=a(t,["trainingDataset"]);l!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],gN(l,e));const o=a(t,["config"]);return o!=null&&tN(o,e),e}function lN(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["_url","name"],n),e}function oN(t){const e={},n=a(t,["name"]);return n!=null&&s(e,["_url","name"],n),e}function aN(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const o=a(t,["filter"]);return e!==void 0&&o!=null&&s(e,["_query","filter"],o),n}function sN(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const o=a(t,["filter"]);return e!==void 0&&o!=null&&s(e,["_query","filter"],o),n}function rN(t){const e={},n=a(t,["config"]);return n!=null&&aN(n,e),e}function uN(t){const e={},n=a(t,["config"]);return n!=null&&sN(n,e),e}function cN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["tunedModels"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>Ag(r))),s(e,["tuningJobs"],o)}return e}function fN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const l=a(t,["tuningJobs"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>Nr(r))),s(e,["tuningJobs"],o)}return e}function dN(t){const e={},n=a(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const i=a(t,["epoch"]);i!=null&&s(e,["epoch"],i);const l=a(t,["step"]);l!=null&&s(e,["step"],l);const o=a(t,["endpoint"]);return o!=null&&s(e,["endpoint"],o),e}function mN(t){const e={},n=a(t,["name"]);n!=null&&s(e,["model"],n);const i=a(t,["name"]);return i!=null&&s(e,["endpoint"],i),e}function hN(t){const e={},n=a(t,["model"]);n!=null&&s(e,["model"],n);const i=a(t,["endpoint"]);i!=null&&s(e,["endpoint"],i);const l=a(t,["checkpoints"]);if(l!=null){let o=l;Array.isArray(o)&&(o=o.map(r=>dN(r))),s(e,["checkpoints"],o)}return e}function pN(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=a(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>yN(l))),s(e,["examples","examples"],i)}return e}function gN(t,e){const n={},i=a(t,["gcsUri"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],i);const l=a(t,["vertexDatasetResource"]);if(e!==void 0&&l!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],l),a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function yN(t){const e={},n=a(t,["textInput"]);n!=null&&s(e,["textInput"],n);const i=a(t,["output"]);return i!=null&&s(e,["output"],i),e}function Ag(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["state"]);l!=null&&s(e,["state"],Qp(l));const o=a(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=a(t,["tuningTask","startTime"]);r!=null&&s(e,["startTime"],r);const u=a(t,["tuningTask","completeTime"]);u!=null&&s(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=a(t,["description"]);f!=null&&s(e,["description"],f);const d=a(t,["baseModel"]);d!=null&&s(e,["baseModel"],d);const m=a(t,["_self"]);m!=null&&s(e,["tunedModel"],mN(m));const h=a(t,["customBaseModel"]);h!=null&&s(e,["customBaseModel"],h);const g=a(t,["experiment"]);g!=null&&s(e,["experiment"],g);const C=a(t,["labels"]);C!=null&&s(e,["labels"],C);const S=a(t,["outputUri"]);S!=null&&s(e,["outputUri"],S);const A=a(t,["pipelineJob"]);A!=null&&s(e,["pipelineJob"],A);const v=a(t,["serviceAccount"]);v!=null&&s(e,["serviceAccount"],v);const y=a(t,["tunedModelDisplayName"]);y!=null&&s(e,["tunedModelDisplayName"],y);const T=a(t,["veoTuningSpec"]);return T!=null&&s(e,["veoTuningSpec"],T),e}function Nr(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["state"]);l!=null&&s(e,["state"],Qp(l));const o=a(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=a(t,["startTime"]);r!=null&&s(e,["startTime"],r);const u=a(t,["endTime"]);u!=null&&s(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=a(t,["error"]);f!=null&&s(e,["error"],f);const d=a(t,["description"]);d!=null&&s(e,["description"],d);const m=a(t,["baseModel"]);m!=null&&s(e,["baseModel"],m);const h=a(t,["tunedModel"]);h!=null&&s(e,["tunedModel"],hN(h));const g=a(t,["preTunedModel"]);g!=null&&s(e,["preTunedModel"],g);const C=a(t,["supervisedTuningSpec"]);C!=null&&s(e,["supervisedTuningSpec"],C);const S=a(t,["tuningDataStats"]);S!=null&&s(e,["tuningDataStats"],S);const A=a(t,["encryptionSpec"]);A!=null&&s(e,["encryptionSpec"],A);const v=a(t,["partnerModelTuningSpec"]);v!=null&&s(e,["partnerModelTuningSpec"],v);const y=a(t,["customBaseModel"]);y!=null&&s(e,["customBaseModel"],y);const T=a(t,["experiment"]);T!=null&&s(e,["experiment"],T);const E=a(t,["labels"]);E!=null&&s(e,["labels"],E);const M=a(t,["outputUri"]);M!=null&&s(e,["outputUri"],M);const _=a(t,["pipelineJob"]);_!=null&&s(e,["pipelineJob"],_);const x=a(t,["serviceAccount"]);x!=null&&s(e,["serviceAccount"],x);const b=a(t,["tunedModelDisplayName"]);b!=null&&s(e,["tunedModelDisplayName"],b);const D=a(t,["veoTuningSpec"]);return D!=null&&s(e,["veoTuningSpec"],D),e}function vN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&s(e,["name"],i);const l=a(t,["metadata"]);l!=null&&s(e,["metadata"],l);const o=a(t,["done"]);o!=null&&s(e,["done"],o);const r=a(t,["error"]);return r!=null&&s(e,["error"],r),e}function TN(t,e){const n={},i=a(t,["gcsUri"]);i!=null&&s(n,["validationDatasetUri"],i);const l=a(t,["vertexDatasetResource"]);return e!==void 0&&l!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CN extends Yn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new $l(Gn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:l});return o.baseModel=void 0,await this.tuneInternal(o)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),o=await this.tuneMldevInternal(l);let r="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?r=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(r=o.name.split("/operations/")[0]),{name:r,state:vr.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=oN(e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>Nr(d))}else{const f=lN(e);return u=k("{name}",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>Ag(d))}}async listInternal(e){var n,i,l,o;let r,u="",c={};if(this.apiClient.isVertexAI()){const f=uN(e);return u=k("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=fN(d),h=new rd;return Object.assign(h,m),h})}else{const f=rN(e);return u=k("tunedModels",f._url),c=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:d.headers},h})),r.then(d=>{const m=cN(d),h=new rd;return Object.assign(h,m),h})}}async cancel(e){var n,i,l,o;let r="",u={};if(this.apiClient.isVertexAI()){const c=jM(e);r=k("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=WM(e);r=k("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI()){const u=iN(e);return o=k("tuningJobs",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>Nr(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let l,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nN(e);return o=k("tunedModels",u._url),r=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(f=>{const d=f;return d.sdkHttpResponse={headers:c.headers},d})),l.then(c=>vN(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EN=1024*1024*8,xN=3,AN=1e3,_N=2,vs="x-goog-upload-status";async function MN(t,e,n){var i,l,o;let r=0,u=0,c=new Tr(new Response),f="upload";for(r=t.size;u<r;){const m=Math.min(EN,r-u),h=t.slice(u,u+m);u+m>=r&&(f+=", finalize");let g=0,C=AN;for(;g<xN&&(c=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[vs]));)g++,await RN(C),C=C*_N;if(u+=m,((l=c==null?void 0:c.headers)===null||l===void 0?void 0:l[vs])!=="active")break;if(r<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[vs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function NN(t){return{size:t.size,type:t.type}}function RN(t){return new Promise(e=>setTimeout(e,t))}class wN{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MN(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN{create(e,n,i){return new bN(e,n,i)}}class bN{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ud="x-goog-api-key";class IN{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ud)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ud,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UN="gl-node/";class ku{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Hv(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const l=new IN(this.apiKey);this.apiClient=new Z_({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:UN+"web",uploader:new wN,downloader:new SN}),this.models=new yM(this.apiClient),this.live=new cM(this.apiClient,l,new DN),this.batches=new wC(this.apiClient),this.chats=new HS(this.models,this.apiClient),this.caches=new VS(this.apiClient),this.files=new QS(this.apiClient),this.operations=new vM(this.apiClient),this.authTokens=new ZM(this.apiClient),this.tunings=new CN(this.apiClient)}}const VN=(t,e,n,i)=>e==="X hi"?`
Bn l Gia s AI, ng vai C gio thn thin v hiu bit. Hin ti em hc sinh ang  trong mn hc "X hi".

**Mc tiu ca bn (Mn X hi):**
- Tr thnh mt ngi bn ng hnh kin thc, sn sng tr chuyn v gii p **mi thc mc** ca hc sinh v th gii xung quanh.
- Bn c th tr li cc cu hi v mi ch : khoa hc, vn ha, ngh thut, lch s, cng ngh, cc s kin x hi, k nng sng, v.v.
- Khuyn khch s t m, t duy phn bin v ham hc hi ca hc sinh.

**Phong cch giao tip:**
- Lun xng C, gi hc sinh l em.
- Giao tip ci m, gn gi, khch l v kin nhn.
- **TUYT I** s dng Ting Vit.
- S dng cc emoji ph hp  cuc tr chuyn thm sinh ng (v d: ,,, ).

**nh dng cu tr li:**
- Khi tr li cc cu hi kin thc, hy trnh by mt cch r rng v chuyn nghip.
- S dng tiu  (\`###\`) cho cc  chnh.
- Dng danh sch (\`*\` hoc \`-\`)  lit k thng tin.
- **In m** cc thut ng quan trng.
- iu ny gip hc sinh d dng theo di v ghi nh thng tin hn.

**TNH NNG V HNH MINH HA:**
- Nu ch  ang tho lun ph hp vi hnh nh minh ha (v d: mt di tch lch s, mt khi nim khoa hc), c **C TH** thm mt kha l \`imagePrompt\` vo i tng JSON tr v.
- Gi tr ca \`imagePrompt\` phi l mt chui vn bn m t chi tit, bng **Ting Vit**, v hnh nh c mun v (v d: "Kim t thp Giza  Ai Cp vo mt ngy nng p").
- H thng s t ng v v gi hnh cho hc sinh.
- **KHNG** lm dng tnh nng ny, ch s dng khi tht s cn thit  bi ging sinh ng hn. \`imagePrompt\` l mt kha ty chn.

**QUAN TRNG NHT - NH DNG PHN HI:**
- **LUN LUN** tr li di dng mt i tng JSON duy nht.
- JSON phi c 2 kha bt buc l \`response\` v \`suggestions\`, v mt kha ty chn l \`imagePrompt\`.
- \`response\`: (string) Cha ni dung cu tr li ca "C gio". Ni dung phi c nh dng bng Markdown, c bit l khi gii thch cc ch  phc tp. **KHNG cho "Cho em"**  u mi cu tr li, hy vo thng vn .
- \`suggestions\`: (array of strings) Cha mt mng t 2 n 3 cu gi  ngn gn (di 10 t)  hc sinh c th hi tip. Cc gi  ny phi lin quan n ch  va tho lun.
- \`imagePrompt\`: (string, ty chn) Cha m t bng Ting Vit  to hnh nh minh ha lin quan n bi ging.

Ch tr v i tng JSON, khng c bt k vn bn no khc.
`:`
Bn l Gia s AI, ng vai C gio dy km trc tuyn. Hin ti bn ang dy hc sinh ${t}, mn ${e}.
Chuyn ph trch hc sinh t lp 1 n lp 12, bm st chng trnh ca B Gio dc & o to Vit Nam v ni dung t cc b sch gio khoa hin hnh (nh Kt ni tri thc, Chn tri sng to, Cnh Diu,...).

**Mc tiu ca bn:**
- Gip hc sinh hiu bi, nm chc kin thc c bn, v tin b.
- Kt hp truyn t kin thc v ng vin tinh thn hc tp.

**Phong cch giao tip:**
- Lun xng C, gi hc sinh l em.
- Ging bi nh nhng, gn gi, khch l nhng vn m bo tnh chnh xc v cu trc chuyn nghip.
- **TUYT I** s dng Ting Vit, tr khi dy mn Ting Anh.
- S dng emoji mt cch tinh t  nhn mnh, khng lm dng (v d:  cho  tng mi,  cho ghi ch,  cho p n ng).

**Trnh by bi ging chuyn nghip:**
 bi ging d hiu v c h thng, c hy tun th nghim ngt cu trc sau khi trnh by:
1.  **Tiu  bi hc:** Bt u bng mt tiu  chnh, r rng (s dng Markdown \`##\`).
2.  **Gii thiu ngn gn:** Nu mc tiu hoc ni dung chnh ca bi hc.
3.  **Ni dung chi tit:**
    - Chia thnh cc phn nh, mi phn c tiu  ph (s dng \`###\`).
    - S dng danh sch (gch u dng \`*\` hoc \`-\` cho cc  khng theo th t, v \`1.\`, \`2.\` cho cc bc).
    - **In m** (\`**t kha**\`) cc thut ng, nh ngha, hoc im kin thc quan trng.
    - Cung cp cc v d minh ha r rng, nn t trong khi trch dn (\`>\`)  lm ni bt.
4.  **Tm tt:** Cui bi ging, tm tt li nhng im kin thc ct li trong mt danh sch ngn gn.
5.  **Cu hi cng c:** a ra 1-2 cu hi hoc bi tp nh  hc sinh c th t kim tra li kin thc va hc.

**Bi cnh hc tp:**
${i?'Bui hc ny ang c tip tc t ln trc. Lch s tr chuyn trc   c cung cp. Hy bt u bng cch cho mng hc sinh quay tr li v hi xem em y c mun tip tc t ni  dng li khng. Nu hc sinh khng mun tip tc, hy tr li chnh xc bng chui sau v khng thm g khc: "c thi, chng ta hy bt u mt bi hc mi nh!". Nu hc sinh ng  tip tc, hy tm tt ngn gn im dng li v tip tc bi ging.':n?`Hc sinh  hc cc ch  sau: ${n}. Hy dy bi tip theo mt cch lin mch.`:"y l bui hc u tin v ch  ny."}

**TNH NNG V HNH MINH HA:**
- Nu ch  ang tho lun ph hp vi hnh nh minh ha (v d: mt khi nim sinh hc, mt s kin lch s, mt hnh khi ton hc), c **C TH** thm mt kha l \`imagePrompt\` vo i tng JSON tr v.
- Gi tr ca \`imagePrompt\` phi l mt chui vn bn m t chi tit, bng **Ting Vit**, v hnh nh c mun v (v d: "S  chu trnh ca nc trong t nhin, c my, ma, sng v mt tri").
- H thng s t ng v v gi hnh cho hc sinh.
- **KHNG** lm dng tnh nng ny, ch s dng khi tht s cn thit  bi ging sinh ng hn. \`imagePrompt\` l mt kha ty chn.

**QUAN TRNG NHT - NH DNG PHN HI:**
- **LUN LUN** tr li di dng mt i tng JSON duy nht.
- JSON phi c 2 kha bt buc l \`response\` v \`suggestions\`, v mt kha ty chn l \`imagePrompt\`.
- \`response\`: (string) Cha ni dung bi ging ca "C gio". Ni dung phi c nh dng bng Markdown theo cu trc chuyn nghip  hng dn (tiu ,  mc, in m, danh sch,...). **KHNG cho "Cho em"**  u mi cu tr li, hy vo thng vn , tr khi  l cu cho mng hc sinh quay tr li.
- \`suggestions\`: (array of strings) Cha mt mng t 2 n 3 cu gi  ngn gn (di 10 t)  hc sinh c th hi tip. Cc gi  ny phi lin quan trc tip n ni dung va ging.
- \`imagePrompt\`: (string, ty chn) Cha m t bng Ting Vit  to hnh nh minh ha lin quan n bi ging.

Ch tr v i tng JSON, khng c bt k vn bn no khc.
`,LN=(t,e)=>e==="X hi"?`
Bn l Gia s AI, ng vai C gio thn thin v hiu bit. Hin ti bn ang tr chuyn vi hc sinh ${t} trong mn "X hi".

**Mc tiu ca bn:**
- Tr chuyn ci m vi hc sinh v bt k ch  no h quan tm.
- Hy l mt ngi i thoi th v, t nhng cu hi gi m  khuyn khch hc sinh chia s suy ngh v luyn tp k nng giao tip.
- Ging ni thn thin, gn gi v kin nhn.

Hy bt u cuc tr chuyn.
`:`
Bn l Gia s AI, ng vai C gio dy km trc tuyn. Hin ti bn ang gip hc sinh ${t} luyn ni mn ${e}.

**Mc tiu ca bn:**
- Gip hc sinh luyn tp k nng ni v phn x.
- To mt mi trng tr chuyn thoi mi, thn thin v khuyn khch hc sinh ni.
- Sa li pht m v ng php mt cch nh nhng nu cn thit.

**Phong cch giao tip:**
- Lun xng C, gi hc sinh l em.
- Ging ni thn thin, gn gi, kin nhn v khch l.
- t nhng cu hi m  khuyn khch hc sinh ni nhiu hn.
- Gi cho cuc tr chuyn i ng vo ch  mn hc.
- Nu hc sinh im lng, hy ch ng t cu hi hoc gi  ch .

Hy bt u cuc tr chuyn.
`,kN=(t,e,n)=>`
Bn l mt AI chuyn to cu hi trc nghim gio dc. Nhim v ca bn l to ra mt b cu hi trc nghim cht lng cao cho hc sinh ${t}, mn ${e}, v ch  "${n}".

**Yu cu:**
1.  **Ni dung:** Cu hi phi chnh xc, bm st chng trnh sch gio khoa Vit Nam.
2.  **nh dng:** Mi cu hi phi c 4 la chn (A, B, C, D), trong  ch c MT p n ng.
3.  ** kh:** Ph hp vi trnh  ca hc sinh ${t}.
4.  **Gii thch:** Cung cp mt li gii thch ngn gn, r rng v d hiu cho p n ng. Li gii thch phi gip hc sinh hiu ti sao p n  ng v cc p n khc sai.
5.  **Ngn ng:** S dng vn phong ca mt c gio: thn thin, khch l. Xng "c", gi hc sinh l "em".

**QUAN TRNG:** Ch tr v mt mng JSON tun th theo schema  cung cp. Khng thm bt k vn bn, li cho hay gii thch no bn ngoi mng JSON.
`,HN=(t,e)=>`
Bn l mt AI tr l gio dc thng minh. Nhim v ca bn l c mt on hi thoi gia "C gio AI" v mt hc sinh ${t} mn ${e}.
Da vo ni dung, hy tm tt **ch  chnh** m hc sinh  hc trong bui  thnh mt cu ngn gn, sc tch.
Ch tr v ni dung tm tt, khng thm bt k li cho, gii thch, hay k t nh dng no khc.

V d:
- Phn tch cc bin php tu t trong bi th 'Ty Tin'.
- Gii phng trnh bc hai v ng dng.
- Th hin ti hon thnh trong Ting Anh.

By gi, hy tm tt cuc tr chuyn sau:
`,qN="AIzaSyDZUbnl9qd-g_esENSXf1tZ4eGOy4wcjFg",Kn=new ku({apiKey:qN}),_g=t=>{const e=t.split(",");return e.length===2?e[1]:t},Ts=async(t,e,n,i,l)=>{try{const o=t.map(f=>{const d=[];return f.file&&d.push({inlineData:{mimeType:f.file.mimeType,data:_g(f.file.data)}}),f.text&&d.push({text:f.text}),f.sender===qe.User&&d.length===0&&d.push({text:"Please analyze the attached file."}),{role:f.sender===qe.User?"user":"model",parts:d}}),u=(await Kn.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{systemInstruction:VN(e,n,i,l),temperature:.7,responseMimeType:"application/json",responseSchema:{type:Ae.OBJECT,properties:{response:{type:Ae.STRING},suggestions:{type:Ae.ARRAY,items:{type:Ae.STRING}},imagePrompt:{type:Ae.STRING}},required:["response","suggestions"]}}})).text.trim(),c=JSON.parse(u);if(c&&typeof c.response=="string"&&Array.isArray(c.suggestions))return{text:c.response,suggestions:c.suggestions,imagePrompt:c.imagePrompt};throw new Error("Invalid JSON response structure from AI.")}catch(o){return console.error("Error processing Gemini API response:",o),{text:"Rt tic,  c li xy ra. Em vui lng th li sau nh.",suggestions:["Th hi li cu va ri","Bt u li bui hc"]}}},GN=async(t,e,n)=>{try{const i=t.map(o=>`${o.sender==="user"?"Hc sinh":"C gio"}: ${o.text}`).join(`
`);return(await Kn.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{systemInstruction:HN(e,n),temperature:.2}})).text.trim()}catch(i){return console.error("Error summarizing chat session:",i),""}},zN=async(t,e,n,i=5)=>{try{const o=(await Kn.models.generateContent({model:"gemini-2.5-flash",contents:`To ${i} cu hi trc nghim.`,config:{systemInstruction:kN(t,e,n),responseMimeType:"application/json",responseSchema:{type:Ae.ARRAY,items:{type:Ae.OBJECT,properties:{question:{type:Ae.STRING},options:{type:Ae.ARRAY,items:{type:Ae.STRING}},correctAnswer:{type:Ae.STRING},explanation:{type:Ae.STRING}},required:["question","options","correctAnswer","explanation"]}}}})).text.trim(),r=JSON.parse(o);if(!Array.isArray(r)||r.some(u=>!u.question||!u.options||!u.correctAnswer||!u.explanation))throw new Error("nh dng d liu cu hi khng hp l.");return r}catch(l){throw console.error("Error generating quiz questions:",l),l instanceof Error?new Error(`Khng th to cu hi: ${l.message}`):new Error(" c li khng xc nh khi to cu hi trc nghim.")}},BN=async(t,e)=>{try{const n=`Bn l mt c gio AI thn thin, ang chm bi cho hc sinh.
Nhim v ca bn l xem xt hnh nh hoc file PDF bi lm vit tay ca hc sinh v a ra nhn xt.

Bi cnh:
- Cu hi trc nghim: "${e.question}"
- p n ng: "${e.correctAnswer}"
- Gii thch chi tit: "${e.explanation}"

Yu cu:
1. Phn tch k lng bi lm ca hc sinh trong file nh km.
2. So snh bi lm  vi p n ng v li gii thch  cho.
3. a ra nhn xt mang tnh xy dng, nh nhng v khch l. Bt u bng vic khen ngi n lc ca em ("C thy em  rt c gng...").
4. Ch ra nhng im hc sinh  lm ng.
5. Nu c li sai, hy ch ra c th v gii thch ti sao n sai, da trn li gii thch  cung cp. ng ch ni "sai ri", hy hng dn em cch lm ng.
6. Ging vn: Thn thin, gn gi, xng "c" v gi hc sinh l "em". S dng emoji ph hp (v d: , , , ).
7. Kt thc bng mt li ng vin.
8. Ch tr v phn vn bn nhn xt, khng thm bt k nh dng no khc.`,i={inlineData:{mimeType:t.mimeType,data:_g(t.data)}},l={text:"y l bi lm ca em, c xem gip em vi ."};return(await Kn.models.generateContent({model:"gemini-2.5-flash",contents:[{role:"user",parts:[i,l]}],config:{systemInstruction:n,temperature:.5}})).text.trim()}catch(n){return console.error("Error getting written answer feedback:",n),"Rt tic,  c li xy ra khi c phn tch bi lm ca em. Em th li sau nh."}},PN=async t=>{try{return(await Kn.models.generateContent({model:"gemini-2.5-flash",contents:`Translate the following Vietnamese text to English, and only return the translated text without any preamble: "${t}"`})).text}catch(e){throw console.error("Error translating text with Gemini API:",e),e instanceof Error?new Error(`Failed to translate: ${e.message}`):new Error("An unknown error occurred during translation.")}},FN=async t=>{try{const e=`An avatar for a friendly female AI tutor for Vietnamese students. Style: cute, simple, cartoon, vector art. Subject: ${t}.`,n=await Kn.models.generateImages({model:"imagen-4.0-generate-001",prompt:e,config:{numberOfImages:1,outputMimeType:"image/png",aspectRatio:"1:1"}});if(n.generatedImages&&n.generatedImages.length>0)return`data:image/png;base64,${n.generatedImages[0].image.imageBytes}`;throw new Error("The API did not return any images.")}catch(e){throw console.error("Error generating avatar image:",e),e instanceof Error?new Error(`Khng th to avatar: ${e.message}`):new Error(" c li khng xc nh khi to avatar.")}},JN=async t=>{try{const n=`Educational illustration for a student. Style: clear, simple, colorful, diagrammatic. Subject: ${await PN(t)}. IMPORTANT: Any text or labels in the image must be written bilingually in both English and Vietnamese. For example: "Sun (Mt tri)". Original Vietnamese context: "${t}".`,i=await Kn.models.generateImages({model:"imagen-4.0-generate-001",prompt:n,config:{numberOfImages:1,outputMimeType:"image/png",aspectRatio:"16:9"}});if(i.generatedImages&&i.generatedImages.length>0)return`data:image/png;base64,${i.generatedImages[0].image.imageBytes}`;throw new Error("API khng tr v hnh nh no.")}catch(e){throw console.error("Li khi to hnh minh ha:",e),e instanceof Error?new Error(`Khng th to hnh nh: ${e.message}`):new Error(" c li khng xc nh khi to hnh nh minh ha.")}},YN="ai_tutor_name",ua=({grade:t,subject:e,onBack:n})=>{const[i,l]=R.useState("C gio AI"),o=()=>{const r=localStorage.getItem(YN)||"C gio AI";l(r)};return R.useEffect(()=>(o(),window.addEventListener("settingsChanged",o),()=>{window.removeEventListener("settingsChanged",o)}),[]),p.jsxs("header",{className:"bg-white shadow-md p-3 sticky top-0 z-10 flex items-center justify-between",children:[p.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 transition btn-press","aria-label":"Quay li",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsxs("div",{className:"text-center",children:[p.jsxs("h1",{className:"text-xl font-bold text-tutor-primary",children:[e," - ",t]}),p.jsx("p",{className:"text-xs text-gray-500",children:i})]}),p.jsx("div",{className:"w-10"})," "]})},Cs=window.SpeechRecognition||window.webkitSpeechRecognition,ON=()=>{const[t,e]=R.useState(""),[n,i]=R.useState(!1),l=R.useRef(null);R.useEffect(()=>{if(!Cs){console.error("Speech Recognition API is not supported in this browser.");return}const u=new Cs;return u.continuous=!0,u.interimResults=!0,u.onresult=c=>{let f="",d="";for(let m=0;m<c.results.length;m++)c.results[m].isFinal?d+=c.results[m][0].transcript:f+=c.results[m][0].transcript;e(d+f)},u.onstart=()=>{i(!0)},u.onend=()=>{i(!1)},u.onerror=c=>{console.error("Speech recognition error",c.error)},l.current=u,()=>{u.abort()}},[]);const o=R.useCallback((u="vi-VN")=>{if(l.current&&!n){l.current.lang=u,e("");try{l.current.start()}catch(c){console.error("Error starting recognition:",c)}}},[n]),r=R.useCallback(()=>{l.current&&n&&l.current.stop()},[n]);return{text:t,isListening:n,startListening:o,stopListening:r,hasRecognitionSupport:!!Cs,setText:e}},ca=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=()=>e(i.result),i.onerror=l=>n(l)}),Mg=({onClose:t,onCapture:e})=>{const n=R.useRef(null),i=R.useRef(null),l=R.useRef(null),[o,r]=R.useState(null),[u,c]=R.useState(null),f=R.useCallback(async()=>{try{const C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});l.current=C,n.current&&(n.current.srcObject=C)}catch(C){console.error("Error accessing camera:",C),c("Khng th truy cp camera. Vui lng kim tra quyn truy cp trong trnh duyt ca bn.")}},[]),d=R.useCallback(()=>{l.current&&(l.current.getTracks().forEach(C=>C.stop()),l.current=null)},[]);R.useEffect(()=>(f(),()=>{d()}),[f,d]);const m=()=>{if(n.current&&i.current){const C=n.current,S=i.current;S.width=C.videoWidth,S.height=C.videoHeight;const A=S.getContext("2d");if(A){A.drawImage(C,0,0,C.videoWidth,C.videoHeight);const v=S.toDataURL("image/jpeg");r(v),d()}}},h=()=>{r(null),c(null),f()},g=async()=>{o&&(e({name:`capture-${Date.now()}.jpg`,mimeType:"image/jpeg",data:o}),t())};return p.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:t,children:[p.jsxs("div",{className:"bg-gray-900 text-white rounded-lg shadow-xl w-full max-w-lg animate-fade-in relative",onClick:C=>C.stopPropagation(),children:[p.jsx("canvas",{ref:i,className:"hidden"}),u?p.jsxs("div",{className:"p-8 text-center",children:[p.jsx("h3",{className:"text-xl font-bold text-red-500",children:"Li Camera"}),p.jsx("p",{className:"mt-2",children:u}),p.jsx("button",{onClick:t,className:"mt-6 bg-tutor-primary px-4 py-2 rounded-lg font-semibold btn-press btn-transition",children:"ng"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative aspect-video bg-black flex items-center justify-center",children:[p.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,className:`w-full h-full object-contain ${o?"hidden":"block"}`}),o&&p.jsx("img",{src:o,alt:"Captured",className:"w-full h-full object-contain"})]}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-4 flex justify-center items-center space-x-4",children:o?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:h,className:"bg-gray-700 text-white px-6 py-2 rounded-lg font-semibold hover:bg-gray-600 transition btn-press",children:"Chp li"}),p.jsx("button",{onClick:g,className:"bg-tutor-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition btn-press",children:"Dng nh ny"})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:t,className:"bg-gray-700 p-3 rounded-full hover:bg-gray-600 transition btn-press","aria-label":"ng",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("button",{onClick:m,className:"w-20 h-20 rounded-full border-4 border-white bg-white/30 hover:bg-white/50 transition btn-press","aria-label":"Chp nh"}),p.jsx("div",{className:"w-9 h-9"})," "]})})]})]}),p.jsx("style",{children:`
            @keyframes fade-in {
                from { opacity: 0; transform: scale(0.95); }
                to { opacity: 1; transform: scale(1); }
            }
            .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
      `})]})},KN=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),$N=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Vd=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),XN=({className:t})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:[p.jsx("path",{d:"M2 6a2 2 0 012-2h1.172a2 2 0 011.414.586l.828.828A2 2 0 008.828 6H12a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"}),p.jsx("path",{d:"M15 8a1 1 0 01-1-1V5h-2a1 1 0 010-2h2V2a1 1 0 012 0v1h2a1 1 0 110 2h-2v2a1 1 0 01-1 1z"})]}),QN=({onSendMessage:t,isLoading:e,subject:n})=>{const[i,l]=R.useState(""),[o,r]=R.useState(null),[u,c]=R.useState(!1),f=R.useRef(null),d=R.useRef(null),m=n==="Ting Anh"?"en-US":"vi-VN",{text:h,isListening:g,startListening:C,stopListening:S,hasRecognitionSupport:A,setText:v}=ON();R.useEffect(()=>{l(h)},[h]),R.useEffect(()=>{if(f.current){f.current.style.height="auto";const x=f.current.scrollHeight;f.current.style.height=`${x}px`}},[i,o]);const y=async x=>{var D;const b=(D=x.target.files)==null?void 0:D[0];if(b){if(b.size>10*1024*1024){alert("Kch thc file qu ln. Vui lng chn file di 10MB.");return}const I=await ca(b);r({name:b.name,mimeType:b.type,data:I})}d.current&&(d.current.value="")},T=x=>{r(x),c(!1)},E=async x=>{x.preventDefault(),(i.trim()||o)&&!e&&(t(i,o??void 0),l(""),r(null),g&&S(),v(""))},M=()=>{g?S():C(m)},_=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),E(x))};return p.jsxs(p.Fragment,{children:[u&&p.jsx(Mg,{onClose:()=>c(!1),onCapture:T}),p.jsxs("div",{className:"max-w-4xl mx-auto",children:[o&&p.jsxs("div",{className:"mb-2 p-2 bg-gray-100 border border-gray-300 rounded-lg flex items-center justify-between animate-fade-in",children:[p.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[o.mimeType.startsWith("image/")?p.jsx("img",{src:o.data,alt:"Preview",className:"w-10 h-10 rounded object-cover"}):p.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-tutor-secondary rounded",children:p.jsx(Vd,{className:"w-6 h-6 text-tutor-primary"})}),p.jsx("span",{className:"text-sm text-gray-700 truncate",children:o.name})]}),p.jsx("button",{onClick:()=>r(null),className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 btn-press",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),p.jsxs("form",{onSubmit:E,className:"flex items-end space-x-2",children:[p.jsx("input",{type:"file",ref:d,onChange:y,accept:"image/*,.pdf,.doc,.docx,.ppt,.pptx",className:"hidden"}),p.jsx("button",{type:"button",onClick:()=>{var x;return(x=d.current)==null?void 0:x.click()},disabled:e,className:"p-2 text-gray-500 rounded-full hover:bg-gray-200 transition-colors btn-press","aria-label":"nh km file",children:p.jsx(Vd,{className:"w-6 h-6"})}),p.jsx("button",{type:"button",onClick:()=>c(!0),disabled:e,className:"p-2 text-gray-500 rounded-full hover:bg-gray-200 transition-colors btn-press","aria-label":"Chp nh",children:p.jsx(XN,{className:"w-6 h-6"})}),p.jsxs("div",{className:"flex-1 relative",children:[p.jsx("textarea",{ref:f,value:i,onChange:x=>l(x.target.value),onKeyDown:_,placeholder:g?"C ang nghe...":"Em mun hi c bi g...",rows:1,className:"w-full p-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-tutor-primary focus:outline-none resize-none transition-shadow duration-200 disabled:bg-gray-100",disabled:e,style:{maxHeight:"150px"}}),A&&p.jsx("button",{type:"button",onClick:M,disabled:e,className:`absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-full transition-colors btn-press ${g?"bg-red-500 text-white animate-pulse":"text-gray-500 hover:bg-gray-200"}`,"aria-label":"Ni",children:p.jsx(KN,{})})]}),p.jsx("button",{type:"submit",disabled:e||!i.trim()&&!o,className:"bg-tutor-primary text-white p-3 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tutor-primary disabled:bg-purple-300 disabled:cursor-not-allowed transition-colors duration-200 btn-press","aria-label":"Gi",children:p.jsx($N,{})})]}),p.jsx("style",{children:`
            @keyframes fade-in {
                from { opacity: 0; transform: translateY(-5px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in {
                animation: fade-in 0.3s ease-out forwards;
            }
        `})]})]})},Ld="ai_tutor_avatar",ZN=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.042 1.95l-2.122 1.159a1 1 0 00-.578 1.68l7 12a1 1 0 001.68-.578l1.159-2.122a1 1 0 011.95.042l1.093 2.668a1 1 0 001.84 0l3-7a1 1 0 00-.788-1.218l-5.998-1.551a1 1 0 00-1.218.788l-1.55 5.998a1 1 0 00.788 1.218l.55.142a1 1 0 001.218-.788l1.093-4.258a1 1 0 00-.97-1.243l-4.258 1.093a1 1 0 00-.788 1.218l.142.55a1 1 0 001.218.788l2.668 1.093z"})}),WN=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),jN=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 16c1.255 0 2.443-.29 3.5-.804V4.804zM14.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 0014.5 16c1.255 0 2.443-.29 3.5-.804v-10A7.968 7.968 0 0014.5 4z"})}),Xl=({size:t="md"})=>{const[e,n]=R.useState(()=>localStorage.getItem(Ld)),i=()=>{const u=localStorage.getItem(Ld);n(u)};R.useEffect(()=>(window.addEventListener("settingsChanged",i),()=>{window.removeEventListener("settingsChanged",i)}),[]);const l=t==="lg"?"w-16 h-16":t==="sm"?"w-6 h-6":"w-10 h-10",o=t==="lg"?"w-8 h-8":t==="sm"?"w-4 h-4":"w-6 h-6",r=()=>{if(e&&e.startsWith("data:image"))return p.jsx("img",{src:e,alt:"Tutor Avatar",className:"w-full h-full object-cover"});switch(e){case"avatar-1":return p.jsx(WN,{className:o});case"avatar-2":return p.jsx(jN,{className:o});case"default":default:return p.jsx(ZN,{className:o})}};return p.jsx("div",{className:`${l} rounded-full bg-tutor-primary flex items-center justify-center text-white font-bold text-xl shadow-lg overflow-hidden`,children:r()})},kd="user_avatar",eR=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Ng=({size:t="md"})=>{const[e,n]=R.useState(()=>localStorage.getItem(kd)),i=()=>{const u=localStorage.getItem(kd);n(u)};R.useEffect(()=>(window.addEventListener("settingsChanged",i),()=>{window.removeEventListener("settingsChanged",i)}),[]);const l=t==="sm"?"w-6 h-6":"w-10 h-10",o=t==="sm"?"w-4 h-4":"w-6 h-6",r=()=>e?p.jsx("img",{src:e,alt:"User Avatar",className:"w-full h-full object-cover"}):p.jsx(eR,{className:o});return p.jsx("div",{className:`${l} rounded-full bg-user-primary flex items-center justify-center text-white font-bold text-xl shadow-sm overflow-hidden`,children:r()})};function tR(t){let e="";const n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function Rg(t){const e=atob(t),n=e.length,i=new Uint8Array(n);for(let l=0;l<n;l++)i[l]=e.charCodeAt(l);return i}async function wg(t,e,n,i){const l=new Int16Array(t.buffer),o=l.length/i,r=e.createBuffer(i,o,n);for(let u=0;u<i;u++){const c=r.getChannelData(u);for(let f=0;f<o;f++)c[f]=l[f*i+u]/32768}return r}function nR(t){const e=t.length,n=new Int16Array(e);for(let i=0;i<e;i++)n[i]=t[i]*32768;return{data:tR(new Uint8Array(n.buffer)),mimeType:"audio/pcm;rate=16000"}}const iR="AIzaSyDZUbnl9qd-g_esENSXf1tZ4eGOy4wcjFg",lR=new ku({apiKey:iR}),oR=t=>{if(!t)return"";let e=t;const n=l=>l.length>1&&/[\s+\-*/^]/.test(l)?`(${l})`:l,i=l=>l.length>1?`(${l})`:l;return e=e.replace(/\\begin{bmatrix}([\s\S]*?)\\end{bmatrix}/g,(l,o)=>`[ ${o.trim().split(/\\\\|\\cr/).map(f=>f.trim()).map(f=>f.split("&").map(d=>d.trim())).map(f=>`[${f.join(", ")}]`).join("; ")} ]`),e=e.replace(/\\sqrt\[([^\]]+)\]{([^}]+)}/g,(l,o,r)=>`[${o}](${r})`),e=e.replace(/\\sqrt{([^}]+)}/g,(l,o)=>`${i(o.trim())}`),e=e.replace(/\^{([^}]+)}/g,(l,o)=>{const r=o.trim();return r.length>1&&!/^\w+$/.test(r)?`^(${r})`:`^${r}`}),e=e.replace(/\\frac{([^}]+)}{([^}]+)}/g,(l,o,r)=>{const u=n(o.trim()),c=n(r.trim());return`${u}/${c}`}),e=e.replace(/\\sum_{([^}]+)}^{([^}]+)}/g,(l,o,r)=>`(${o.trim()}${r.trim()})`),e=e.replace(/\\prod_{([^}]+)}^{([^}]+)}/g,(l,o,r)=>`(${o.trim()}${r.trim()})`),e=e.replace(/\\int/g,""),e=e.replace(/\\text{([^}]+)}/g,"$1"),e=e.replace(/\\{|\\}|{|}/g,""),e=e.replace(/\\,|\\;|\\!|\\quad|\\qquad/g," "),e=e.replace(/\\ /g," "),e=e.replace(/\\([a-zA-Z]+)/g,"$1"),e=e.replace(/\\/g,""),e.replace(/\s+/g," ").trim()},aR=({isPlaying:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:t?p.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9 9 0 0119 10a9 9 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7 7 0 0017 10a7 7 0 00-2.343-5.657 1 1 0 010-1.414zm-2.828 2.828a1 1 0 011.414 0A5 5 0 0115 10a5 5 0 01-1.757 3.536 1 1 0 11-1.414-1.414A3 3 0 0013 10a3 3 0 00-.757-2.121 1 1 0 010-1.414z",clipRule:"evenodd"}):p.jsx("path",{d:"M5.586 3.586a1 1 0 011.414 0l4.293 4.293a1 1 0 010 1.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.172 10 5.586 7.414a1 1 0 010-1.414zM11 5a1 1 0 011-1h1a1 1 0 011 1v10a1 1 0 01-1 1h-1a1 1 0 01-1-1V5z",transform:"translate(1,0)"})}),sR=()=>p.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),rR=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),uR=({message:t,subject:e,onSuggestionClick:n})=>{const i=t.sender===qe.AI,[l,o]=R.useState("idle"),r=R.useRef(null),u=R.useRef(null),c=R.useRef(new Set),f=R.useRef(0),d=R.useRef(null);R.useEffect(()=>{d.current&&window.MathJax&&t.text&&t.text.includes("$")&&window.MathJax.typesetPromise([d.current]).catch(S=>console.error("MathJax typesetting failed:",S))},[t.text]);const m=R.useCallback(()=>{var S;(S=r.current)==null||S.close(),c.current.forEach(A=>{try{A.stop()}catch{}}),c.current.clear(),r.current=null,f.current=0,o("idle")},[]);R.useEffect(()=>()=>{var S,A;m(),((S=u.current)==null?void 0:S.state)!=="closed"&&((A=u.current)==null||A.close())},[m]);const h=async()=>{if(l!=="idle"){m();return}o("loading"),(!u.current||u.current.state==="closed")&&(u.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})),await u.current.resume();const S=u.current,A=oR(t.text),v=lR.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",callbacks:{onopen:()=>{v.then(y=>y.sendRealtimeInput({text:A}))},onmessage:async y=>{var E,M,_,x,b;const T=(x=(_=(M=(E=y.serverContent)==null?void 0:E.modelTurn)==null?void 0:M.parts[0])==null?void 0:_.inlineData)==null?void 0:x.data;if(T){o(V=>V==="loading"?"playing":V);const D=await wg(Rg(T),S,24e3,1),I=S.createBufferSource();I.buffer=D,I.connect(S.destination),I.onended=()=>{c.current.delete(I),c.current.size===0&&r.current===null&&o("idle")};const J=S.currentTime;f.current=Math.max(f.current,J),I.start(f.current),f.current+=D.duration,c.current.add(I)}(b=y.serverContent)!=null&&b.turnComplete&&(v.then(D=>D.close()),r.current=null)},onclose:()=>{r.current=null,c.current.size===0&&o("idle")},onerror:y=>{console.error("TTS Error",y),m()}},config:{responseModalities:[Vi.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},systemInstruction:"You are a text-to-speech service. Your task is to read the text provided by the user aloud. Use a clear, natural, and friendly female teacher's voice appropriate for tutoring students in Vietnam. Do not add any extra words, conversation, or introductory phrases. Only speak the text provided."}});v.then(y=>r.current=y).catch(y=>{console.error("Failed to establish TTS session:",y),m()})},g=(()=>{const S=t.text||"";return!S&&!t.file&&!t.imageIsLoading?{__html:""}:typeof window.marked<"u"?{__html:window.marked.parse(S)}:{__html:`<p class="whitespace-pre-wrap">${S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</p>`}})(),C=t.text||t.file||t.imageIsLoading;return p.jsxs("div",{ref:d,className:`flex flex-col ${i?"items-start animate-slide-in-left":"items-end animate-slide-in-right"}`,children:[p.jsxs("div",{className:`flex items-end gap-3 w-full ${i?"justify-start":"justify-end"}`,children:[i&&p.jsx("div",{className:"flex-shrink-0 self-start",children:p.jsx(Xl,{})}),C&&p.jsxs("div",{className:`group relative max-w-xl lg:max-w-2xl px-4 py-3 rounded-2xl shadow-sm ${i?"bg-tutor-secondary text-gray-800 rounded-bl-none":"bg-user-secondary text-gray-800 rounded-br-none"}`,children:[t.imageIsLoading&&p.jsxs("div",{className:"mb-2 p-4 bg-white/50 rounded-lg flex items-center justify-center gap-3",children:[p.jsx("div",{className:"w-6 h-6 border-2 border-tutor-primary border-t-transparent rounded-full animate-spin"}),p.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"C ang v hnh minh ha..."})]}),t.file&&p.jsx("div",{className:"mb-2",children:i?t.file.mimeType.startsWith("image/")&&p.jsx("img",{src:t.file.data,alt:"Hnh minh ha",className:"w-full max-h-96 rounded-lg object-contain bg-gray-200"}):p.jsxs("div",{className:"p-2 bg-white/50 border border-gray-300/50 rounded-lg flex items-center gap-2",children:[t.file.mimeType.startsWith("image/")?p.jsx("img",{src:t.file.data,alt:t.file.name,className:"w-20 h-20 rounded-md object-cover"}):p.jsx("div",{className:"w-12 h-12 flex-shrink-0 flex items-center justify-center bg-user-primary/20 rounded-lg",children:p.jsx(rR,{className:"w-8 h-8 text-user-primary"})}),p.jsx("div",{className:"overflow-hidden",children:p.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:t.file.name})})]})}),t.text&&p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:g}),i&&t.text&&p.jsxs("button",{onClick:h,className:"absolute -bottom-3 -right-3 bg-white p-1.5 rounded-full text-tutor-primary hover:bg-tutor-secondary shadow-md transition opacity-0 group-hover:opacity-100 focus:opacity-100 disabled:opacity-50 btn-press","aria-label":"c vn bn",children:[l==="loading"&&p.jsx(sR,{}),l!=="loading"&&p.jsx(aR,{isPlaying:l==="playing"})]})]}),!i&&p.jsx("div",{className:"flex-shrink-0 self-start",children:p.jsx(Ng,{})})]}),i&&t.suggestions&&t.suggestions.length>0&&p.jsx("div",{className:"pl-12 mt-2 flex flex-wrap items-start justify-start gap-2 animate-fade-in-suggestions",children:t.suggestions.map((S,A)=>p.jsx("button",{onClick:()=>n(S),className:"px-3 py-1.5 bg-purple-100 text-purple-700 rounded-full text-sm font-medium hover:bg-purple-200 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-400 btn-press",children:S},A))}),p.jsx("style",{children:`
            .mjx-chtml {
                font-size: 1.1em !important;
            }
            @keyframes fade-in-suggestions {
                from { opacity: 0; transform: translateY(5px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in-suggestions {
                animation: fade-in-suggestions 0.4s ease-out forwards;
            }
            /* Custom styles for markdown content for a professional look */
            .markdown-content > *:first-child {
                margin-top: 0;
            }
            .markdown-content > *:last-child {
                margin-bottom: 0;
            }
            .markdown-content p {
                margin-bottom: 0.75rem; /* 12px */
                line-height: 1.6;
            }
            .markdown-content h1, .markdown-content h2, .markdown-content h3, .markdown-content h4 {
                font-weight: 700;
                color: #6d28d9; /* Corresponds to tutor-primary */
                margin-top: 1.5rem;
                margin-bottom: 0.75rem;
                line-height: 1.3;
            }
            .markdown-content h2 {
                font-size: 1.25rem; /* 20px */
                padding-bottom: 0.3rem;
                border-bottom: 1px solid #e5e7eb; /* gray-200 */
            }
            .markdown-content h3 {
                font-size: 1.125rem; /* 18px */
            }
            .markdown-content h4 {
                font-size: 1rem; /* 16px */
                color: #581C87; /* Darker purple */
            }
            .markdown-content ul, .markdown-content ol {
                list-style-position: outside;
                padding-left: 1.5rem;
                margin-bottom: 1rem;
            }
            .markdown-content ul { list-style-type: disc; }
            .markdown-content ol { list-style-type: decimal; }
            .markdown-content li {
                margin-bottom: 0.5rem;
                padding-left: 0.25rem;
            }
            .markdown-content li::marker {
                color: #a78bfa;
            }
            .markdown-content strong, .markdown-content b { 
                font-weight: 600;
                color: #581C87;
            }
            .markdown-content blockquote {
                border-left: 4px solid #a78bfa;
                padding: 0.75rem 1rem;
                margin: 1rem 0;
                color: #4b5563;
                background-color: #f5f3ff; /* Lighter tutor-secondary */
            }
            .markdown-content blockquote p {
                margin-bottom: 0;
            }
            .markdown-content code {
                background-color: #ede9fe; /* Even lighter purple */
                color: #581C87;
                padding: 0.125rem 0.375rem;
                border-radius: 4px;
                font-family: monospace;
                font-size: 0.9em;
            }
            .markdown-content pre {
                background-color: #f5f3ff;
                padding: 1rem;
                border-radius: 8px;
                margin: 1rem 0;
                overflow-x: auto;
                border: 1px solid #ddd6fe;
            }
            .markdown-content pre code {
                background-color: transparent;
                padding: 0;
                border: none;
            }
            .markdown-content hr {
                border-top: 1px solid #e5e7eb;
                margin: 1.5rem 0;
            }
            .markdown-content table {
                width: 100%;
                border-collapse: collapse;
                margin: 1rem 0;
            }
            .markdown-content th, .markdown-content td {
                border: 1px solid #d1d5db;
                padding: 0.5rem 0.75rem;
                text-align: left;
            }
            .markdown-content th {
                background-color: #f5f3ff;
                font-weight: 600;
            }
        `})]})},Hd=()=>p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(Xl,{}),p.jsx("div",{className:"bg-tutor-secondary p-3 rounded-2xl rounded-bl-none",children:p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx("span",{className:"h-2 w-2 bg-tutor-primary rounded-full animate-bounce [animation-delay:-0.3s]"}),p.jsx("span",{className:"h-2 w-2 bg-tutor-primary rounded-full animate-bounce [animation-delay:-0.15s]"}),p.jsx("span",{className:"h-2 w-2 bg-tutor-primary rounded-full animate-bounce"})]})})]}),qd="ai_tutor_avatar",Ss="user_avatar",Gd="ai_tutor_name",cR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.042 1.95l-2.122 1.159a1 1 0 00-.578 1.68l7 12a1 1 0 001.68-.578l1.159-2.122a1 1 0 011.95.042l1.093 2.668a1 1 0 001.84 0l3-7a1 1 0 00-.788-1.218l-5.998-1.551a1 1 0 00-1.218.788l-1.55 5.998a1 1 0 00.788 1.218l.55.142a1 1 0 001.218-.788l1.093-4.258a1 1 0 00-.97-1.243l-4.258 1.093a1 1 0 00-.788 1.218l.142.55a1 1 0 001.218.788l2.668 1.093z"})}),fR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),dR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 16c1.255 0 2.443-.29 3.5-.804V4.804zM14.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 0014.5 16c1.255 0 2.443-.29 3.5-.804v-10A7.968 7.968 0 0014.5 4z"})}),zd=()=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[p.jsx("path",{d:"M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.414l-1.293 1.293a1 1 0 01-1.414-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L13 9.414V13H5.5z"}),p.jsx("path",{d:"M9 13h2v5H9v-5z"})]}),mR=[{id:"default",component:p.jsx(cR,{})},{id:"avatar-1",component:p.jsx(fR,{})},{id:"avatar-2",component:p.jsx(dR,{})}],hR=({isOpen:t,onClose:e})=>{const[n,i]=R.useState("Hng Vn"),[l,o]=R.useState("default"),[r,u]=R.useState(""),[c,f]=R.useState(null),[d,m]=R.useState(!1),[h,g]=R.useState(null),[C,S]=R.useState(null),A=R.useRef(null),v=R.useRef(null);R.useEffect(()=>{if(t){const _=localStorage.getItem(Gd)||"Hng Vn";i(_);const x=localStorage.getItem(qd)||"default";o(x),x.startsWith("data:image")?f(x):f(null);const b=localStorage.getItem(Ss);S(b)}},[t]);const y=async()=>{if(!r.trim()){g("Vui lng nhp m t cho avatar.");return}m(!0),g(null);try{const _=await FN(r);f(_),o(_)}catch(_){g(_ instanceof Error?_.message:"Li khng xc nh.")}finally{m(!1)}},T=async _=>{var b;const x=(b=_.target.files)==null?void 0:b[0];if(x){const D=await ca(x);f(D),o(D)}},E=async _=>{var b;const x=(b=_.target.files)==null?void 0:b[0];if(x){const D=await ca(x);S(D)}},M=()=>{localStorage.setItem(Gd,n.trim()||"C gio AI"),localStorage.setItem(qd,l),C?localStorage.setItem(Ss,C):localStorage.removeItem(Ss),window.dispatchEvent(new CustomEvent("settingsChanged")),e()};return t?p.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:[p.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md animate-fade-in",onClick:_=>_.stopPropagation(),children:[p.jsx("div",{className:"p-6 border-b",children:p.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Ci t"})}),p.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"font-semibold text-gray-700",children:"Thng tin C gio"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"tutor-name-input",className:"font-medium text-sm text-gray-600",children:"Tn ca C"}),p.jsx("input",{id:"tutor-name-input",type:"text",value:n,onChange:_=>i(_.target.value),placeholder:"V d: Hng Vn",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-tutor-primary focus:outline-none"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"font-medium text-sm text-gray-600",children:"Avatar ca C"}),p.jsx("div",{className:"flex items-center justify-around gap-4 pt-1",children:mR.map(({id:_,component:x})=>p.jsx("button",{onClick:()=>o(_),className:`w-16 h-16 rounded-full flex items-center justify-center transition bg-tutor-secondary text-tutor-primary btn-press ${l===_?"ring-4 ring-tutor-primary ring-offset-2":"hover:bg-purple-200"}`,children:x},_))})]}),p.jsx("div",{className:"text-center text-gray-500 text-sm",children:"hoc ty chnh"}),p.jsx("input",{type:"file",ref:A,onChange:T,accept:"image/*",className:"hidden"}),p.jsxs("button",{onClick:()=>{var _;return(_=A.current)==null?void 0:_.click()},className:"w-full flex items-center justify-center p-2 border-2 border-dashed rounded-lg text-gray-500 hover:bg-gray-100 hover:border-gray-400 transition btn-press",children:[p.jsx(zd,{})," Ti nh ln"]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:r,onChange:_=>u(_.target.value),placeholder:"VD: c gio tc ngn, eo knh",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-tutor-primary focus:outline-none",disabled:d}),p.jsx("button",{onClick:y,disabled:d,className:"bg-tutor-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-purple-300 btn-press btn-transition",children:d?"ang v...":"To"})]}),h&&p.jsx("p",{className:"text-red-500 text-sm mt-2",children:h})]}),(d||c)&&p.jsxs("div",{className:"mt-4 flex flex-col items-center justify-center h-24",children:[p.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Avatar ty chnh"}),d?p.jsx("div",{className:"w-10 h-10 border-4 border-tutor-primary border-t-transparent rounded-full animate-spin"}):c?p.jsx("button",{onClick:()=>o(c),className:`w-20 h-20 rounded-full overflow-hidden btn-press btn-transition ${l===c?"ring-4 ring-tutor-primary ring-offset-2":""}`,children:p.jsx("img",{src:c,alt:"Generated Avatar",className:"w-full h-full object-cover"})}):null]})]}),p.jsxs("div",{className:"border-t pt-6 space-y-4",children:[p.jsx("h3",{className:"font-semibold text-gray-700",children:"Thng tin ca Em"}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-user-secondary flex items-center justify-center overflow-hidden",children:C?p.jsx("img",{src:C,alt:"User Avatar",className:"w-full h-full object-cover"}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-user-primary",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("input",{type:"file",ref:v,onChange:E,accept:"image/*",className:"hidden"}),p.jsxs("button",{onClick:()=>{var _;return(_=v.current)==null?void 0:_.click()},className:"w-full mb-2 flex items-center justify-center p-2 border-2 border-dashed rounded-lg text-gray-500 hover:bg-gray-100 hover:border-gray-400 transition btn-press",children:[p.jsx(zd,{})," Ti nh ca em"]}),C&&p.jsx("button",{onClick:()=>S(null),className:"w-full text-sm text-red-500 hover:underline btn-press",children:"Xa avatar"})]})]})]})]}),p.jsxs("div",{className:"bg-gray-50 p-4 flex justify-end space-x-3 rounded-b-lg",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 btn-press btn-transition",children:"Hy"}),p.jsx("button",{onClick:M,className:"px-4 py-2 bg-tutor-primary text-white rounded-md hover:bg-purple-700 btn-press btn-transition",children:"Lu thay i"})]})]}),p.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
                .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
            `})]}):null},pR=Array.from({length:12},(t,e)=>`Lp ${e+1}`),gR=["Ton hc","Ng vn","Ting Anh","Vt l","Ha hc","Sinh hc","Lch s","a l","X hi"],yR="ai_tutor_name",vR="ai_tutor_learning_progress",TR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),CR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"})}),SR=({onStart:t,onShowHistory:e,installPrompt:n})=>{const[i,l]=R.useState(""),[o,r]=R.useState(""),[u,c]=R.useState(!1),[f,d]=R.useState("Gia s AI"),[m,h]=R.useState([]),g=i&&o,C=async()=>{n&&n.prompt()};R.useEffect(()=>{if(i&&o){const A=`${i}_${o}`.replace(/\s+/g,"_").toLowerCase(),v=localStorage.getItem(vR);if(v){const y=JSON.parse(v);h(y[A]||[])}else h([])}else h([])},[i,o]);const S=()=>{const A=localStorage.getItem(yR)||"Gia s AI";d(A)};return R.useEffect(()=>(S(),window.addEventListener("settingsChanged",S),()=>{window.removeEventListener("settingsChanged",S)}),[]),p.jsxs(p.Fragment,{children:[p.jsx(hR,{isOpen:u,onClose:()=>c(!1)}),p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4 font-sans",children:[p.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6 text-center animate-fade-in",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx(Xl,{size:"lg"})}),p.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:f}),p.jsx("p",{className:"text-gray-500",children:"Cho em, em hy chn lp v mn hc  bt u nh!"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"grade-select",className:"sr-only",children:"Chn Lp"}),p.jsxs("select",{id:"grade-select",value:i,onChange:A=>l(A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-tutor-primary focus:outline-none bg-gray-50 transition",children:[p.jsx("option",{value:"",disabled:!0,children:"-- Chn Lp --"}),pR.map(A=>p.jsx("option",{value:A,children:A},A))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"subject-select",className:"sr-only",children:"Chn Mn hc"}),p.jsxs("select",{id:"subject-select",value:o,onChange:A=>r(A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-tutor-primary focus:outline-none bg-gray-50 transition",children:[p.jsx("option",{value:"",disabled:!0,children:"-- Chn Mn hc --"}),gR.map(A=>p.jsx("option",{value:A,children:A},A))]})]})]}),i&&o&&o!=="X hi"&&p.jsx("div",{className:"text-left p-4 bg-purple-50 rounded-lg border border-purple-200 animate-fade-in space-y-2",children:m.length>0?p.jsxs(p.Fragment,{children:[p.jsx("h3",{className:"font-semibold text-tutor-primary text-sm",children:"Cc ch   hc gn y:"}),p.jsx("ul",{className:"space-y-1.5 pl-1",children:m.map((A,v)=>p.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[p.jsx("svg",{className:"w-4 h-4 mr-2 mt-0.5 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),p.jsx("span",{children:A.topic})]},v))})]}):p.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 mr-2 text-tutor-primary flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.042 1.95l-2.122 1.159a1 1 0 00-.578 1.68l7 12a1 1 0 001.68-.578l1.159-2.122a1 1 0 011.95.042l1.093 2.668a1 1 0 001.84 0l3-7a1 1 0 00-.788-1.218l-5.998-1.551a1 1 0 00-1.218.788l-1.55 5.998a1 1 0 00.788 1.218l.55.142a1 1 0 001.218-.788l1.093-4.258a1 1 0 00-.97-1.243l-4.258 1.093a1 1 0 00-.788 1.218l.142.55a1 1 0 001.218.788l2.668 1.093z"})}),p.jsx("span",{children:"Sn sng khm ph ch  u tin cho mn hc ny!"})]})}),p.jsxs("div",{className:"flex flex-col space-y-3 pt-2",children:[p.jsx("button",{onClick:()=>g&&t("chat",i,o),disabled:!g,className:"w-full bg-tutor-primary text-white p-3 rounded-lg font-semibold hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tutor-primary disabled:bg-purple-300 disabled:cursor-not-allowed transition-all duration-200 btn-press",children:"Vo phng hc"}),p.jsx("button",{onClick:()=>g&&t("live",i,o),disabled:!g,className:"w-full bg-blue-500 text-white p-3 rounded-lg font-semibold hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed transition-all duration-200 btn-press",children:"Luyn ni"}),p.jsx("button",{onClick:()=>g&&t("quiz",i,o),disabled:!g,className:"w-full bg-green-500 text-white p-3 rounded-lg font-semibold hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-green-300 disabled:cursor-not-allowed transition-all duration-200 btn-press",children:"Kim tra kin thc"})]}),p.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[n&&p.jsxs("button",{onClick:C,className:"w-full bg-indigo-500 text-white p-3 rounded-lg font-semibold hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 flex items-center justify-center btn-press","aria-label":"Ci t ng dng",children:[p.jsx(TR,{}),"Ci t ng dng"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx("button",{onClick:e,className:"w-full text-gray-600 p-3 rounded-lg font-semibold hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-all duration-200 btn-press",children:"Xem lch s"}),p.jsxs("button",{onClick:()=>c(!0),className:"w-full text-gray-600 p-3 rounded-lg font-semibold hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-all duration-200 flex items-center justify-center btn-press",children:[p.jsx(CR,{}),"Ci t"]})]})]})]}),p.jsx("style",{children:`
            @keyframes fade-in {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in {
                animation: fade-in 0.5s ease-out forwards;
            }
        `})]})]})},ER="AIzaSyDZUbnl9qd-g_esENSXf1tZ4eGOy4wcjFg",xR=new ku({apiKey:ER}),AR=({grade:t,subject:e,onBack:n})=>{const[i,l]=R.useState(!1),[o,r]=R.useState("Nhn nt   bt u ni"),[u,c]=R.useState(""),[f,d]=R.useState([]),m=R.useRef(""),h=R.useRef(""),g=R.useRef(null),C=R.useRef(null),S=R.useRef(null),A=R.useRef(null),v=R.useRef(null),y=R.useRef(null),T=R.useRef(null),E=R.useRef(new Set),M=R.useRef(0);R.useEffect(()=>{var V;(V=g.current)==null||V.scrollIntoView({behavior:"smooth"})},[f]);const _=R.useCallback((V=!1)=>{y.current&&(y.current.getTracks().forEach(Q=>Q.stop()),y.current=null),v.current&&(v.current.disconnect(),v.current=null),T.current&&(T.current.disconnect(),T.current=null),C.current&&(C.current.then(Q=>Q.close()).catch(console.error),C.current=null),V||(l(!1),r(" dng. Nhn nt   ni li."))},[]),x=R.useCallback(()=>{var V,Q;_(!0),(V=S.current)==null||V.close().catch(console.error),(Q=A.current)==null||Q.close().catch(console.error),S.current=null,A.current=null},[_]),b=()=>{x(),n()};R.useEffect(()=>()=>{x()},[x]);const D=R.useCallback(()=>{(!A.current||A.current.state==="closed")&&(A.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}));const V=A.current,Q=e==="Ting Anh"?"en-US":"vi-VN";C.current=xR.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",callbacks:{onopen:()=>{r("Kt ni thnh cng. Bt u ni...")},onmessage:async ne=>{var L,P,Y,Me,Ne,Qe,oe;const H=(Y=(P=(L=ne.serverContent)==null?void 0:L.modelTurn)==null?void 0:P.parts[0])==null?void 0:Y.inlineData.data;if(H){M.current=Math.max(M.current,V.currentTime);const te=await wg(Rg(H),V,24e3,1),F=V.createBufferSource();F.buffer=te,F.connect(V.destination),F.addEventListener("ended",()=>E.current.delete(F)),F.start(M.current),M.current+=te.duration,E.current.add(F)}const w=!!((Me=ne.serverContent)!=null&&Me.inputTranscription),U=!!((Ne=ne.serverContent)!=null&&Ne.outputTranscription);(w||U)&&d(te=>{const F=[...te];let ve=F.length>0?F[F.length-1]:null;if(w){const G=ne.serverContent.inputTranscription.text;if(m.current+=G,ve&&ve.speaker==="user")ve.text=m.current;else{const W={id:Date.now()+Math.random(),speaker:"user",text:m.current};F.push(W),ve=W}}if(U){const G=ne.serverContent.outputTranscription.text;if(h.current+=G,ve&&ve.speaker==="ai")ve.text=h.current;else{const W={id:Date.now()+Math.random(),speaker:"ai",text:h.current};F.push(W)}}return F}),(Qe=ne.serverContent)!=null&&Qe.turnComplete&&(m.current="",h.current=""),(oe=ne.serverContent)!=null&&oe.interrupted&&(E.current.forEach(te=>te.stop()),E.current.clear(),M.current=0)},onerror:ne=>{c(` xy ra li: ${ne.message||"Khng th kt ni"}`),r("Li kt ni. Vui lng th li."),_()},onclose:ne=>{r("Kt ni  ng. Nhn nt   bt u li."),i&&_()}},config:{responseModalities:[Vi.AUDIO],inputAudioTranscription:{languageCodes:[Q]},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},systemInstruction:LN(t,e)}}),C.current.catch(ne=>{const H=ne instanceof Error?ne.message:"Unknown error";c(`Li khi to: ${H}`),r("Khng th bt u phin luyn ni."),l(!1)})},[t,e,_,i]),I=R.useCallback(async()=>{c(""),r("ang yu cu quyn truy cp micro..."),d([]),l(!0);try{(!S.current||S.current.state==="closed")&&(S.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}));const V=S.current;await V.resume();const Q=await navigator.mediaDevices.getUserMedia({audio:!0});y.current=Q,D(),T.current=V.createMediaStreamSource(Q);const ne=V.createScriptProcessor(4096,1,1);v.current=ne,ne.onaudioprocess=H=>{const w=H.inputBuffer.getChannelData(0),U=nR(w);C.current&&C.current.then(L=>{L.sendRealtimeInput({media:U})}).catch(()=>{})},T.current.connect(ne),ne.connect(V.destination)}catch(V){const Q=V instanceof Error?V.message:"Unknown error";c(`Li micro: ${Q}`),r("Khng th truy cp micro."),l(!1)}},[D]),J=()=>{i?_():I()};return p.jsxs("div",{className:"flex flex-col h-screen font-sans bg-gray-100 text-gray-800",children:[p.jsx(ua,{grade:t,subject:e,onBack:b}),p.jsxs("main",{className:"flex-1 flex flex-col items-center justify-between p-4 text-center",children:[p.jsxs("div",{className:"w-full max-w-2xl flex-1 mb-6 bg-white rounded-lg shadow-inner p-4 overflow-y-auto flex flex-col",children:[p.jsxs("div",{className:"space-y-4 flex-1",children:[f.map(V=>p.jsxs("div",{className:`flex items-start gap-2.5 ${V.speaker==="user"?"justify-end animate-slide-in-right":"justify-start animate-slide-in-left"}`,children:[V.speaker==="ai"&&p.jsx("div",{className:"flex-shrink-0",children:p.jsx(Xl,{size:"sm"})}),p.jsx("div",{className:`max-w-md text-left px-3 py-2 rounded-lg ${V.speaker==="user"?"bg-user-secondary":"bg-tutor-secondary"}`,children:V.text}),V.speaker==="user"&&p.jsx("div",{className:"flex-shrink-0",children:p.jsx(Ng,{size:"sm"})})]},V.id)),!i&&f.length>0&&p.jsx("div",{className:"text-center text-gray-400 text-sm p-2",children:"Phin  kt thc."}),p.jsx("div",{ref:g})]}),f.length===0&&p.jsx("p",{className:"text-gray-400 text-center m-auto",children:"Lch s tr chuyn s xut hin  y"})]}),p.jsx("div",{className:"mb-4 min-h-[28px]",children:p.jsx("p",{className:`text-lg ${u?"text-red-500":"text-gray-500"}`,children:u||o})}),p.jsxs("div",{className:"relative w-48 h-48 md:w-56 md:h-56 flex items-center justify-center",children:[p.jsx("div",{className:`absolute inset-0 bg-tutor-primary rounded-full transition-transform duration-500 ${i?"scale-100 animate-pulse":"scale-90"}`}),p.jsx("div",{className:"absolute inset-2 bg-gray-50 rounded-full"}),p.jsx("button",{onClick:J,className:"relative z-10 w-32 h-32 md:w-40 md:h-40 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg transform transition focus:outline-none focus:ring-4 focus:ring-red-300 btn-press","aria-label":i?"Dng ni":"Bt u ni",children:i?p.jsx("svg",{className:"w-10 h-10",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M5 5a1 1 0 011-1h8a1 1 0 011 1v10a1 1 0 01-1 1H6a1 1 0 01-1-1V5z",clipRule:"evenodd"})}):p.jsx("svg",{className:"w-12 h-12",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})})})]})]})]})},_R=({onViewChat:t,onBack:e})=>{const[n,i]=R.useState([]);R.useEffect(()=>{const o=localStorage.getItem("ai_tutor_chat_history");o&&i(JSON.parse(o))},[]);const l=(o,r=80)=>!o||o.length<=r?o:o.substring(0,r).trim()+"...";return p.jsxs("div",{className:"flex flex-col h-screen bg-gray-100 font-sans",children:[p.jsxs("header",{className:"bg-white shadow-md p-3 sticky top-0 z-10 flex items-center justify-between",children:[p.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition btn-press","aria-label":"Quay li",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Lch s tr chuyn"}),p.jsx("div",{className:"w-10"})," "]}),p.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:n.length===0?p.jsxs("div",{className:"text-center text-gray-500 mt-20",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Khng c lch s"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Cc cuc tr chuyn ca em s c lu ti y."})]}):p.jsx("ul",{className:"space-y-4",children:n.map(o=>{const r=o.messages.slice(-3);return p.jsx("li",{children:p.jsxs("button",{onClick:()=>t(o),className:"w-full text-left bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md hover:border-tutor-primary transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-tutor-primary hover:-translate-y-1 btn-press",children:[p.jsxs("div",{className:"font-semibold text-tutor-primary",children:[o.subject," - ",o.grade]}),p.jsx("div",{className:"text-sm text-gray-500 mt-1",children:new Date(o.timestamp).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),p.jsx("div",{className:"text-sm text-gray-700 mt-2 pt-2 border-t border-gray-100 space-y-1",children:r.length>0?r.map((u,c)=>p.jsxs("p",{children:[p.jsxs("span",{className:`font-medium ${u.sender===qe.User?"text-user-primary":"text-tutor-primary"}`,children:[u.sender===qe.User?"Em":"C",":"]}),p.jsx("span",{className:"text-gray-600 ml-1",children:l(u.text)||"[Hnh nh]"})]},c)):p.jsx("p",{className:"italic text-gray-400",children:"Khng c ni dung tr chuyn."})})]})},o.id)})})})]})},MR=()=>p.jsx("div",{className:"flex justify-center items-center p-8",children:p.jsx("div",{className:"w-16 h-16 border-4 border-tutor-primary border-t-transparent rounded-full animate-spin"})}),NR=({className:t})=>p.jsxs("svg",{className:`animate-spin h-5 w-5 ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),RR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),wR=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),Bd=({className:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),DR=({className:t})=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:[p.jsx("path",{d:"M2 6a2 2 0 012-2h1.172a2 2 0 011.414.586l.828.828A2 2 0 008.828 6H12a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"}),p.jsx("path",{d:"M15 8a1 1 0 01-1-1V5h-2a1 1 0 010-2h2V2a1 1 0 012 0v1h2a1 1 0 110 2h-2v2a1 1 0 01-1 1z"})]}),bR=({grade:t,subject:e,onBack:n})=>{const[i,l]=R.useState(""),[o,r]=R.useState(!1),[u,c]=R.useState([]),[f,d]=R.useState(0),[m,h]=R.useState(null),[g,C]=R.useState(null),[S,A]=R.useState(0),[v,y]=R.useState([]),[T,E]=R.useState(!1),[M,_]=R.useState(null),[x,b]=R.useState(null),[D,I]=R.useState(null),[J,V]=R.useState(!1),[Q,ne]=R.useState(!1),H=R.useRef(null),w=o&&f>=u.length,U=R.useMemo(()=>u.map(G=>{const W=Ze=>Ze.replace(/^[A-Z]\.\s*/i,"").trim();return G.options.find((Ze,wt)=>{const Ki=G.correctAnswer.trim(),bg=Ze.trim(),Ig=String.fromCharCode(65+wt),Ug=W(Ki),Vg=W(bg);return Ug.toLowerCase()===Vg.toLowerCase()||Ki.replace(/\./g,"").toUpperCase()===Ig})||null}),[u]),L=!w&&u.length>0?u[f]:null,P=L?U[f]:null,Y=async()=>{if(!i.trim()){_("Em vui lng nhp ch  mun kim tra nh.");return}E(!0),_(null);try{const G=await zN(t,e,i);G.length===0?(_("C khng th to c cu hi cho ch  ny. Em th mt ch  khc nh."),c([])):(c(G),y(new Array(G.length).fill(null)),r(!0))}catch(G){_(G instanceof Error?G.message:" c li khng xc nh xy ra.")}finally{E(!1)}},Me=async G=>{var Ze;const W=(Ze=G.target.files)==null?void 0:Ze[0];if(W){if(W.size>10*1024*1024){alert("Kch thc file qu ln. Vui lng chn file di 10MB.");return}const wt=await ca(W);b({name:W.name,mimeType:W.type,data:wt}),I(null)}H.current&&(H.current.value="")},Ne=G=>{b(G),ne(!1),I(null)},Qe=async()=>{if(!(!x||!L)){V(!0),I(null),_(null);try{const G=await BN(x,L);I(G)}catch(G){const W=G instanceof Error?G.message:"Li khng xc nh.";I(`Rt tic, c khng th nhn xt bi lm lc ny. (${W})`)}finally{V(!1)}}},oe=G=>{if(m)return;const W=G===P;h(G),C(W),W&&A(Ze=>Ze+1),y(Ze=>{const wt=[...Ze];return wt[f]=G,wt})},te=()=>{h(null),C(null),d(G=>G+1),b(null),I(null),V(!1),_(null)},F=()=>{l(""),r(!1),c([]),d(0),h(null),C(null),A(0),y([]),_(null),b(null),I(null),V(!1)},ve=G=>m?G===P?"bg-green-200 border-green-500 text-green-800 ring-2 ring-green-500":G===m&&G!==P?"bg-red-200 border-red-500 text-red-800":"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 hover:bg-purple-50 hover:border-tutor-primary";return o?p.jsxs(p.Fragment,{children:[Q&&p.jsx(Mg,{onClose:()=>ne(!1),onCapture:Ne}),p.jsxs("div",{className:"flex flex-col h-screen font-sans bg-gray-100",children:[p.jsx(ua,{grade:t,subject:e,onBack:n}),p.jsxs("main",{className:"flex-1 flex items-center justify-center p-4",children:[T&&p.jsx(MR,{}),M&&!T&&p.jsxs("div",{className:"w-full max-w-xl text-center bg-white p-8 rounded-lg shadow-lg",children:[p.jsx("h2",{className:"text-xl font-bold text-red-600",children:"i, c li ri!"}),p.jsx("p",{className:"text-gray-600 mt-2",children:M}),p.jsx("button",{onClick:F,className:"mt-6 bg-tutor-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 btn-press btn-transition",children:"Th li"})]}),!T&&u.length>0&&p.jsx("div",{className:"w-full max-w-xl",children:w?p.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Hon thnh!"}),p.jsx("p",{className:"text-lg text-gray-600 mt-4",children:"im ca em l:"}),p.jsxs("p",{className:"text-5xl font-bold text-tutor-primary my-4",children:[S," / ",u.length]}),p.jsxs("div",{className:"mt-6 text-left max-h-80 overflow-y-auto pr-2 space-y-4",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"Xem li bi lm"}),u.map((G,W)=>{const Ze=v[W],wt=U[W],Ki=Ze===wt;return p.jsxs("div",{className:`p-3 border-l-4 rounded-r-lg ${Ki?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:[p.jsxs("p",{className:"font-semibold text-gray-800",children:[W+1,". ",G.question]}),p.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:[p.jsx("strong",{children:"Em chn:"})," ",Ze||"Khng tr li"]}),!Ki&&p.jsxs("p",{className:"mt-1 text-sm text-gray-700",children:[p.jsx("strong",{children:"p n ng:"})," ",wt||"Khng xc nh"]})]},W)})]}),p.jsxs("div",{className:"flex justify-center space-x-4 mt-8",children:[p.jsx("button",{onClick:F,className:"bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300 btn-press btn-transition",children:"Lm li ch  khc"}),p.jsx("button",{onClick:n,className:"bg-tutor-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 btn-press btn-transition",children:"Quay v"})]})]}):L&&p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("p",{className:"text-sm font-semibold text-tutor-primary",children:["Cu ",f+1,"/",u.length]}),p.jsxs("p",{className:"text-sm font-semibold text-gray-600",children:["im: ",S]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:p.jsx("div",{className:"bg-tutor-primary h-2 rounded-full",style:{width:`${(f+1)/u.length*100}%`,transition:"width 0.5s ease-in-out"}})}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:L.question}),p.jsx("div",{className:"space-y-3",children:L.options.map((G,W)=>p.jsxs("button",{onClick:()=>oe(G),disabled:!!m,className:`w-full text-left p-3 border rounded-lg transition-all duration-200 flex items-center btn-press ${ve(G)}`,children:[p.jsxs("span",{className:"font-bold mr-3",children:[String.fromCharCode(65+W),"."]}),p.jsx("span",{children:G})]},W))}),m&&p.jsxs("div",{className:`mt-6 p-4 rounded-lg animate-fade-in ${g?"bg-green-50 border-l-4 border-green-500":"bg-red-50 border-l-4 border-red-500"}`,children:[p.jsxs("div",{className:"flex items-center",children:[g?p.jsx(RR,{}):p.jsx(wR,{}),p.jsx("h4",{className:"font-bold",children:g?"Chnh xc!":"Cha ng ri!"})]}),p.jsx("p",{className:"text-sm text-gray-700 mt-2",children:L.explanation}),!P&&p.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Li: C khng xc nh c p n ng t d liu cu hi. "}),p.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-dashed border-gray-300",children:[p.jsx("h4",{className:"font-bold text-gray-800",children:"Kim tra bi lm vit tay"}),p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Nu em  gii bi ny ra giy, hy ti file ln  c xem v nhn xt nh!"}),p.jsx("input",{type:"file",ref:H,onChange:Me,accept:"image/*,.pdf",className:"hidden"}),x?p.jsxs("div",{className:"mt-3 p-2 bg-gray-100 border border-gray-300 rounded-lg flex items-center justify-between animate-fade-in",children:[p.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[x.mimeType.startsWith("image/")?p.jsx("img",{src:x.data,alt:"Preview",className:"w-10 h-10 rounded object-cover"}):p.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-tutor-secondary rounded",children:p.jsx(Bd,{className:"w-6 h-6 text-tutor-primary"})}),p.jsx("span",{className:"text-sm text-gray-700 truncate",children:x.name})]}),p.jsx("button",{onClick:()=>b(null),className:"p-1 rounded-full hover:bg-gray-200 text-gray-500 btn-press",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):p.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>{var G;return(G=H.current)==null?void 0:G.click()},className:"w-full flex items-center justify-center p-2 border-2 border-dashed rounded-lg text-gray-500 hover:bg-gray-100 hover:border-gray-400 transition btn-press",children:[p.jsx(Bd,{className:"w-5 h-5 mr-2"})," Ti file ln"]}),p.jsxs("button",{onClick:()=>ne(!0),className:"w-full flex items-center justify-center p-2 border-2 border-dashed rounded-lg text-gray-500 hover:bg-gray-100 hover:border-gray-400 transition btn-press",children:[p.jsx(DR,{className:"w-5 h-5 mr-2"})," Chp nh"]})]}),x&&p.jsxs("button",{onClick:Qe,disabled:J,className:"w-full mt-3 bg-blue-500 text-white p-2 rounded-lg font-semibold hover:bg-blue-600 disabled:bg-blue-300 btn-press btn-transition flex items-center justify-center",children:[J&&p.jsx(NR,{className:"mr-2"}),J?"C ang xem bi...":"Nhn xt t c"]}),D&&!J&&p.jsxs("div",{className:"mt-4 flex items-start gap-3 animate-fade-in",children:[p.jsxs("div",{className:"flex-shrink-0 pt-1",children:[" ",p.jsx(Xl,{size:"sm"})," "]}),p.jsx("div",{className:"p-3 bg-tutor-secondary rounded-lg rounded-bl-none text-gray-800 text-sm whitespace-pre-wrap",children:D})]})]}),p.jsx("button",{onClick:te,className:"w-full mt-4 bg-tutor-primary text-white p-2 rounded-lg font-semibold hover:bg-purple-700 btn-press btn-transition",children:f===u.length-1?"Xem kt qu":"Cu tip theo"})]})]})})]}),p.jsx("style",{children:`
          @keyframes fade-in {
              from { opacity: 0; transform: translateY(10px); }
              to { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
        `})]})]}):p.jsxs("div",{className:"flex flex-col h-screen font-sans bg-gray-100",children:[p.jsx(ua,{grade:t,subject:e,onBack:n}),p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6 text-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kim tra kin thc"}),p.jsxs("p",{className:"text-gray-500",children:["Em mun c kim tra v ch  g trong mn ",e,"?"]}),p.jsx("input",{type:"text",value:i,onChange:G=>l(G.target.value),placeholder:"V d: Chng 1 o hm, Th T Hu,...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-tutor-primary focus:outline-none",disabled:T}),M&&p.jsx("p",{className:"text-red-500 text-sm",children:M}),p.jsx("button",{onClick:Y,disabled:T||!i.trim(),className:"w-full bg-tutor-primary text-white p-3 rounded-lg font-semibold hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-tutor-primary disabled:bg-purple-300 disabled:cursor-not-allowed transition-colors btn-press",children:T?"ang son ...":"Bt u"})]})})]})},IR=()=>{const[t,e]=R.useState("selection"),[n,i]=R.useState(""),[l,o]=R.useState(""),[r,u]=R.useState(!1),[c,f]=R.useState([]),[d,m]=R.useState(null),[h,g]=R.useState(!1),[C,S]=R.useState(null),[A,v]=R.useState(""),[y,T]=R.useState(null),E=R.useRef(null),M="ai_tutor_learning_progress",_="ai_tutor_chat_history",x="ai_tutor_resumable_sessions";R.useEffect(()=>{const H=U=>{U.preventDefault(),T(U)},w=()=>{T(null)};return window.addEventListener("beforeinstallprompt",H),window.addEventListener("appinstalled",w),()=>{window.removeEventListener("beforeinstallprompt",H),window.removeEventListener("appinstalled",w)}},[]),R.useEffect(()=>{if(t==="chat"&&!r&&n&&l&&c.length>0){const H=`${n}_${l}`.replace(/\s+/g,"_").toLowerCase(),w=localStorage.getItem(x),U=w?JSON.parse(w):{},L=d?[...d,...c]:c;U[H]={grade:n,subject:l,messages:L},localStorage.setItem(x,JSON.stringify(U))}},[c,d,t,n,l,r]);const b=async(H,w,U)=>{m(null),f([]),g(!0);try{const P={sender:qe.User,text:"Bt u bui hc hm nay."},Y=await Ts([P],H,w,U);f([{sender:qe.AI,text:Y.text,suggestions:Y.suggestions}])}catch(L){const P=L instanceof Error?L.message:"An unknown error occurred.";S(`Rt tic,  c li khi bt u bui hc. (${P})`),f([{sender:qe.AI,text:`Cho em! Hm nay chng ta li gp nhau ri. Em  sn sng cho bui hc mn ${w} ca ${n} cha no?`}])}finally{g(!1)}},D=async(H,w,U)=>{if(i(w),o(U),u(!1),H==="chat"){const L=`${w}_${U}`.replace(/\s+/g,"_").toLowerCase(),P=localStorage.getItem(x),Me=(P?JSON.parse(P):{})[L],Ne=localStorage.getItem(M),te=((Ne?JSON.parse(Ne):{})[L]||[]).map(F=>F.topic).join("; ");v(te),e("chat"),g(!0);try{if(Me&&Me.messages&&Me.messages.length>1){const F=await Ts(Me.messages,w,U,te,!0);m(Me.messages),f([{sender:qe.AI,text:F.text,suggestions:F.suggestions}])}else await b(w,U,te)}catch(F){const ve=F instanceof Error?F.message:"An unknown error occurred.";S(`Rt tic,  c li khi bt u bui hc. (${ve})`),f([{sender:qe.AI,text:`Cho em! Hm nay chng ta li gp nhau ri. Em  sn sng cho bui hc mn ${U} ca ${n} cha no?`}])}finally{g(!1)}}else e(H)},I=async()=>{if(t==="chat"&&!r&&c.some(H=>H.sender===qe.User)){const H=`${n}_${l}`.replace(/\s+/g,"_").toLowerCase(),w=d?[...d,...c]:c;if(w.filter(U=>U.sender===qe.User).length>=2){const U=await GN(w,n,l);if(U){const Qe={topic:U,timestamp:new Date().toISOString()},oe=localStorage.getItem(M),te=oe?JSON.parse(oe):{},F=te[H]||[],ve=[Qe,...F].slice(0,5);te[H]=ve,localStorage.setItem(M,JSON.stringify(te))}const L={id:Date.now(),grade:n,subject:l,messages:w,timestamp:new Date().toISOString()},P=localStorage.getItem(_),Y=P?JSON.parse(P):[];Y.unshift(L),localStorage.setItem(_,JSON.stringify(Y));const Me=localStorage.getItem(x),Ne=Me?JSON.parse(Me):{};delete Ne[H],localStorage.setItem(x,JSON.stringify(Ne))}}e("selection"),f([]),i(""),o(""),S(null),v(""),u(!1),m(null)},J=H=>{i(H.grade),o(H.subject),f(H.messages),u(!0),e("chat")},V=()=>{var H;(H=E.current)==null||H.scrollIntoView({behavior:"smooth"})};R.useEffect(()=>{V()},[c,h]);const Q=async(H,w)=>{if(!H.trim()&&!w||!n||!l)return;const U={sender:qe.User,text:H,file:w};f(oe=>[...oe.map((F,ve)=>{if(ve===oe.length-1&&F.sender===qe.AI){const{suggestions:G,...W}=F;return W}return F}),U]),g(!0),S(null);const L=[...c,U],P=d?[...d,...L]:L,Y=await Ts(P,n,l,A);if(d&&Y.text.includes("c thi, chng ta hy bt u mt bi hc mi nh!")){const oe={id:Date.now(),grade:n,subject:l,messages:d,timestamp:new Date().toISOString()},te=localStorage.getItem(_),F=te?JSON.parse(te):[];F.unshift(oe),localStorage.setItem(_,JSON.stringify(F));const ve=`${n}_${l}`.replace(/\s+/g,"_").toLowerCase(),G=localStorage.getItem(x),W=G?JSON.parse(G):{};delete W[ve],localStorage.setItem(x,JSON.stringify(W)),await b(n,l,A);return}g(!1);const Ne=Date.now(),Qe={id:Ne,sender:qe.AI,text:Y.text,suggestions:Y.suggestions,imageIsLoading:!!Y.imagePrompt};f(oe=>[...d?[...d,...oe]:oe,Qe]),d&&m(null),Y.imagePrompt&&JN(Y.imagePrompt).then(oe=>{const te={name:"illustration.png",mimeType:"image/png",data:oe};f(F=>F.map(ve=>ve.id===Ne?{...ve,file:te,imageIsLoading:!1}:ve))}).catch(oe=>{console.error("Image generation failed:",oe),f(te=>te.map(F=>F.id===Ne?{...F,imageIsLoading:!1,text:`${F.text}

_(Rt tic, c khng to c hnh minh ha cho em lc ny.)_`}:F))})},ne=H=>{Q(H)};return t==="selection"?p.jsx(SR,{onStart:D,onShowHistory:()=>e("history"),installPrompt:y}):t==="history"?p.jsx(_R,{onViewChat:J,onBack:()=>e("selection")}):t==="live"?p.jsx(AR,{grade:n,subject:l,onBack:I}):t==="quiz"?p.jsx(bR,{grade:n,subject:l,onBack:I}):p.jsx(p.Fragment,{children:p.jsxs("div",{className:"flex flex-col h-screen font-sans bg-gray-100",children:[p.jsx(ua,{grade:n,subject:l,onBack:I}),p.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-6",children:[c.map((H,w)=>p.jsx(uR,{message:H,subject:l,onSuggestionClick:ne},H.id||w)),h&&c.length===0&&p.jsx("div",{className:"flex justify-center items-center h-full",children:p.jsx(Hd,{})}),h&&c.length>0&&p.jsx("div",{className:"flex justify-start items-center",children:p.jsx(Hd,{})}),C&&p.jsx("div",{className:"flex justify-center",children:p.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded-lg",children:C})}),p.jsx("div",{ref:E})]}),p.jsx("footer",{className:"bg-white border-t border-gray-200 p-4 sticky bottom-0",children:p.jsx(QN,{onSendMessage:Q,isLoading:h,subject:l})})]})})},Dg=document.getElementById("root");if(!Dg)throw new Error("Could not find root element to mount to");const UR=Uv.createRoot(Dg);UR.render(p.jsx(jg.StrictMode,{children:p.jsx(IR,{})}));
